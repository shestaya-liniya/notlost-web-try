{"version":3,"file":"src_components_common_Avatar_tsx-src_components_common_FullNameTitle_tsx-src_hooks_useContext-ae8584.a73333166a01d1a173e8.js","mappings":"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,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;AACprC;AACA,MAAMC,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,E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","sources":["webpack://telegram-t/./src/components/common/Avatar.tsx","webpack://telegram-t/./src/components/common/AvatarStoryCircle.tsx","webpack://telegram-t/./src/components/common/FakeIcon.tsx","webpack://telegram-t/./src/components/common/FullNameTitle.tsx","webpack://telegram-t/./src/components/common/VerifiedIcon.tsx","webpack://telegram-t/./src/hooks/useContextMenuHandlers.ts","webpack://telegram-t/./src/hooks/useFastClick.ts","webpack://telegram-t/./src/hooks/useInfiniteScroll.ts","webpack://telegram-t/./src/lib/fastBlur.js","webpack://telegram-t/./src/util/resetScroll.ts","webpack://telegram-t/./src/components/common/FakeIcon.scss?783c","webpack://telegram-t/./src/components/common/FullNameTitle.module.scss?6448","webpack://telegram-t/./src/components/common/VerifiedIcon.scss?a52a"],"sourcesContent":["import type { MouseEvent as ReactMouseEvent } from 'react';\nimport type { FC, TeactNode } from '../../lib/teact/teact';\nimport React, { memo, useMemo, useRef } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type {\n  ApiPeer, ApiPhoto, ApiWebDocument,\n} from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport type { CustomPeer, StoryViewerOrigin } from '../../types';\nimport { ApiMediaFormat } from '../../api/types';\n\nimport { IS_TEST } from '../../config';\nimport {\n  getChatAvatarHash,\n  getChatTitle,\n  getPeerStoryHtmlId,\n  getUserFullName,\n  getVideoProfilePhotoMediaHash,\n  getWebDocumentHash,\n  isAnonymousForwardsChat,\n  isChatWithRepliesBot,\n  isDeletedUser,\n  isUserId,\n} from '../../global/helpers';\nimport { isApiPeerChat, isApiPeerUser } from '../../global/helpers/peers';\nimport buildClassName, { createClassNameBuilder } from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { getFirstLetters } from '../../util/textFormat';\nimport { REM } from './helpers/mediaDimensions';\nimport { getPeerColorClass } from './helpers/peerColor';\nimport renderText from './helpers/renderText';\n\nimport { useFastClick } from '../../hooks/useFastClick';\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useMedia from '../../hooks/useMedia';\nimport useMediaTransitionDeprecated from '../../hooks/useMediaTransitionDeprecated';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport OptimizedVideo from '../ui/OptimizedVideo';\nimport AvatarStoryCircle from './AvatarStoryCircle';\nimport Icon from './icons/Icon';\n\nimport './Avatar.scss';\n\nimport hexMask from '../../assets/hex.svg';\n\nconst LOOP_COUNT = 3;\n\nexport const AVATAR_SIZES = {\n  micro: REM,\n  mini: 1.5 * REM,\n  tiny: 2 * REM,\n  small: 2.125 * REM,\n  medium: 2.75 * REM,\n  large: 3.375 * REM,\n  xl: 4.5 * REM,\n  giant: 5.625 * REM,\n  jumbo: 7.5 * REM,\n};\n\nexport type AvatarSize = keyof typeof AVATAR_SIZES | number;\n\nconst cn = createClassNameBuilder('Avatar');\ncn.media = cn('media');\ncn.icon = cn('icon');\n\ntype OwnProps = {\n  className?: string;\n  size?: AvatarSize;\n  forceRoundedRect?: boolean;\n  peer?: ApiPeer | CustomPeer;\n  photo?: ApiPhoto;\n  webPhoto?: ApiWebDocument;\n  previewUrl?: string;\n  text?: string;\n  isSavedMessages?: boolean;\n  isSavedDialog?: boolean;\n  withVideo?: boolean;\n  withStory?: boolean;\n  forPremiumPromo?: boolean;\n  withStoryGap?: boolean;\n  withStorySolid?: boolean;\n  forceFriendStorySolid?: boolean;\n  forceUnreadStorySolid?: boolean;\n  storyViewerOrigin?: StoryViewerOrigin;\n  storyViewerMode?: 'full' | 'single-peer' | 'disabled';\n  loopIndefinitely?: boolean;\n  noPersonalPhoto?: boolean;\n  observeIntersection?: ObserveFn;\n  onClick?: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>, hasMedia: boolean) => void;\n  onContextMenu?: (e: React.MouseEvent) => void;\n};\n\nconst Avatar: FC<OwnProps> = ({\n  className,\n  size = 'large',\n  forceRoundedRect,\n  peer,\n  photo,\n  webPhoto,\n  previewUrl,\n  text,\n  isSavedMessages,\n  isSavedDialog,\n  withVideo,\n  withStory,\n  forPremiumPromo,\n  withStoryGap,\n  withStorySolid,\n  forceFriendStorySolid,\n  forceUnreadStorySolid,\n  storyViewerOrigin,\n  storyViewerMode = 'single-peer',\n  loopIndefinitely,\n  noPersonalPhoto,\n  onClick,\n  onContextMenu,\n}) => {\n  const { openStoryViewer } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  const videoLoopCountRef = useRef(0);\n  const isCustomPeer = peer && 'isCustomPeer' in peer;\n  const realPeer = peer && !isCustomPeer ? peer : undefined;\n  const user = realPeer && isApiPeerUser(realPeer) ? realPeer : undefined;\n  const chat = realPeer && isApiPeerChat(realPeer) ? realPeer : undefined;\n  const isDeleted = user && isDeletedUser(user);\n  const isReplies = realPeer && isChatWithRepliesBot(realPeer.id);\n  const isAnonymousForwards = realPeer && isAnonymousForwardsChat(realPeer.id);\n  const isForum = chat?.isForum;\n  let imageHash: string | undefined;\n  let videoHash: string | undefined;\n\n  const pxSize = typeof size === 'number' ? size : AVATAR_SIZES[size];\n\n  const shouldLoadVideo = withVideo && photo?.isVideo;\n\n  const isBig = pxSize >= AVATAR_SIZES.jumbo;\n  if (!isSavedMessages && !isDeleted) {\n    if ((user && !noPersonalPhoto) || chat) {\n      imageHash = getChatAvatarHash(peer as ApiPeer, isBig ? 'big' : undefined);\n    } else if (photo) {\n      imageHash = `photo${photo.id}?size=m`;\n      if (photo.isVideo && withVideo) {\n        videoHash = getVideoProfilePhotoMediaHash(photo);\n      }\n    } else if (webPhoto) {\n      imageHash = getWebDocumentHash(webPhoto);\n    }\n  }\n\n  const specialIcon = useMemo(() => {\n    if (isCustomPeer) {\n      return peer.avatarIcon;\n    }\n\n    if (isSavedMessages) {\n      return isSavedDialog ? 'my-notes' : 'avatar-saved-messages';\n    }\n\n    if (isDeleted) {\n      return 'avatar-deleted-account';\n    }\n\n    if (isReplies) {\n      return 'reply-filled';\n    }\n\n    if (isAnonymousForwards) {\n      return 'author-hidden';\n    }\n\n    return undefined;\n  }, [isCustomPeer, isSavedMessages, isDeleted, isReplies, isAnonymousForwards, peer, isSavedDialog]);\n\n  const imgBlobUrl = useMedia(imageHash, false, ApiMediaFormat.BlobUrl);\n  const videoBlobUrl = useMedia(videoHash, !shouldLoadVideo, ApiMediaFormat.BlobUrl);\n  const imgUrl = imgBlobUrl || previewUrl;\n  const hasBlobUrl = Boolean(imgUrl || videoBlobUrl);\n  // `videoBlobUrl` can be taken from memory cache, so we need to check `shouldLoadVideo` again\n  const shouldPlayVideo = Boolean(videoBlobUrl && shouldLoadVideo);\n\n  const transitionClassNames = useMediaTransitionDeprecated(hasBlobUrl);\n\n  const handleVideoEnded = useLastCallback((e) => {\n    const video = e.currentTarget;\n    if (!videoBlobUrl) return;\n\n    if (loopIndefinitely) return;\n\n    videoLoopCountRef.current += 1;\n    if (videoLoopCountRef.current >= LOOP_COUNT) {\n      video.style.display = 'none';\n    }\n  });\n\n  const lang = useOldLang();\n\n  let content: TeactNode | undefined;\n  const author = user ? getUserFullName(user) : (chat ? getChatTitle(lang, chat) : text);\n\n  if (specialIcon) {\n    content = (\n      <Icon\n        name={specialIcon}\n        className={cn.icon}\n        role=\"img\"\n        ariaLabel={author}\n      />\n    );\n  } else if (hasBlobUrl) {\n    content = (\n      <>\n        <img\n          src={imgUrl}\n          className={buildClassName(cn.media, 'avatar-media', transitionClassNames, videoBlobUrl && 'poster')}\n          alt={author}\n          decoding=\"async\"\n          draggable={false}\n        />\n        {shouldPlayVideo && (\n          <OptimizedVideo\n            canPlay\n            src={videoBlobUrl}\n            className={buildClassName(cn.media, 'avatar-media', 'poster')}\n            muted\n            loop={loopIndefinitely}\n            autoPlay\n            disablePictureInPicture\n            playsInline\n            draggable={false}\n            onEnded={handleVideoEnded}\n          />\n        )}\n      </>\n    );\n  } else if (user) {\n    const userFullName = getUserFullName(user);\n    content = userFullName ? getFirstLetters(userFullName, 2) : undefined;\n  } else if (chat) {\n    const title = getChatTitle(lang, chat);\n    content = title && getFirstLetters(title, isUserId(chat.id) ? 2 : 1);\n  } else if (isCustomPeer) {\n    const title = peer.title || lang(peer.titleKey!);\n    content = title && getFirstLetters(title, 1);\n  } else if (text) {\n    content = getFirstLetters(text, 2);\n  }\n\n  const isRoundedRect = forceRoundedRect || (isCustomPeer && peer.isAvatarSquare)\n  || (isForum && !((withStory || withStorySolid) && realPeer?.hasStories));\n\n  const isHexagonalRect = isForum;\n\n  const isPremiumGradient = isCustomPeer && peer.withPremiumGradient;\n  const customColor = isCustomPeer && peer.customPeerAvatarColor;\n\n  const fullClassName = buildClassName(\n    'Avatar',\n    className,\n    getPeerColorClass(peer),\n    !peer && text && 'hidden-user',\n    isSavedMessages && 'saved-messages',\n    isAnonymousForwards && 'anonymous-forwards',\n    isDeleted && 'deleted-account',\n    isReplies && 'replies-bot-account',\n    isPremiumGradient && 'premium-gradient-bg',\n    isRoundedRect && 'roundedRect',\n    isHexagonalRect && 'hex',\n    (photo || webPhoto) && 'force-fit',\n    ((withStory && realPeer?.hasStories) || forPremiumPromo) && 'with-story-circle',\n    withStorySolid && realPeer?.hasStories && 'with-story-solid',\n    withStorySolid && forceFriendStorySolid && 'close-friend',\n    withStorySolid && (realPeer?.hasUnreadStories || forceUnreadStorySolid) && 'has-unread-story',\n    onClick && 'interactive',\n    (!isSavedMessages && !imgUrl) && 'no-photo',\n  );\n\n  const fullStyle = buildStyle(\n    `--_size: ${pxSize}px;`,\n    customColor && `--color-user: ${customColor}`,\n    isHexagonalRect && `mask-image: url(${hexMask})`,\n  );\n\n  const hasMedia = Boolean(isSavedMessages || imgUrl);\n\n  const { handleClick, handleMouseDown } = useFastClick((e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (withStory && storyViewerMode !== 'disabled' && realPeer?.hasStories) {\n      e.stopPropagation();\n\n      openStoryViewer({\n        peerId: realPeer.id,\n        isSinglePeer: storyViewerMode === 'single-peer',\n        origin: storyViewerOrigin,\n      });\n      return;\n    }\n\n    if (onClick) {\n      onClick(e, hasMedia);\n    }\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={fullClassName}\n      id={realPeer?.id && withStory ? getPeerStoryHtmlId(realPeer.id) : undefined}\n      data-peer-id={realPeer?.id}\n      data-test-sender-id={IS_TEST ? realPeer?.id : undefined}\n      aria-label={typeof content === 'string' ? author : undefined}\n      style={fullStyle}\n      onClick={handleClick}\n      onContextMenu={onContextMenu}\n      onMouseDown={handleMouseDown}\n    >\n      <div className=\"inner\">\n        {typeof content === 'string' ? renderText(content, [isBig ? 'hq_emoji' : 'emoji']) : content}\n      </div>\n      {withStory && realPeer?.hasStories && (\n        <AvatarStoryCircle peerId={realPeer.id} size={pxSize} withExtraGap={withStoryGap} />\n      )}\n    </div>\n  );\n};\n\nexport default memo(Avatar);\n","import React, {\n  memo, useLayoutEffect, useMemo, useRef,\n} from '../../lib/teact/teact';\nimport { withGlobal } from '../../global';\n\nimport type { ApiTypeStory } from '../../api/types';\nimport type { ThemeKey } from '../../types';\n\nimport { selectPeerStories, selectTheme } from '../../global/selectors';\nimport buildClassName from '../../util/buildClassName';\nimport { REM } from './helpers/mediaDimensions';\n\nimport useDevicePixelRatio from '../../hooks/window/useDevicePixelRatio';\n\ninterface OwnProps {\n  // eslint-disable-next-line react/no-unused-prop-types\n  peerId: string;\n  className?: string;\n  size: number;\n  withExtraGap?: boolean;\n}\n\ninterface StateProps {\n  peerStories?: Record<number, ApiTypeStory>;\n  storyIds?: number[];\n  lastReadId?: number;\n  appTheme: ThemeKey;\n}\n\nconst BLUE = ['#34C578', '#3CA3F3'];\nconst GREEN = ['#C9EB38', '#09C167'];\nconst PURPLE = ['#A667FF', '#55A5FF'];\nconst GRAY = '#C4C9CC';\nconst DARK_GRAY = '#737373';\nconst STROKE_WIDTH = 0.125 * REM;\nconst STROKE_WIDTH_READ = 0.0625 * REM;\nconst GAP_PERCENT = 2;\nconst SEGMENTS_MAX = 45; // More than this breaks rendering in Safari and Chrome\nconst LARGE_AVATAR_SIZE = 3.5 * REM;\n\nconst GAP_PERCENT_EXTRA = 10;\nconst EXTRA_GAP_ANGLE = Math.PI / 4;\nconst EXTRA_GAP_SIZE = (GAP_PERCENT_EXTRA / 100) * (2 * Math.PI);\nconst EXTRA_GAP_START = EXTRA_GAP_ANGLE - EXTRA_GAP_SIZE / 2;\nconst EXTRA_GAP_END = EXTRA_GAP_ANGLE + EXTRA_GAP_SIZE / 2;\n\nfunction AvatarStoryCircle({\n  size,\n  className,\n  peerStories,\n  storyIds,\n  lastReadId,\n  withExtraGap,\n  appTheme,\n}: OwnProps & StateProps) {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLCanvasElement>(null);\n\n  const dpr = useDevicePixelRatio();\n\n  const adaptedSize = size + STROKE_WIDTH;\n\n  const values = useMemo(() => {\n    return (storyIds || []).reduce((acc, id) => {\n      acc.total += 1;\n      if (lastReadId && id <= lastReadId) {\n        acc.read += 1;\n      }\n\n      return acc;\n    }, { total: 0, read: 0 });\n  }, [lastReadId, storyIds]);\n\n  const isCloseFriend = useMemo(() => {\n    if (!peerStories || !storyIds?.length) {\n      return false;\n    }\n\n    return storyIds.some((id) => {\n      const story = peerStories[id];\n      if (!story || !('isForCloseFriends' in story)) {\n        return false;\n      }\n      const isRead = lastReadId && story.id <= lastReadId;\n      return story.isForCloseFriends && !isRead;\n    });\n  }, [lastReadId, peerStories, storyIds]);\n\n  useLayoutEffect(() => {\n    if (!ref.current) {\n      return;\n    }\n\n    drawGradientCircle({\n      canvas: ref.current,\n      size: adaptedSize * dpr,\n      segmentsCount: values.total,\n      color: isCloseFriend ? 'green' : 'blue',\n      readSegmentsCount: values.read,\n      withExtraGap,\n      readSegmentColor: appTheme === 'dark' ? DARK_GRAY : GRAY,\n      dpr,\n    });\n  }, [appTheme, isCloseFriend, adaptedSize, values.read, values.total, withExtraGap, dpr]);\n\n  if (!values.total) {\n    return undefined;\n  }\n\n  return (\n    <canvas\n      ref={ref}\n      className={buildClassName('story-circle', className)}\n      style={`max-width: ${adaptedSize}px; max-height: ${adaptedSize}px;`}\n    />\n  );\n}\n\nexport default memo(withGlobal<OwnProps>((global, { peerId }): StateProps => {\n  const peerStories = selectPeerStories(global, peerId);\n  const appTheme = selectTheme(global);\n\n  return {\n    peerStories: peerStories?.byId,\n    storyIds: peerStories?.orderedIds,\n    lastReadId: peerStories?.lastReadId,\n    appTheme,\n  };\n})(AvatarStoryCircle));\n\nexport function drawGradientCircle({\n  canvas,\n  size,\n  color,\n  segmentsCount,\n  readSegmentsCount = 0,\n  withExtraGap = false,\n  readSegmentColor,\n  dpr,\n}: {\n  canvas: HTMLCanvasElement;\n  size: number;\n  color: string;\n  segmentsCount: number;\n  readSegmentsCount?: number;\n  withExtraGap?: boolean;\n  readSegmentColor: string;\n  dpr: number;\n}) {\n  if (segmentsCount > SEGMENTS_MAX) {\n    readSegmentsCount = Math.round(readSegmentsCount * (SEGMENTS_MAX / segmentsCount));\n\n    segmentsCount = SEGMENTS_MAX;\n  }\n\n  const strokeModifier = Math.max(Math.max(size - LARGE_AVATAR_SIZE * dpr, 0) / dpr / REM / 1.5, 1) * dpr;\n\n  const ctx = canvas.getContext('2d');\n  if (!ctx) {\n    return;\n  }\n\n  canvas.width = size;\n  canvas.height = size;\n  const centerCoordinate = size / 2;\n  const radius = (size - STROKE_WIDTH * strokeModifier) / 2;\n  const segmentAngle = (2 * Math.PI) / segmentsCount;\n  const gapSize = (GAP_PERCENT / 100) * (2 * Math.PI);\n  const gradient = ctx.createLinearGradient(\n    0,\n    0,\n    Math.ceil(size * Math.cos(Math.PI / 2)),\n    Math.ceil(size * Math.sin(Math.PI / 2)),\n  );\n\n  const colorStops = color === 'purple' ? PURPLE : color === 'green' ? GREEN : BLUE;\n  colorStops.forEach((colorStop, index) => {\n    gradient.addColorStop(index / (colorStops.length - 1), colorStop);\n  });\n\n  ctx.lineCap = 'round';\n  ctx.clearRect(0, 0, size, size);\n\n  Array.from({ length: segmentsCount }).forEach((_, i) => {\n    const isRead = i < readSegmentsCount;\n    let startAngle = i * segmentAngle - Math.PI / 2 + gapSize / 2;\n    let endAngle = startAngle + segmentAngle - (segmentsCount > 1 ? gapSize : 0);\n\n    ctx.strokeStyle = isRead ? readSegmentColor : gradient;\n    ctx.lineWidth = (isRead ? STROKE_WIDTH_READ : STROKE_WIDTH) * strokeModifier;\n\n    if (withExtraGap) {\n      if (startAngle >= EXTRA_GAP_START && endAngle <= EXTRA_GAP_END) { // Segment is inside extra gap\n        return;\n      } else if (startAngle < EXTRA_GAP_START && endAngle > EXTRA_GAP_END) { // Extra gap is inside segment\n        ctx.beginPath();\n        ctx.arc(centerCoordinate, centerCoordinate, radius, EXTRA_GAP_END, endAngle);\n        ctx.stroke();\n\n        endAngle = EXTRA_GAP_START;\n      } else if (startAngle < EXTRA_GAP_START && endAngle > EXTRA_GAP_START) { // Segment ends in extra gap\n        endAngle = EXTRA_GAP_START;\n      } else if (startAngle < EXTRA_GAP_END && endAngle > EXTRA_GAP_END) { // Segment starts in extra gap\n        startAngle = EXTRA_GAP_END;\n      }\n    }\n\n    ctx.beginPath();\n    ctx.arc(centerCoordinate, centerCoordinate, radius, startAngle, endAngle);\n    ctx.stroke();\n  });\n}\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiFakeType } from '../../api/types';\n\nimport useOldLang from '../../hooks/useOldLang';\n\nimport './FakeIcon.scss';\n\ntype OwnProps = {\n  fakeType: ApiFakeType;\n};\n\nconst FakeIcon: FC<OwnProps> = ({\n  fakeType,\n}) => {\n  const lang = useOldLang();\n\n  return (\n    <span className=\"FakeIcon\">\n      {lang(fakeType === 'fake' ? 'FakeMessage' : 'ScamMessage')}\n    </span>\n  );\n};\n\nexport default memo(FakeIcon);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../lib/teact/teact';\nimport { getActions } from '../../global';\n\nimport type {\n  ApiPeer,\n} from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport type { CustomPeer } from '../../types';\n\nimport { EMOJI_STATUS_LOOP_LIMIT } from '../../config';\nimport {\n  getChatTitle,\n  getUserFullName,\n  isAnonymousForwardsChat,\n  isChatWithRepliesBot,\n  isChatWithVerificationCodesBot,\n} from '../../global/helpers';\nimport { isApiPeerUser } from '../../global/helpers/peers';\nimport buildClassName from '../../util/buildClassName';\nimport buildStyle from '../../util/buildStyle';\nimport { copyTextToClipboard } from '../../util/clipboard';\nimport stopEvent from '../../util/stopEvent';\nimport renderText from './helpers/renderText';\n\nimport useLastCallback from '../../hooks/useLastCallback';\nimport useOldLang from '../../hooks/useOldLang';\n\nimport Transition from '../ui/Transition';\nimport CustomEmoji from './CustomEmoji';\nimport FakeIcon from './FakeIcon';\nimport StarIcon from './icons/StarIcon';\nimport VerifiedIcon from './VerifiedIcon';\n\nimport styles from './FullNameTitle.module.scss';\n\ntype OwnProps = {\n  peer: ApiPeer | CustomPeer;\n  className?: string;\n  noVerified?: boolean;\n  noFake?: boolean;\n  withEmojiStatus?: boolean;\n  emojiStatusSize?: number;\n  isSavedMessages?: boolean;\n  isSavedDialog?: boolean;\n  noLoopLimit?: boolean;\n  canCopyTitle?: boolean;\n  iconElement?: React.ReactNode;\n  onEmojiStatusClick?: NoneToVoidFunction;\n  observeIntersection?: ObserveFn;\n  statusSparklesColor?: string;\n};\n\nconst FullNameTitle: FC<OwnProps> = ({\n  className,\n  peer,\n  noVerified,\n  noFake,\n  withEmojiStatus,\n  emojiStatusSize,\n  isSavedMessages,\n  isSavedDialog,\n  noLoopLimit,\n  canCopyTitle,\n  iconElement,\n  statusSparklesColor,\n  onEmojiStatusClick,\n  observeIntersection,\n}) => {\n  const lang = useOldLang();\n  const { showNotification } = getActions();\n  const realPeer = 'id' in peer ? peer : undefined;\n  const customPeer = 'isCustomPeer' in peer ? peer : undefined;\n  const isUser = realPeer && isApiPeerUser(realPeer);\n  const title = realPeer && (isUser ? getUserFullName(realPeer) : getChatTitle(lang, realPeer));\n  const isPremium = (isUser && realPeer.isPremium) || customPeer?.isPremium;\n  const canShowEmojiStatus = withEmojiStatus && !isSavedMessages;\n  const emojiStatus = realPeer?.emojiStatus\n    || (customPeer?.emojiStatusId ? { type: 'regular', documentId: customPeer.emojiStatusId } : undefined);\n\n  const handleTitleClick = useLastCallback((e) => {\n    if (!title || !canCopyTitle) {\n      return;\n    }\n\n    stopEvent(e);\n    copyTextToClipboard(title);\n    showNotification({ message: `${isUser ? 'User' : 'Chat'} name was copied` });\n  });\n\n  const specialTitle = useMemo(() => {\n    if (customPeer) {\n      return renderText(customPeer.title || lang(customPeer.titleKey!));\n    }\n\n    if (isSavedMessages) {\n      return lang(isSavedDialog ? 'MyNotes' : 'SavedMessages');\n    }\n\n    if (isAnonymousForwardsChat(realPeer!.id)) {\n      return lang('AnonymousForward');\n    }\n\n    if (isChatWithRepliesBot(realPeer!.id)) {\n      return lang('RepliesTitle');\n    }\n\n    if (isChatWithVerificationCodesBot(realPeer!.id)) {\n      return lang('VerifyCodesNotifications');\n    }\n\n    return undefined;\n  }, [customPeer, isSavedDialog, isSavedMessages, lang, realPeer]);\n  const botVerificationIconId = realPeer?.botVerificationIconId;\n\n  return (\n    <div className={buildClassName('title', styles.root, className)}>\n      {botVerificationIconId && (\n        <CustomEmoji\n          documentId={botVerificationIconId}\n          size={emojiStatusSize}\n          loopLimit={!noLoopLimit ? EMOJI_STATUS_LOOP_LIMIT : undefined}\n          observeIntersectionForLoading={observeIntersection}\n        />\n      )}\n      <h3\n        dir=\"auto\"\n        role=\"button\"\n        className={buildClassName(\n          'fullName',\n          styles.fullName,\n          canCopyTitle && styles.canCopy,\n        )}\n        onClick={handleTitleClick}\n      >\n        {specialTitle || renderText(title || '')}\n      </h3>\n      {!iconElement && peer && (\n        <>\n          {!noVerified && peer?.isVerified && <VerifiedIcon />}\n          {!noFake && peer?.fakeType && <FakeIcon fakeType={peer.fakeType} />}\n          {canShowEmojiStatus && emojiStatus && (\n            <Transition\n              className={styles.statusTransition}\n              slideClassName={styles.statusTransitionSlide}\n              activeKey={Number(emojiStatus.documentId)}\n              name=\"slideFade\"\n              direction={-1}\n              shouldCleanup\n            >\n              <CustomEmoji\n                forceAlways\n                className=\"no-selection\"\n                withSparkles={emojiStatus.type === 'collectible'}\n                sparklesClassName=\"statusSparkles\"\n                sparklesStyle={buildStyle(statusSparklesColor && `color: ${statusSparklesColor}`)}\n                documentId={emojiStatus.documentId}\n                size={emojiStatusSize}\n                loopLimit={!noLoopLimit ? EMOJI_STATUS_LOOP_LIMIT : undefined}\n                observeIntersectionForLoading={observeIntersection}\n                onClick={onEmojiStatusClick}\n              />\n            </Transition>\n          )}\n          {canShowEmojiStatus && !emojiStatus && isPremium && <StarIcon />}\n        </>\n      )}\n      {iconElement}\n    </div>\n  );\n};\n\nexport default memo(FullNameTitle);\n","import type { FC } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport './VerifiedIcon.scss';\n\nconst VerifiedIcon: FC = () => {\n  return (\n    <svg className=\"VerifiedIcon\" viewBox=\"0 0 24 24\">\n      <path d=\"M12.3 2.9c.1.1.2.1.3.2.7.6 1.3 1.1 2 1.7.3.2.6.4.9.4.9.1 1.7.2 2.6.2.5 0 .6.1.7.7.1.9.1 1.8.2 2.6 0 .4.2.7.4 1 .6.7 1.1 1.3 1.7 2 .3.4.3.5 0 .8-.5.6-1.1 1.3-1.6 1.9-.3.3-.5.7-.5 1.2-.1.8-.2 1.7-.2 2.5 0 .4-.2.5-.6.6-.8 0-1.6.1-2.5.2-.5 0-1 .2-1.4.5-.6.5-1.3 1.1-1.9 1.6-.3.3-.5.3-.8 0-.7-.6-1.4-1.2-2-1.8-.3-.2-.6-.4-.9-.4-.9-.1-1.8-.2-2.7-.2-.4 0-.5-.2-.6-.5 0-.9-.1-1.7-.2-2.6 0-.4-.2-.8-.4-1.1-.6-.6-1.1-1.3-1.6-2-.4-.4-.3-.5 0-1 .6-.6 1.1-1.3 1.7-1.9.3-.3.4-.6.4-1 0-.8.1-1.6.2-2.5 0-.5.1-.6.6-.6.9-.1 1.7-.1 2.6-.2.4 0 .7-.2 1-.4.7-.6 1.4-1.2 2.1-1.7.1-.2.3-.3.5-.2z\" style=\"fill: var(--color-fill)\" />\n      <path d=\"M16.4 10.1l-.2.2-5.4 5.4c-.1.1-.2.2-.4 0l-2.6-2.6c-.2-.2-.1-.3 0-.4.2-.2.5-.6.7-.6.3 0 .5.4.7.6l1.1 1.1c.2.2.3.2.5 0l4.3-4.3c.2-.2.4-.3.6 0 .1.2.3.3.4.5.2 0 .3.1.3.1z\" style=\"fill: var(--color-checkmark)\" />\n    </svg>\n  );\n};\n\nexport default VerifiedIcon;\n","import type { RefObject } from 'react';\nimport { useEffect, useState } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\n\nimport type { IAnchorPosition } from '../types';\nimport type { Signal } from '../util/signals';\n\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\nimport { IS_IOS, IS_PWA, IS_TOUCH_ENV } from '../util/browser/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\nconst LONG_TAP_DURATION_MS = 200;\nconst IOS_PWA_CONTEXT_MENU_DELAY_MS = 100;\n\nfunction stopEvent(e: Event) {\n  e.stopImmediatePropagation();\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nconst useContextMenuHandlers = (\n  elementRef: RefObject<HTMLElement>,\n  isMenuDisabled?: boolean,\n  shouldDisableOnLink?: boolean,\n  shouldDisableOnLongTap?: boolean,\n  getIsReady?: Signal<boolean>,\n  shouldDisablePropagation?: boolean,\n) => {\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false);\n  const [contextMenuAnchor, setContextMenuAnchor] = useState<IAnchorPosition | undefined>(undefined);\n  const [contextMenuTarget, setContextMenuTarget] = useState<HTMLElement | undefined>(undefined);\n\n  const handleBeforeContextMenu = useLastCallback((e: React.MouseEvent) => {\n    if (!isMenuDisabled && e.button === 2) {\n      requestMutation(() => {\n        addExtraClass(e.target as HTMLElement, 'no-selection');\n      });\n    }\n  });\n\n  const handleContextMenu = useLastCallback((e: React.MouseEvent) => {\n    requestMutation(() => {\n      removeExtraClass(e.target as HTMLElement, 'no-selection');\n    });\n\n    if (isMenuDisabled || (shouldDisableOnLink && (e.target as HTMLElement).matches('a[href]'))) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (contextMenuAnchor) {\n      return;\n    }\n\n    setIsContextMenuOpen(true);\n    setContextMenuAnchor({ x: e.clientX, y: e.clientY });\n    setContextMenuTarget(e.target as HTMLElement);\n  });\n\n  const handleContextMenuClose = useLastCallback(() => {\n    setIsContextMenuOpen(false);\n  });\n\n  const handleContextMenuHide = useLastCallback(() => {\n    setContextMenuAnchor(undefined);\n  });\n\n  // Support context menu on touch devices\n  useEffect(() => {\n    if (isMenuDisabled || !IS_TOUCH_ENV || shouldDisableOnLongTap || (getIsReady && !getIsReady())) {\n      return undefined;\n    }\n\n    const element = elementRef.current;\n    if (!element) {\n      return undefined;\n    }\n\n    let timer: number | undefined;\n\n    const clearLongPressTimer = () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = undefined;\n      }\n    };\n\n    const emulateContextMenuEvent = (originalEvent: TouchEvent) => {\n      clearLongPressTimer();\n\n      const { clientX, clientY, target } = originalEvent.touches[0];\n\n      if (contextMenuAnchor || (shouldDisableOnLink && (target as HTMLElement).matches('a[href]'))) {\n        return;\n      }\n\n      // Temporarily intercept and clear the next click\n      document.addEventListener('touchend', (e) => {\n        // On iOS in PWA mode, the context menu may cause click-through to the element in the menu upon opening\n        if (IS_IOS && IS_PWA) {\n          setTimeout(() => {\n            document.removeEventListener('mousedown', stopEvent, {\n              capture: true,\n            });\n            document.removeEventListener('click', stopEvent, {\n              capture: true,\n            });\n          }, IOS_PWA_CONTEXT_MENU_DELAY_MS);\n        }\n        stopEvent(e);\n      }, {\n        once: true,\n        capture: true,\n      });\n\n      // On iOS15, in PWA mode, the context menu immediately closes after opening\n      if (IS_PWA && IS_IOS) {\n        document.addEventListener('mousedown', stopEvent, {\n          once: true,\n          capture: true,\n        });\n        document.addEventListener('click', stopEvent, {\n          once: true,\n          capture: true,\n        });\n      }\n\n      setIsContextMenuOpen(true);\n      setContextMenuAnchor({ x: clientX, y: clientY });\n    };\n\n    const startLongPressTimer = (e: TouchEvent) => {\n      if (isMenuDisabled) {\n        return;\n      }\n      if (shouldDisablePropagation) e.stopPropagation();\n      clearLongPressTimer();\n\n      timer = window.setTimeout(() => emulateContextMenuEvent(e), LONG_TAP_DURATION_MS);\n    };\n\n    // @perf Consider event delegation\n    element.addEventListener('touchstart', startLongPressTimer, { passive: true });\n    element.addEventListener('touchcancel', clearLongPressTimer, true);\n    element.addEventListener('touchend', clearLongPressTimer, true);\n    element.addEventListener('touchmove', clearLongPressTimer, { passive: true });\n\n    return () => {\n      clearLongPressTimer();\n      element.removeEventListener('touchstart', startLongPressTimer);\n      element.removeEventListener('touchcancel', clearLongPressTimer, true);\n      element.removeEventListener('touchend', clearLongPressTimer, true);\n      element.removeEventListener('touchmove', clearLongPressTimer);\n    };\n  }, [\n    contextMenuAnchor, isMenuDisabled, shouldDisableOnLongTap, elementRef, shouldDisableOnLink, getIsReady,\n    shouldDisablePropagation,\n  ]);\n\n  return {\n    isContextMenuOpen,\n    contextMenuAnchor,\n    contextMenuTarget,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  };\n};\n\nexport default useContextMenuHandlers;\n","import type React from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV, MouseButton } from '../util/browser/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\ntype EventArg<E> = React.MouseEvent<E>;\ntype EventHandler<E> = (e: EventArg<E>) => void;\n\nexport function useFastClick<T extends HTMLDivElement | HTMLButtonElement>(callback?: EventHandler<T>) {\n  const handler = useLastCallback((e: EventArg<T>) => {\n    if (e.type === 'mousedown' && e.button !== MouseButton.Main) {\n      return;\n    }\n\n    callback!(e);\n  });\n\n  return IS_TOUCH_ENV\n    ? { handleClick: callback ? handler : undefined }\n    : { handleMouseDown: callback ? handler : undefined };\n}\n","import { useRef } from '../lib/teact/teact';\n\nimport { LoadMoreDirection } from '../types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\nimport useForceUpdate from './useForceUpdate';\nimport useLastCallback from './useLastCallback';\nimport usePreviousDeprecated from './usePreviousDeprecated';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n): [ListId[]?, GetMore?, number?] => {\n  const requestParamsRef = useRef<{\n    direction?: LoadMoreDirection;\n    offsetId?: ListId;\n  }>();\n\n  const currentStateRef = useRef<{ viewportIds: ListId[]; isOnTop: boolean; offset: number } | undefined>();\n  if (!currentStateRef.current && listIds && !isDisabled) {\n    const {\n      newViewportIds,\n      newIsOnTop,\n      fromOffset,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop, offset: fromOffset };\n  }\n\n  const forceUpdate = useForceUpdate();\n\n  if (isDisabled) {\n    requestParamsRef.current = {};\n  }\n\n  const prevListIds = usePreviousDeprecated(listIds);\n  const prevIsDisabled = usePreviousDeprecated(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { viewportIds, isOnTop } = currentStateRef.current || {};\n    const currentMiddleId = viewportIds && !isOnTop ? viewportIds[Math.round(viewportIds.length / 2)] : undefined;\n    const defaultOffsetId = currentMiddleId && listIds.includes(currentMiddleId) ? currentMiddleId : listIds[0];\n    const { offsetId = defaultOffsetId, direction = LoadMoreDirection.Forwards } = requestParamsRef.current || {};\n    const { newViewportIds, newIsOnTop, fromOffset } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    requestParamsRef.current = {};\n\n    if (!viewportIds || !areSortedArraysEqual(viewportIds, newViewportIds)) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop, offset: fromOffset };\n    }\n  } else if (!listIds) {\n    currentStateRef.current = undefined;\n  }\n\n  const getMore: GetMore = useLastCallback(({\n    direction,\n    noScroll,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    const { viewportIds } = currentStateRef.current || {};\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal, newIsOnTop, fromOffset,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop, offset: fromOffset };\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      if (!noScroll) {\n        requestParamsRef.current = { ...requestParamsRef.current, direction, offsetId };\n      }\n\n      loadMoreBackwards({ offsetId });\n    }\n  });\n\n  return isDisabled ? [listIds] : [currentStateRef.current?.viewportIds, getMore, currentStateRef.current?.offset];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection >= 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return {\n    newViewportIds,\n    areSomeLocal,\n    areAllLocal,\n    newIsOnTop: newViewportIds[0] === sourceIds[0],\n    fromOffset: from,\n  };\n}\n\nexport default useInfiniteScroll;\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable no-bitwise */\n/* eslint-disable no-multi-assign */\n/* eslint-disable no-cond-assign */\n/* eslint-disable no-param-reassign */\n/* eslint-disable prefer-const */\n/* eslint-disable eqeqeq */\n/* eslint-disable @typescript-eslint/naming-convention */\n\n/*\nSuperfast Blur - a fast Box Blur For Canvas\n\nVersion:     0.5\nAuthor:        Mario Klingemann\nContact:     mario@quasimondo.com\nWebsite:    http://www.quasimondo.com/BoxBlurForCanvas\nTwitter:    @quasimondo\n\nIn case you find this class useful - especially in commercial projects -\nI am not totally unhappy for a small donation to my PayPal account\nmario@quasimondo.de\n\nOr support me on flattr:\nhttps://flattr.com/thing/140066/Superfast-Blur-a-pretty-fast-Box-Blur-Effect-for-CanvasJavascript\n\nCopyright (c) 2011 Mario Klingemann\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// eslint-disable-next-line max-len\nconst mul_table = [1, 57, 41, 21, 203, 34, 97, 73, 227, 91, 149, 62, 105, 45, 39, 137, 241, 107, 3, 173, 39, 71, 65, 238, 219, 101, 187, 87, 81, 151, 141, 133, 249, 117, 221, 209, 197, 187, 177, 169, 5, 153, 73, 139, 133, 127, 243, 233, 223, 107, 103, 99, 191, 23, 177, 171, 165, 159, 77, 149, 9, 139, 135, 131, 253, 245, 119, 231, 224, 109, 211, 103, 25, 195, 189, 23, 45, 175, 171, 83, 81, 79, 155, 151, 147, 9, 141, 137, 67, 131, 129, 251, 123, 30, 235, 115, 113, 221, 217, 53, 13, 51, 50, 49, 193, 189, 185, 91, 179, 175, 43, 169, 83, 163, 5, 79, 155, 19, 75, 147, 145, 143, 35, 69, 17, 67, 33, 65, 255, 251, 247, 243, 239, 59, 29, 229, 113, 111, 219, 27, 213, 105, 207, 51, 201, 199, 49, 193, 191, 47, 93, 183, 181, 179, 11, 87, 43, 85, 167, 165, 163, 161, 159, 157, 155, 77, 19, 75, 37, 73, 145, 143, 141, 35, 138, 137, 135, 67, 33, 131, 129, 255, 63, 250, 247, 61, 121, 239, 237, 117, 29, 229, 227, 225, 111, 55, 109, 216, 213, 211, 209, 207, 205, 203, 201, 199, 197, 195, 193, 48, 190, 47, 93, 185, 183, 181, 179, 178, 176, 175, 173, 171, 85, 21, 167, 165, 41, 163, 161, 5, 79, 157, 78, 154, 153, 19, 75, 149, 74, 147, 73, 144, 143, 71, 141, 140, 139, 137, 17, 135, 134, 133, 66, 131, 65, 129, 1];\n// eslint-disable-next-line max-len\nconst shg_table = [0, 9, 10, 10, 14, 12, 14, 14, 16, 15, 16, 15, 16, 15, 15, 17, 18, 17, 12, 18, 16, 17, 17, 19, 19, 18, 19, 18, 18, 19, 19, 19, 20, 19, 20, 20, 20, 20, 20, 20, 15, 20, 19, 20, 20, 20, 21, 21, 21, 20, 20, 20, 21, 18, 21, 21, 21, 21, 20, 21, 17, 21, 21, 21, 22, 22, 21, 22, 22, 21, 22, 21, 19, 22, 22, 19, 20, 22, 22, 21, 21, 21, 22, 22, 22, 18, 22, 22, 21, 22, 22, 23, 22, 20, 23, 22, 22, 23, 23, 21, 19, 21, 21, 21, 23, 23, 23, 22, 23, 23, 21, 23, 22, 23, 18, 22, 23, 20, 22, 23, 23, 23, 21, 22, 20, 22, 21, 22, 24, 24, 24, 24, 24, 22, 21, 24, 23, 23, 24, 21, 24, 23, 24, 22, 24, 24, 22, 24, 24, 22, 23, 24, 24, 24, 20, 23, 22, 23, 24, 24, 24, 24, 24, 24, 24, 23, 21, 23, 22, 23, 24, 24, 24, 22, 24, 24, 24, 23, 22, 24, 24, 25, 23, 25, 25, 23, 24, 25, 25, 24, 22, 25, 25, 25, 24, 23, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 23, 25, 23, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 24, 22, 25, 25, 23, 25, 25, 20, 24, 25, 24, 25, 25, 22, 24, 25, 24, 25, 24, 25, 25, 24, 25, 25, 25, 25, 22, 25, 25, 25, 24, 25, 24, 25, 18];\n\nexport default function boxBlurCanvasRGB(context, top_x, top_y, width, height, radius, iterations) {\n  if (Number.isNaN(radius) || radius < 1) return;\n\n  radius |= 0;\n\n  if (Number.isNaN(iterations)) iterations = 1;\n  iterations |= 0;\n  if (iterations > 3) iterations = 3;\n  if (iterations < 1) iterations = 1;\n\n  const imageData = context.getImageData(top_x, top_y, width, height);\n\n  const pixels = imageData.data;\n\n  let rsum;\n  let gsum;\n  let bsum;\n  let x;\n  let y;\n  let i;\n  let p;\n  let p1;\n  let p2;\n  let yp;\n  let yi;\n  let yw;\n  let wm = width - 1;\n  let hm = height - 1;\n  let rad1 = radius + 1;\n\n  let r = [];\n  let g = [];\n  let b = [];\n\n  let mul_sum = mul_table[radius];\n  let shg_sum = shg_table[radius];\n\n  let vmin = [];\n  let vmax = [];\n\n  while (iterations-- > 0) {\n    yw = yi = 0;\n\n    for (y = 0; y < height; y++) {\n      rsum = pixels[yw] * rad1;\n      gsum = pixels[yw + 1] * rad1;\n      bsum = pixels[yw + 2] * rad1;\n\n      for (i = 1; i <= radius; i++) {\n        p = yw + (((i > wm ? wm : i)) << 2);\n        rsum += pixels[p++];\n        gsum += pixels[p++];\n        bsum += pixels[p++];\n      }\n\n      for (x = 0; x < width; x++) {\n        r[yi] = rsum;\n        g[yi] = gsum;\n        b[yi] = bsum;\n\n        if (y == 0) {\n          vmin[x] = ((p = x + rad1) < wm ? p : wm) << 2;\n          vmax[x] = ((p = x - radius) > 0 ? p << 2 : 0);\n        }\n\n        p1 = yw + vmin[x];\n        p2 = yw + vmax[x];\n\n        rsum += pixels[p1++] - pixels[p2++];\n        gsum += pixels[p1++] - pixels[p2++];\n        bsum += pixels[p1++] - pixels[p2++];\n\n        yi++;\n      }\n      yw += (width << 2);\n    }\n\n    for (x = 0; x < width; x++) {\n      yp = x;\n      rsum = r[yp] * rad1;\n      gsum = g[yp] * rad1;\n      bsum = b[yp] * rad1;\n\n      for (i = 1; i <= radius; i++) {\n        yp += (i > hm ? 0 : width);\n        rsum += r[yp];\n        gsum += g[yp];\n        bsum += b[yp];\n      }\n\n      yi = x << 2;\n      for (y = 0; y < height; y++) {\n        pixels[yi] = (rsum * mul_sum) >>> shg_sum;\n        pixels[yi + 1] = (gsum * mul_sum) >>> shg_sum;\n        pixels[yi + 2] = (bsum * mul_sum) >>> shg_sum;\n\n        if (x == 0) {\n          vmin[y] = ((p = y + rad1) < hm ? p : hm) * width;\n          vmax[y] = ((p = y - radius) > 0 ? p * width : 0);\n        }\n\n        p1 = x + vmin[y];\n        p2 = x + vmax[y];\n\n        rsum += r[p1] - r[p2];\n        gsum += g[p1] - g[p2];\n        bsum += b[p1] - b[p2];\n\n        yi += width << 2;\n      }\n    }\n  }\n\n  context.putImageData(imageData, top_x, top_y);\n}\n","import { IS_IOS } from './browser/windowEnvironment';\nimport forceReflow from './forceReflow';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\nexport function stopScrollInertia(element: HTMLElement) {\n  element.style.display = 'none';\n  forceReflow(element);\n  element.style.display = '';\n}\n\nexport default resetScroll;\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"FullNameTitle-module__root\",\"statusTransition\":\"FullNameTitle-module__statusTransition\",\"fullName\":\"FullNameTitle-module__fullName\",\"canCopy\":\"FullNameTitle-module__canCopy\",\"statusTransitionSlide\":\"FullNameTitle-module__statusTransitionSlide\"};","// extracted by mini-css-extract-plugin\nexport {};"],"names":["React","memo","useMemo","useRef","getActions","ApiMediaFormat","IS_TEST","getChatAvatarHash","getChatTitle","getPeerStoryHtmlId","getUserFullName","getVideoProfilePhotoMediaHash","getWebDocumentHash","isAnonymousForwardsChat","isChatWithRepliesBot","isDeletedUser","isUserId","isApiPeerChat","isApiPeerUser","buildClassName","createClassNameBuilder","buildStyle","getFirstLetters","REM","getPeerColorClass","renderText","useFastClick","useLastCallback","useMedia","useMediaTransitionDeprecated","useOldLang","OptimizedVideo","AvatarStoryCircle","Icon","hexMask","LOOP_COUNT","AVATAR_SIZES","micro","mini","tiny","small","medium","large","xl","giant","jumbo","cn","media","icon","Avatar","className","size","forceRoundedRect","peer","photo","webPhoto","previewUrl","text","isSavedMessages","isSavedDialog","withVideo","withStory","forPremiumPromo","withStoryGap","withStorySolid","forceFriendStorySolid","forceUnreadStorySolid","storyViewerOrigin","storyViewerMode","loopIndefinitely","noPersonalPhoto","onClick","onContextMenu","openStoryViewer","ref","videoLoopCountRef","isCustomPeer","realPeer","undefined","user","chat","isDeleted","isReplies","id","isAnonymousForwards","isForum","imageHash","videoHash","pxSize","shouldLoadVideo","isVideo","isBig","specialIcon","avatarIcon","imgBlobUrl","BlobUrl","videoBlobUrl","imgUrl","hasBlobUrl","Boolean","shouldPlayVideo","transitionClassNames","handleVideoEnded","e","video","currentTarget","current","style","display","lang","content","author","createElement","name","role","ariaLabel","Fragment","src","alt","decoding","draggable","canPlay","muted","loop","autoPlay","disablePictureInPicture","playsInline","onEnded","userFullName","title","titleKey","isRoundedRect","isAvatarSquare","hasStories","isHexagonalRect","isPremiumGradient","withPremiumGradient","customColor","customPeerAvatarColor","fullClassName","hasUnreadStories","fullStyle","hasMedia","handleClick","handleMouseDown","stopPropagation","peerId","isSinglePeer","origin","onMouseDown","withExtraGap","useLayoutEffect","withGlobal","selectPeerStories","selectTheme","useDevicePixelRatio","BLUE","GREEN","PURPLE","GRAY","DARK_GRAY","STROKE_WIDTH","STROKE_WIDTH_READ","GAP_PERCENT","SEGMENTS_MAX","LARGE_AVATAR_SIZE","GAP_PERCENT_EXTRA","EXTRA_GAP_ANGLE","Math","PI","EXTRA_GAP_SIZE","EXTRA_GAP_START","EXTRA_GAP_END","peerStories","storyIds","lastReadId","appTheme","dpr","adaptedSize","values","reduce","acc","total","read","isCloseFriend","length","some","story","isRead","isForCloseFriends","drawGradientCircle","canvas","segmentsCount","color","readSegmentsCount","readSegmentColor","global","byId","orderedIds","round","strokeModifier","max","ctx","getContext","width","height","centerCoordinate","radius","segmentAngle","gapSize","gradient","createLinearGradient","ceil","cos","sin","colorStops","forEach","colorStop","index","addColorStop","lineCap","clearRect","Array","from","_","i","startAngle","endAngle","strokeStyle","lineWidth","beginPath","arc","stroke","FakeIcon","fakeType","EMOJI_STATUS_LOOP_LIMIT","isChatWithVerificationCodesBot","copyTextToClipboard","stopEvent","Transition","CustomEmoji","StarIcon","VerifiedIcon","styles","FullNameTitle","noVerified","noFake","withEmojiStatus","emojiStatusSize","noLoopLimit","canCopyTitle","iconElement","statusSparklesColor","onEmojiStatusClick","observeIntersection","showNotification","customPeer","isUser","isPremium","canShowEmojiStatus","emojiStatus","emojiStatusId","type","documentId","handleTitleClick","message","specialTitle","botVerificationIconId","root","loopLimit","observeIntersectionForLoading","dir","fullName","canCopy","isVerified","statusTransition","slideClassName","statusTransitionSlide","activeKey","Number","direction","shouldCleanup","forceAlways","withSparkles","sparklesClassName","sparklesStyle","viewBox","d","useEffect","useState","addExtraClass","removeExtraClass","requestMutation","IS_IOS","IS_PWA","IS_TOUCH_ENV","LONG_TAP_DURATION_MS","IOS_PWA_CONTEXT_MENU_DELAY_MS","stopImmediatePropagation","preventDefault","useContextMenuHandlers","elementRef","isMenuDisabled","shouldDisableOnLink","shouldDisableOnLongTap","getIsReady","shouldDisablePropagation","isContextMenuOpen","setIsContextMenuOpen","contextMenuAnchor","setContextMenuAnchor","contextMenuTarget","setContextMenuTarget","handleBeforeContextMenu","button","target","handleContextMenu","matches","x","clientX","y","clientY","handleContextMenuClose","handleContextMenuHide","element","timer","clearLongPressTimer","clearTimeout","emulateContextMenuEvent","originalEvent","touches","document","addEventListener","setTimeout","removeEventListener","capture","once","startLongPressTimer","window","passive","MouseButton","callback","handler","Main","LoadMoreDirection","areSortedArraysEqual","useForceUpdate","usePreviousDeprecated","DEFAULT_LIST_SLICE","useInfiniteScroll","loadMoreBackwards","listIds","isDisabled","listSlice","requestParamsRef","currentStateRef","newViewportIds","newIsOnTop","fromOffset","getViewportSlice","Forwards","viewportIds","isOnTop","offset","forceUpdate","prevListIds","prevIsDisabled","currentMiddleId","defaultOffsetId","includes","offsetId","getMore","noScroll","Backwards","areSomeLocal","areAllLocal","sourceIds","indexOf","isForwards","indexForDirection","to","slice","mul_table","shg_table","boxBlurCanvasRGB","context","top_x","top_y","iterations","isNaN","imageData","getImageData","pixels","data","rsum","gsum","bsum","p","p1","p2","yp","yi","yw","wm","hm","rad1","r","g","b","mul_sum","shg_sum","vmin","vmax","putImageData","forceReflow","resetScroll","container","scrollTop","overflow","stopScrollInertia"],"sourceRoot":""}