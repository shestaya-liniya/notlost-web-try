{"version":3,"file":"BundleStars.e2ea0cf9d97bea99554c.js","mappings":"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","sources":["webpack://telegram-t/./src/bundles/stars.ts","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.tsx","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftComposer.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemPremium.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemStar.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.tsx","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.tsx","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.tsx","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.tsx","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/transfer/GiftTransferModal.tsx","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.tsx","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.tsx","webpack://telegram-t/./src/components/modals/stars/BalanceBlock.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsPaymentModal.tsx","webpack://telegram-t/./src/components/modals/stars/chatRefund/ChatRefundModal.tsx","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.tsx","webpack://telegram-t/./src/components/modals/stars/helpers/transaction.ts","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.tsx","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.tsx","webpack://telegram-t/./src/hooks/animations/useTransitionActiveKey.ts","webpack://telegram-t/./src/hooks/useDebouncedMemo.ts","webpack://telegram-t/./src/hooks/usePeerSearch.ts","webpack://telegram-t/./src/components/common/gift/GiftTransferPreview.module.scss?0f0d","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.module.scss?3156","webpack://telegram-t/./src/components/modals/gift/GiftComposer.module.scss?dac8","webpack://telegram-t/./src/components/modals/gift/GiftItem.module.scss?c564","webpack://telegram-t/./src/components/modals/gift/GiftModal.module.scss?fd13","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.module.scss?7d19","webpack://telegram-t/./src/components/modals/gift/UniqueGiftHeader.module.scss?2bf6","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.module.scss?4f0e","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.module.scss?b7e9","webpack://telegram-t/./src/components/modals/gift/resale/GiftResalePriceComposerModal.module.scss?6666","webpack://telegram-t/./src/components/modals/gift/status/GiftStatusInfoModal.module.scss?3366","webpack://telegram-t/./src/components/modals/gift/upgrade/GiftUpgradeModal.module.scss?ae9e","webpack://telegram-t/./src/components/modals/gift/withdraw/GiftWithdrawModal.module.scss?287b","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.module.scss?80b2","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.module.scss?b8f3","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.module.scss?bbd4","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.module.scss?069e","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.module.scss?74b5","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.module.scss?5025","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.module.scss?605d","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.module.scss?b947","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.module.scss?a215"],"sourcesContent":["export { default as StarsGiftModal } from '../components/modals/stars/gift/StarsGiftModal';\nexport { default as StarsGiftingPickerModal } from '../components/main/premium/StarsGiftingPickerModal';\nexport { default as StarsBalanceModal } from '../components/modals/stars/StarsBalanceModal';\nexport { default as StarPaymentModal } from '../components/modals/stars/StarsPaymentModal';\nexport { default as StarsTransactionInfoModal } from '../components/modals/stars/transaction/StarsTransactionModal';\nexport { default as StarsSubscriptionModal } from '../components/modals/stars/subscription/StarsSubscriptionModal';\nexport { default as PaidReactionModal } from '../components/modals/paidReaction/PaidReactionModal';\nexport { default as GiftModal } from '../components/modals/gift/GiftModal';\nexport { default as GiftRecipientPicker } from '../components/modals/gift/recipient/GiftRecipientPicker';\nexport { default as GiftInfoModal } from '../components/modals/gift/info/GiftInfoModal';\nexport { default as GiftResalePriceComposerModal } from '../components/modals/gift/resale/GiftResalePriceComposerModal';\nexport { default as GiftUpgradeModal } from '../components/modals/gift/upgrade/GiftUpgradeModal';\nexport { default as GiftStatusInfoModal } from '../components/modals/gift/status/GiftStatusInfoModal';\nexport { default as GiftWithdrawModal } from '../components/modals/gift/withdraw/GiftWithdrawModal';\nexport { default as GiftTransferModal } from '../components/modals/gift/transfer/GiftTransferModal';\nexport { default as ChatRefundModal } from '../components/modals/stars/chatRefund/ChatRefundModal';\n","import React, { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type {\n  ApiPeer, ApiStarGiftUnique,\n} from '../../../api/types';\n\nimport { getGiftAttributes } from '../helpers/gifts';\nimport { REM } from '../helpers/mediaDimensions';\n\nimport AnimatedIconFromSticker from '../AnimatedIconFromSticker';\nimport Avatar from '../Avatar';\nimport Icon from '../icons/Icon';\nimport RadialPatternBackground from '../profile/RadialPatternBackground';\n\nimport styles from './GiftTransferPreview.module.scss';\n\ntype OwnProps = {\n  peer: ApiPeer;\n  gift: ApiStarGiftUnique;\n};\n\nconst AVATAR_SIZE = 4 * REM;\nconst GIFT_STICKER_SIZE = 3 * REM;\n\nconst GiftTransferPreview = ({\n  peer,\n  gift,\n}: OwnProps) => {\n  const giftAttributes = useMemo(() => {\n    return getGiftAttributes(gift);\n  }, [gift]);\n\n  if (!giftAttributes) return undefined;\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.giftPreview}>\n        <RadialPatternBackground\n          className={styles.backdrop}\n          backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n          patternColor={giftAttributes.backdrop?.patternColor}\n          patternIcon={giftAttributes.pattern?.sticker}\n        />\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          size={GIFT_STICKER_SIZE}\n          sticker={giftAttributes.model?.sticker}\n        />\n      </div>\n      <Icon name=\"next\" className={styles.arrow} />\n      <Avatar\n        peer={peer}\n        size={AVATAR_SIZE}\n        className={styles.avatar}\n      />\n    </div>\n  );\n};\n\nexport default memo(GiftTransferPreview);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  isDeletedUser, isUserBot,\n} from '../../../global/helpers';\nimport { filterPeersByQuery } from '../../../global/helpers/peers';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PeerPicker from '../../common/pickers/PeerPicker';\nimport PickerModal from '../../common/pickers/PickerModal';\n\nimport styles from './StarsGiftingPickerModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n  activeListIds?: string[];\n  archivedListIds?: string[];\n}\n\nconst StarsGiftingPickerModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  activeListIds,\n  archivedListIds,\n  userIds,\n}) => {\n  const { closeStarsGiftingPickerModal, openStarsGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const combinedIds = unique([\n      ...(userIds || []),\n      ...(activeListIds || []),\n      ...(archivedListIds || []),\n    ]);\n\n    const filteredUserIds = filterPeersByQuery({\n      ids: combinedIds, query: searchQuery, type: 'user',\n    });\n\n    return sortChatIds(filteredUserIds.filter((id) => {\n      const user = usersById[id];\n\n      if (!user) {\n        return false;\n      }\n\n      return !user.isSupport\n        && !isUserBot(user) && !isDeletedUser(user)\n        && id !== currentUserId && id !== SERVICE_NOTIFICATIONS_USER_ID;\n    }));\n  }, [currentUserId, searchQuery, userIds, activeListIds, archivedListIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((newSelectedId?: string) => {\n    if (newSelectedId?.length) {\n      openStarsGiftModal({ forUserId: newSelectedId });\n      closeStarsGiftingPickerModal();\n    }\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeStarsGiftingPickerModal}\n      title={oldLang('GiftStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      confirmButtonText={oldLang('Continue')}\n      onEnter={closeStarsGiftingPickerModal}\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        onSelectedIdChange={handleSelectedUserIdsChange}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    chats: {\n      listIds,\n    },\n    currentUserId,\n  } = global;\n\n  return {\n    userIds: global.contactList?.userIds,\n    activeListIds: listIds.active,\n    archivedListIds: listIds.archived,\n    currentUserId,\n  };\n})(StarsGiftingPickerModal));\n","import type { ChangeEvent } from 'react';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ThemeKey } from '../../../types';\nimport type { GiftOption } from './GiftModal';\nimport {\n  type ApiMessage, type ApiPeer, type ApiStarsAmount, MAIN_THREAD_ID,\n} from '../../../api/types';\n\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectPeer, selectPeerPaidMessagesStars, selectTabState, selectTheme, selectThemeValues, selectUserFullInfo,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useCustomBackground from '../../../hooks/useCustomBackground';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport ActionMessage from '../../middle/message/ActionMessage';\nimport Button from '../../ui/Button';\nimport Link from '../../ui/Link';\nimport ListItem from '../../ui/ListItem';\nimport Switcher from '../../ui/Switcher';\nimport TextArea from '../../ui/TextArea';\n\nimport styles from './GiftComposer.module.scss';\n\nexport type OwnProps = {\n  gift: GiftOption;\n  giftByStars?: GiftOption;\n  peerId: string;\n};\n\nexport type StateProps = {\n  captionLimit?: number;\n  theme: ThemeKey;\n  isBackgroundBlurred?: boolean;\n  patternColor?: string;\n  customBackground?: string;\n  backgroundColor?: string;\n  peer?: ApiPeer;\n  currentUserId?: string;\n  isPaymentFormLoading?: boolean;\n  starBalance?: ApiStarsAmount;\n  paidMessagesStars?: number;\n  areUniqueStarGiftsDisallowed?: boolean;\n  shouldDisallowLimitedStarGifts?: boolean;\n};\n\nconst LIMIT_DISPLAY_THRESHOLD = 50;\n\nfunction GiftComposer({\n  gift,\n  giftByStars,\n  peerId,\n  peer,\n  captionLimit,\n  theme,\n  isBackgroundBlurred,\n  patternColor,\n  backgroundColor,\n  customBackground,\n  currentUserId,\n  isPaymentFormLoading,\n  starBalance,\n  paidMessagesStars,\n  areUniqueStarGiftsDisallowed,\n  shouldDisallowLimitedStarGifts,\n}: OwnProps & StateProps) {\n  const {\n    sendStarGift, sendPremiumGiftByStars, openInvoice, openGiftUpgradeModal, openStarsBalanceModal,\n  } = getActions();\n\n  const lang = useLang();\n\n  const [giftMessage, setGiftMessage] = useState<string>('');\n  const [shouldHideName, setShouldHideName] = useState<boolean>(false);\n  const [shouldPayForUpgrade, setShouldPayForUpgrade] = useState<boolean>(false);\n  const [shouldPayByStars, setShouldPayByStars] = useState<boolean>(false);\n\n  const customBackgroundValue = useCustomBackground(theme, customBackground);\n\n  useEffect(() => {\n    if (shouldDisallowLimitedStarGifts) {\n      setShouldPayForUpgrade(true);\n    }\n  }, [shouldDisallowLimitedStarGifts, shouldPayForUpgrade]);\n\n  const isStarGift = 'id' in gift;\n  const hasPremiumByStars = giftByStars && 'amount' in giftByStars;\n  const isPeerUser = peer && isApiPeerUser(peer);\n  const isSelf = peerId === currentUserId;\n\n  const localMessage = useMemo(() => {\n    if (!isStarGift) {\n      const currentGift = shouldPayByStars && hasPremiumByStars ? giftByStars : gift;\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: false,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            mediaType: 'action',\n            type: 'giftPremium',\n            amount: currentGift.amount,\n            currency: currentGift.currency,\n            months: gift.months,\n            message: giftMessage ? { text: giftMessage } : undefined,\n          },\n        },\n      } satisfies ApiMessage;\n    }\n\n    return {\n      id: -1,\n      chatId: '0',\n      isOutgoing: false,\n      senderId: currentUserId,\n      date: Math.floor(Date.now() / 1000),\n      content: {\n        action: {\n          mediaType: 'action',\n          type: 'starGift',\n          message: giftMessage?.length ? {\n            text: giftMessage,\n          } : undefined,\n          isNameHidden: shouldHideName || undefined,\n          starsToConvert: gift.starsToConvert,\n          canUpgrade: shouldPayForUpgrade || undefined,\n          alreadyPaidUpgradeStars: shouldPayForUpgrade ? gift.upgradeStars : undefined,\n          gift,\n          peerId,\n          fromId: currentUserId,\n        },\n      },\n    } satisfies ApiMessage;\n  }, [currentUserId, gift, giftMessage, isStarGift,\n    shouldHideName, shouldPayForUpgrade, peerId,\n    shouldPayByStars, hasPremiumByStars, giftByStars]);\n\n  const handleGiftMessageChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setGiftMessage(e.target.value);\n  });\n\n  const handleShouldHideNameChange = useLastCallback(() => {\n    setShouldHideName(!shouldHideName);\n  });\n\n  const handleShouldPayForUpgradeChange = useLastCallback(() => {\n    setShouldPayForUpgrade(!shouldPayForUpgrade);\n  });\n\n  const toggleShouldPayByStars = useLastCallback(() => {\n    if (hasPremiumByStars) setShouldPayByStars(!shouldPayByStars);\n  });\n\n  const handleOpenUpgradePreview = useLastCallback(() => {\n    if (!isStarGift) return;\n    openGiftUpgradeModal({\n      giftId: gift.id,\n      peerId,\n    });\n  });\n\n  const handleGetMoreStars = useLastCallback(() => {\n    openStarsBalanceModal({});\n  });\n\n  const handleMainButtonClick = useLastCallback(() => {\n    if (isStarGift) {\n      sendStarGift({\n        peerId,\n        shouldHideName,\n        gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n        shouldUpgrade: shouldPayForUpgrade,\n      });\n      return;\n    }\n\n    if (shouldPayByStars && hasPremiumByStars) {\n      sendPremiumGiftByStars({\n        userId: peerId,\n        months: giftByStars.months,\n        amount: giftByStars.amount,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n      return;\n    }\n\n    openInvoice({\n      type: 'giftcode',\n      userIds: [peerId],\n      currency: gift.currency,\n      amount: gift.amount,\n      option: gift,\n      message: giftMessage ? { text: giftMessage } : undefined,\n    });\n  });\n\n  const canUseStarsPayment = hasPremiumByStars && starBalance && (starBalance.amount > giftByStars.amount);\n  function renderOptionsSection() {\n    const symbolsLeft = captionLimit ? captionLimit - giftMessage.length : undefined;\n\n    const title = getPeerTitle(lang, peer!)!;\n    return (\n      <div className={styles.optionsSection}>\n\n        {!paidMessagesStars && (\n          <TextArea\n            className={styles.messageInput}\n            onChange={handleGiftMessageChange}\n            value={giftMessage}\n            label={lang('GiftMessagePlaceholder')}\n            maxLength={captionLimit}\n            maxLengthIndicator={\n              symbolsLeft && symbolsLeft < LIMIT_DISPLAY_THRESHOLD ? symbolsLeft.toString() : undefined\n            }\n          />\n        )}\n\n        {canUseStarsPayment && (\n          <ListItem className={styles.switcher} narrow ripple onClick={toggleShouldPayByStars}>\n            <span>\n              {lang('GiftPremiumPayWithStars', {\n                stars: formatStarsAsIcon(lang, giftByStars.amount, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayByStars}\n              onChange={toggleShouldPayByStars}\n              label={lang('GiftPremiumPayWithStarsAcc')}\n            />\n          </ListItem>\n        )}\n\n        {hasPremiumByStars && starBalance && (\n          <div className={styles.description}>\n            {lang('GiftPremiumDescriptionYourBalance', {\n              stars: formatStarsAsIcon(lang, starBalance.amount, { className: styles.switcherStarIcon }),\n              link: <Link isPrimary onClick={handleGetMoreStars}>{lang('GetMoreStarsLinkText')}</Link>,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n        )}\n\n        {isStarGift && gift.upgradeStars && !areUniqueStarGiftsDisallowed && (\n          <ListItem\n            className={styles.switcher}\n            narrow\n            ripple\n            onClick={handleShouldPayForUpgradeChange}\n            disabled={shouldDisallowLimitedStarGifts}\n          >\n            <span>\n              {lang('GiftMakeUnique', {\n                stars: formatStarsAsIcon(lang, gift.upgradeStars, { className: styles.switcherStarIcon }),\n              }, { withNodes: true })}\n            </span>\n            <Switcher\n              checked={shouldPayForUpgrade}\n              onChange={handleShouldPayForUpgradeChange}\n              label={lang('GiftMakeUniqueAcc')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && gift.upgradeStars && !areUniqueStarGiftsDisallowed && (\n          <div className={styles.description}>\n            {isPeerUser\n              ? lang('GiftMakeUniqueDescription', {\n                user: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })\n              : lang('GiftMakeUniqueDescriptionChannel', {\n                peer: title,\n                link: <Link isPrimary onClick={handleOpenUpgradePreview}>{lang('GiftMakeUniqueLink')}</Link>,\n              }, {\n                withNodes: true,\n              })}\n          </div>\n        )}\n\n        {isStarGift && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldHideNameChange}>\n            <span>{lang('GiftHideMyName')}</span>\n            <Switcher\n              checked={shouldHideName}\n              onChange={handleShouldHideNameChange}\n              label={lang('GiftHideMyName')}\n            />\n          </ListItem>\n        )}\n        {isStarGift && (\n          <div className={styles.description}>\n            {isSelf ? lang('GiftHideNameDescriptionSelf')\n              : isPeerUser ? lang('GiftHideNameDescription', { receiver: title })\n                : lang('GiftHideNameDescriptionChannel')}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const amount = shouldPayByStars && hasPremiumByStars\n      ? formatStarsAsIcon(lang, giftByStars.amount, { asFont: true })\n      : isStarGift\n        ? formatStarsAsIcon(lang, gift.stars + (shouldPayForUpgrade ? gift.upgradeStars! : 0), { asFont: true })\n        : formatCurrency(lang, gift.amount, gift.currency);\n\n    return (\n      <div className={styles.footer}>\n        {isStarGift && gift.availabilityRemains && (\n          <PremiumProgress\n            isPrimary\n            progress={gift.availabilityRemains / gift.availabilityTotal!}\n            rightText={lang('GiftSoldCount', {\n              count: gift.availabilityTotal! - gift.availabilityRemains,\n            })}\n            leftText={lang('GiftLeftCount', { count: gift.availabilityRemains })}\n            className={styles.limited}\n          />\n        )}\n        <Button\n          className={styles.mainButton}\n          size=\"smaller\"\n          onClick={handleMainButtonClick}\n          isLoading={isPaymentFormLoading}\n        >\n          {lang('GiftSend', {\n            amount,\n          }, {\n            withNodes: true,\n          })}\n        </Button>\n      </div>\n    );\n  }\n\n  const bgClassName = buildClassName(\n    styles.background,\n    styles.withTransition,\n    customBackground && styles.customBgImage,\n    backgroundColor && styles.customBgColor,\n    customBackground && isBackgroundBlurred && styles.blurred,\n  );\n\n  return (\n    <div className={buildClassName(styles.root, 'custom-scroll')}>\n      <div\n        className={buildClassName(styles.actionMessageView, 'MessageList')}\n        // @ts-ignore -- FIXME: Find a way to disable interactions but keep a11y\n        inert\n        style={buildStyle(\n          `--pattern-color: ${patternColor}`,\n          backgroundColor && `--theme-background-color: ${backgroundColor}`,\n        )}\n      >\n        <div\n          className={bgClassName}\n          style={customBackgroundValue ? `--custom-background: ${customBackgroundValue}` : undefined}\n        />\n        <ActionMessage\n          key={isStarGift ? gift.id : gift.months}\n          message={localMessage}\n          threadId={MAIN_THREAD_ID}\n          appearanceOrder={0}\n        />\n      </div>\n      {renderOptionsSection()}\n      <div className={styles.spacer} />\n      {renderFooter()}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { peerId }): StateProps => {\n    const theme = selectTheme(global);\n    const {\n      stars,\n    } = global;\n    const {\n      isBlurred: isBackgroundBlurred,\n      patternColor,\n      background: customBackground,\n      backgroundColor,\n    } = selectThemeValues(global, theme) || {};\n    const peer = selectPeer(global, peerId);\n    const paidMessagesStars = selectPeerPaidMessagesStars(global, peerId);\n    const userFullInfo = selectUserFullInfo(global, peerId);\n    const currentUserId = global.currentUserId;\n    const isGiftForSelf = currentUserId === peerId;\n    const areUniqueStarGiftsDisallowed = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowUniqueStarGifts;\n    const shouldDisallowLimitedStarGifts = !isGiftForSelf\n      && userFullInfo?.disallowedGifts?.shouldDisallowLimitedStarGifts;\n\n    const tabState = selectTabState(global);\n\n    return {\n      starBalance: stars?.balance,\n      peer,\n      theme,\n      isBackgroundBlurred,\n      patternColor,\n      customBackground,\n      backgroundColor,\n      captionLimit: global.appConfig?.starGiftMaxMessageLength,\n      currentUserId: global.currentUserId,\n      isPaymentFormLoading: tabState.isPaymentFormLoading,\n      paidMessagesStars,\n      areUniqueStarGiftsDisallowed,\n      shouldDisallowLimitedStarGifts,\n    };\n  },\n)(GiftComposer));\n","import React, { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n  ApiSticker,\n} from '../../../api/types';\n\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForDuration,\n} from '../../../global/selectors';\nimport { formatCurrencyAsString } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  option: ApiPremiumGiftCodeOption;\n  optionByStars?: ApiPremiumGiftCodeOption;\n  baseMonthAmount?: number;\n  onClick: (gift: ApiPremiumGiftCodeOption) => void;\n};\n\nexport type StateProps = {\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 86;\n\nfunction GiftItemPremium({\n  sticker, canPlayAnimatedEmojis, baseMonthAmount, option, optionByStars, onClick,\n}: OwnProps & StateProps) {\n  const {\n    months, amount, currency,\n  } = option;\n  const lang = useLang();\n\n  const handleGiftClick = useLastCallback(() => {\n    onClick(option);\n  });\n\n  const perMonth = Math.floor(amount / months);\n  const discount = baseMonthAmount && baseMonthAmount > perMonth\n    ? Math.ceil(100 - perMonth / (baseMonthAmount / 100))\n    : undefined;\n\n  function renderMonths() {\n    const caption = months === 12\n      ? lang('Years', { count: 1 }, { pluralValue: 1 })\n      : lang('Months', { count: months }, { pluralValue: months });\n    return (\n      <div className={styles.monthsDescription}>\n        {caption}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={styles.container}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        play={canPlayAnimatedEmojis}\n        noLoop\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n\n      {renderMonths()}\n      <div className={styles.description}>\n        {lang('PremiumGiftDescription')}\n      </div>\n      <Button className={styles.buy} nonInteractive size=\"tiny\" pill fluid>\n        {formatCurrencyAsString(amount, currency)}\n      </Button>\n      {optionByStars && (\n        <div className={styles.starsPriceBlock}>\n          {lang('GiftPremiumStarsPrice', {\n            stars: (formatStarsAsIcon(lang, optionByStars.amount, { className: styles.starsPriceIcon })),\n          }, { withNodes: true, withMarkdown: true })}\n        </div>\n      )}\n      {Boolean(discount) && (\n        <GiftRibbon color=\"purple\" text={lang('GiftDiscount', { percent: discount })} />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { option }): StateProps => {\n    const sticker = selectGiftStickerForDuration(global, option.months);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n    };\n  },\n)(GiftItemPremium));\n","import React, { memo, useRef } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type {\n  ApiStarGiftRegular,\n} from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useFlag from '../../../hooks/useFlag';\nimport { type ObserveFn, useOnIntersect } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Icon from '../../common/icons/Icon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  gift: ApiStarGiftRegular;\n  observeIntersection?: ObserveFn;\n  onClick: (gift: ApiStarGiftRegular) => void;\n};\n\nconst GIFT_STICKER_SIZE = 90;\n\nfunction GiftItemStar({ gift, observeIntersection, onClick }: OwnProps) {\n  const { openGiftInfoModal } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const lang = useLang();\n  const [shouldPlay, play] = useFlag();\n\n  const {\n    stars,\n    isLimited,\n    isSoldOut,\n    sticker,\n  } = gift;\n\n  const handleGiftClick = useLastCallback(() => {\n    if (isSoldOut) {\n      openGiftInfoModal({ gift });\n      return;\n    }\n\n    onClick(gift);\n  });\n\n  useOnIntersect(ref, observeIntersection, (entry) => {\n    if (entry.isIntersecting) play();\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(styles.container, styles.starGift)}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        noLoop\n        play={shouldPlay}\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n      <Button className={styles.buy} nonInteractive size=\"tiny\" color=\"stars\" withSparkleEffect pill fluid>\n        <Icon name=\"star\" className={styles.star} />\n        <div className={styles.amount}>\n          {stars}\n        </div>\n      </Button>\n      {isLimited && !isSoldOut && <GiftRibbon color=\"blue\" text={lang('GiftLimited')} />}\n      {isSoldOut && <GiftRibbon color=\"red\" text={lang('GiftSoldOut')} />}\n    </div>\n  );\n}\n\nexport default memo(GiftItemStar);\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiDisallowedGifts,\n  ApiPeer,\n  ApiPremiumGiftCodeOption,\n  ApiStarGiftRegular,\n  ApiStarsAmount,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { StarGiftCategory } from '../../../types';\n\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat, isApiPeerUser } from '../../../global/helpers/peers';\nimport { selectPeer, selectUserFullInfo } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { throttle } from '../../../util/schedulers';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport { useIntersectionObserver } from '../../../hooks/useIntersectionObserver';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport GiftSendingOptions from './GiftComposer';\nimport GiftItemPremium from './GiftItemPremium';\nimport GiftItemStar from './GiftItemStar';\nimport StarGiftCategoryList from './StarGiftCategoryList';\n\nimport styles from './GiftModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['giftModal'];\n};\n\nexport type GiftOption = ApiPremiumGiftCodeOption | ApiStarGiftRegular;\n\ntype StateProps = {\n  boostPerSentGift?: number;\n  starGiftsById?: Record<string, ApiStarGiftRegular>;\n  starGiftIdsByCategory?: Record<StarGiftCategory, string[]>;\n  starBalance?: ApiStarsAmount;\n  peer?: ApiPeer;\n  isSelf?: boolean;\n  disallowedGifts?: ApiDisallowedGifts;\n};\n\nconst AVATAR_SIZE = 100;\nconst INTERSECTION_THROTTLE = 200;\nconst SCROLL_THROTTLE = 200;\n\nconst runThrottledForScroll = throttle((cb) => cb(), SCROLL_THROTTLE, true);\n\nconst GiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starGiftsById,\n  starGiftIdsByCategory,\n  starBalance,\n  peer,\n  isSelf,\n  disallowedGifts,\n}) => {\n  const {\n    closeGiftModal,\n  } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const dialogRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const giftHeaderRef = useRef<HTMLHeadingElement>(null);\n\n  // eslint-disable-next-line no-null/no-null\n  const scrollerRef = useRef<HTMLDivElement>(null);\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const user = peer && isApiPeerUser(peer) ? peer : undefined;\n  const chat = peer && isApiPeerChat(peer) ? peer : undefined;\n\n  const [selectedGift, setSelectedGift] = useState<GiftOption | undefined>();\n  const [shouldShowMainScreenHeader, setShouldShowMainScreenHeader] = useState(false);\n  const [isMainScreenHeaderForStarGifts, setIsMainScreenHeaderForStarGifts] = useState(false);\n  const [isGiftScreenHeaderForStarGifts, setIsGiftScreenHeaderForStarGifts] = useState(false);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  const areAllGiftsDisallowed = useMemo(() => {\n    if (!disallowedGifts) {\n      return undefined;\n    }\n    const {\n      shouldDisallowPremiumGifts,\n      ...disallowedGiftTypes\n    } = disallowedGifts;\n    return !isSelf && Object.values(disallowedGiftTypes).every(Boolean);\n  }, [isSelf, disallowedGifts]);\n\n  const areUnlimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowUnlimitedStarGifts;\n  const areLimitedStarGiftsDisallowed = !isSelf && disallowedGifts?.shouldDisallowLimitedStarGifts;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const allGifts = renderingModal?.gifts;\n  const filteredGifts = useMemo(() => {\n    return allGifts?.sort((prevGift, gift) => prevGift.months - gift.months)\n      .filter((gift) => gift.users === 1 && gift.currency !== 'XTR');\n  }, [allGifts]);\n\n  const giftsByStars = useMemo(() => {\n    const mapGifts = new Map();\n\n    if (!filteredGifts) return mapGifts;\n\n    filteredGifts.forEach((gift) => {\n      const giftByStars = allGifts?.find(\n        (starsGift) => starsGift.currency === STARS_CURRENCY_CODE\n        && starsGift.months === gift.months,\n      );\n      if (giftByStars) {\n        mapGifts.set(gift, giftByStars);\n      }\n    });\n\n    return mapGifts;\n  }, [allGifts, filteredGifts]);\n\n  const baseGift = useMemo(() => {\n    return filteredGifts?.reduce((prev, gift) => (prev.amount < gift.amount ? prev : gift));\n  }, [filteredGifts]);\n\n  const {\n    observe: observeIntersection,\n  } = useIntersectionObserver({ rootRef: scrollerRef, throttleMs: INTERSECTION_THROTTLE, isDisabled: !isOpen });\n\n  const isGiftScreen = Boolean(selectedGift);\n  const shouldShowHeader = isGiftScreen || shouldShowMainScreenHeader;\n  const isHeaderForStarGifts = isGiftScreen ? isGiftScreenHeaderForStarGifts : isMainScreenHeaderForStarGifts;\n\n  useEffect(() => {\n    if (!isOpen) {\n      setShouldShowMainScreenHeader(false);\n      setSelectedGift(undefined);\n      setSelectedCategory('all');\n    }\n  }, [isOpen]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    if (isGiftScreen) return;\n    const currentTarget = e.currentTarget;\n\n    runThrottledForScroll(() => {\n      const { scrollTop } = currentTarget;\n\n      setShouldShowMainScreenHeader(scrollTop > 150);\n\n      if (transitionRef.current && giftHeaderRef.current) {\n        const { top: headerTop } = giftHeaderRef.current.getBoundingClientRect();\n        const { top: transitionTop } = transitionRef.current.getBoundingClientRect();\n        setIsMainScreenHeaderForStarGifts(headerTop - transitionTop <= 0);\n      }\n    });\n  });\n\n  const giftPremiumDescription = lang('GiftPremiumDescription', {\n    user: getUserFullName(user)!,\n    link: (\n      <SafeLink\n        text={lang('GiftPremiumDescriptionLinkCaption')}\n        url={lang('GiftPremiumDescriptionLink')}\n      />\n    ),\n  }, { withNodes: true });\n\n  const starGiftDescription = chat\n    ? lang('StarGiftDescriptionChannel', { peer: getPeerTitle(lang, chat) }, {\n      withNodes: true,\n      withMarkdown: true,\n    })\n    : isSelf\n      ? lang('StarGiftDescriptionSelf', undefined, {\n        withNodes: true,\n        renderTextFilters: ['br'],\n      })\n      : lang('StarGiftDescription', {\n        user: getUserFullName(user)!,\n      }, { withNodes: true, withMarkdown: true });\n\n  function renderGiftPremiumHeader() {\n    return (\n      <h2 className={buildClassName(styles.headerText, styles.center)}>\n        {lang('GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  function renderGiftPremiumDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.center)}>\n        {giftPremiumDescription}\n      </p>\n    );\n  }\n\n  function renderStarGiftsHeader() {\n    return (\n      <h2 ref={giftHeaderRef} className={buildClassName(styles.headerText, styles.center)}>\n        {lang(isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader')}\n      </h2>\n    );\n  }\n\n  function renderStarGiftsDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.starGiftsDescription, styles.center)}>\n        {starGiftDescription}\n      </p>\n    );\n  }\n\n  const handleGiftClick = useLastCallback((gift: GiftOption) => {\n    setSelectedGift(gift);\n    setIsGiftScreenHeaderForStarGifts('id' in gift);\n  });\n\n  function renderStarGifts() {\n    const filteredGiftIds = starGiftIdsByCategory?.[selectedCategory]?.filter((giftId) => {\n      const gift = starGiftsById?.[giftId];\n      if (!gift) return false;\n\n      const { isLimited, isSoldOut, upgradeStars } = gift;\n      if (areUnlimitedStarGiftsDisallowed && !areLimitedStarGiftsDisallowed) {\n        return isLimited;\n      }\n      if (areLimitedStarGiftsDisallowed && !areUnlimitedStarGiftsDisallowed) {\n        return !isLimited && !isSoldOut;\n      }\n      if (areUnlimitedStarGiftsDisallowed && areLimitedStarGiftsDisallowed) {\n        return Boolean(isLimited && !!upgradeStars);\n      }\n\n      return true;\n    });\n\n    return (\n      <div className={styles.starGiftsContainer}>\n        {starGiftsById && filteredGiftIds?.map((giftId) => {\n          const gift = starGiftsById[giftId];\n          return (\n            <GiftItemStar\n              key={giftId}\n              gift={gift}\n              observeIntersection={observeIntersection}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderPremiumGifts() {\n    return (\n      <div className={styles.premiumGiftsGallery}>\n        {filteredGifts?.map((gift) => {\n          return (\n            <GiftItemPremium\n              option={gift}\n              optionByStars={giftsByStars.get(gift)}\n              baseMonthAmount={baseGift ? Math.floor(baseGift.amount / baseGift.months) : undefined}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  const onCategoryChanged = useLastCallback((category: StarGiftCategory) => {\n    setSelectedCategory(category);\n  });\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    if (isGiftScreen) {\n      setSelectedGift(undefined);\n      return;\n    }\n    closeGiftModal();\n  });\n\n  function renderMainScreen() {\n    return (\n      <div ref={scrollerRef} className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={styles.avatars}>\n          <Avatar\n            size={AVATAR_SIZE}\n            peer={peer}\n          />\n          <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n        </div>\n        {!isSelf && !chat && !disallowedGifts?.shouldDisallowPremiumGifts && (\n          <>\n            {renderGiftPremiumHeader()}\n            {renderGiftPremiumDescription()}\n            {renderPremiumGifts()}\n          </>\n        )}\n\n        {!areAllGiftsDisallowed && (\n          <>\n            {renderStarGiftsHeader()}\n            {renderStarGiftsDescription()}\n            <StarGiftCategoryList\n              areLimitedStarGiftsDisallowed={areLimitedStarGiftsDisallowed}\n              onCategoryChanged={onCategoryChanged}\n            />\n            <Transition\n              name=\"zoomFade\"\n              activeKey={getCategoryKey(selectedCategory)}\n              className={styles.starGiftsTransition}\n            >\n              {renderStarGifts()}\n            </Transition>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  const isBackButton = isGiftScreen;\n\n  const buttonClassName = buildClassName(\n    'animated-close-icon',\n    isBackButton && 'state-back',\n  );\n\n  return (\n    <Modal\n      dialogRef={dialogRef}\n      onClose={closeGiftModal}\n      isOpen={isOpen}\n      isSlim\n      contentClassName={styles.content}\n      className={buildClassName(styles.modalDialog, styles.root)}\n      isLowStackPriority\n    >\n      <Button\n        className={styles.closeButton}\n        round\n        color=\"translucent\"\n        size=\"smaller\"\n        onClick={handleCloseButtonClick}\n        ariaLabel={isBackButton ? oldLang('Common.Back') : oldLang('Common.Close')}\n      >\n        <div className={buttonClassName} />\n      </Button>\n      <BalanceBlock className={styles.balance} balance={starBalance} withAddButton />\n      <div className={buildClassName(styles.header, !shouldShowHeader && styles.hiddenHeader)}>\n        <Transition\n          name=\"slideVerticalFade\"\n          activeKey={Number(isHeaderForStarGifts)}\n          slideClassName={styles.headerSlide}\n        >\n          <h2 className={styles.commonHeaderText}>\n            {lang(isHeaderForStarGifts ? (isSelf ? 'StarsGiftHeaderSelf' : 'StarsGiftHeader') : 'GiftPremiumHeader')}\n          </h2>\n        </Transition>\n      </div>\n      <Transition\n        ref={transitionRef}\n        className={styles.transition}\n        name=\"pushSlide\"\n        activeKey={isGiftScreen ? 1 : 0}\n      >\n        {!isGiftScreen && renderMainScreen()}\n        {isGiftScreen && renderingModal?.forPeerId && (\n          <GiftSendingOptions\n            gift={selectedGift}\n            giftByStars={giftsByStars.get(selectedGift)}\n            peerId={renderingModal.forPeerId}\n          />\n        )}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const {\n    starGifts,\n    stars,\n    currentUserId,\n  } = global;\n\n  const peer = modal?.forPeerId ? selectPeer(global, modal.forPeerId) : undefined;\n  const isSelf = Boolean(currentUserId && modal?.forPeerId === currentUserId);\n  const userFullInfo = peer ? selectUserFullInfo(global, peer?.id) : undefined;\n\n  return {\n    boostPerSentGift: global.appConfig?.boostsPerSentGift,\n    starGiftsById: starGifts?.byId,\n    starGiftIdsByCategory: starGifts?.idsByCategory,\n    starBalance: stars?.balance,\n    peer,\n    isSelf,\n    disallowedGifts: userFullInfo?.disallowedGifts,\n  };\n})(GiftModal));\n\nfunction getCategoryKey(category: StarGiftCategory) {\n  if (category === 'all') return -2;\n  if (category === 'limited') return -1;\n  if (category === 'stock') return 0;\n  return category;\n}\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { StarGiftCategory } from '../../../types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLang from '../../../hooks/useLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarGiftCategoryList.module.scss';\n\ntype OwnProps = {\n  onCategoryChanged: (category: StarGiftCategory) => void;\n};\n\ntype StateProps = {\n  idsByCategory?: Record<StarGiftCategory, string[]>;\n  areLimitedStarGiftsDisallowed?: boolean;\n};\n\nconst StarGiftCategoryList = ({\n  idsByCategory,\n  onCategoryChanged,\n  areLimitedStarGiftsDisallowed,\n}: StateProps & OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const lang = useLang();\n  const starCategories: number[] | undefined = useMemo(() => idsByCategory && Object.keys(idsByCategory)\n    .filter((category) => category !== 'all' && category !== 'limited')\n    .map(Number)\n    .sort((a, b) => a - b),\n  [idsByCategory]);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  function handleItemClick(category: StarGiftCategory) {\n    setSelectedCategory(category);\n    onCategoryChanged(\n      category,\n    );\n  }\n\n  function renderCategoryName(category: StarGiftCategory) {\n    if (category === 'all') return lang('AllGiftsCategory');\n    if (category === 'stock') return lang('StockGiftsCategory');\n    if (category === 'limited') return lang('LimitedGiftsCategory');\n    return category;\n  }\n\n  function renderCategoryItem(category: StarGiftCategory) {\n    return (\n      <div\n        className={buildClassName(\n          styles.item,\n          selectedCategory === category && styles.selectedItem,\n        )}\n        onClick={() => handleItemClick(category)}\n      >\n        {Number.isInteger(category) && (\n          <StarIcon\n            className={styles.star}\n            type=\"gold\"\n            size=\"middle\"\n          />\n        )}\n        {renderCategoryName(category)}\n      </div>\n    );\n  }\n\n  useHorizontalScroll(ref, undefined, true);\n\n  return (\n    <div ref={ref} className={buildClassName(styles.list, 'no-scrollbar')}>\n      {renderCategoryItem('all')}\n      {!areLimitedStarGiftsDisallowed && renderCategoryItem('limited')}\n      {renderCategoryItem('stock')}\n      {starCategories?.map(renderCategoryItem)}\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const { starGifts } = global;\n\n    return {\n      idsByCategory: starGifts?.idsByCategory,\n    };\n  },\n)(StarGiftCategoryList));\n","import React, { memo, useMemo } from '../../../lib/teact/teact';\n\nimport type {\n  ApiStarGiftAttributeBackdrop, ApiStarGiftAttributeModel, ApiStarGiftAttributePattern,\n  ApiStarsAmount,\n} from '../../../api/types';\n\nimport {\n  formatStarsTransactionAmount,\n} from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\nimport buildStyle from '../../../util/buildStyle';\n\nimport { useTransitionActiveKey } from '../../../hooks/animations/useTransitionActiveKey';\nimport useLang from '../../../hooks/useLang';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport StarIcon from '../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../common/profile/RadialPatternBackground';\nimport Transition from '../../ui/Transition';\n\nimport styles from './UniqueGiftHeader.module.scss';\n\ntype OwnProps = {\n  modelAttribute: ApiStarGiftAttributeModel;\n  backdropAttribute: ApiStarGiftAttributeBackdrop;\n  patternAttribute: ApiStarGiftAttributePattern;\n  title?: string;\n  subtitle?: string;\n  className?: string;\n  resellPrice?: ApiStarsAmount;\n};\n\nconst STICKER_SIZE = 120;\n\nconst UniqueGiftHeader = ({\n  modelAttribute,\n  backdropAttribute,\n  patternAttribute,\n  title,\n  subtitle,\n  className,\n  resellPrice,\n}: OwnProps) => {\n  const lang = useLang();\n  const activeKey = useTransitionActiveKey([modelAttribute, backdropAttribute, patternAttribute]);\n  const subtitleColor = backdropAttribute?.textColor;\n\n  const radialPatternBackdrop = useMemo(() => {\n    const backdropColors = [backdropAttribute.centerColor, backdropAttribute.edgeColor];\n    const patternColor = backdropAttribute.patternColor;\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternColor={patternColor}\n        patternIcon={patternAttribute.sticker}\n      />\n    );\n  }, [backdropAttribute, patternAttribute]);\n\n  return (\n    <div className={buildClassName(styles.root, className)}>\n      <Transition\n        className={styles.transition}\n        slideClassName={styles.transitionSlide}\n        activeKey={activeKey}\n        direction={1}\n        name=\"zoomBounceSemiFade\"\n      >\n        {radialPatternBackdrop}\n        <AnimatedIconFromSticker\n          className={styles.sticker}\n          sticker={modelAttribute.sticker}\n          size={STICKER_SIZE}\n        />\n      </Transition>\n      {title && <h1 className={styles.title}>{title}</h1>}\n      {subtitle && (\n        <p className={styles.subtitle} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n          {subtitle}\n        </p>\n      )}\n      {resellPrice && (\n        <p className={styles.amount}>\n          <span>\n            {formatStarsTransactionAmount(lang, resellPrice)}\n          </span>\n          <StarIcon type=\"gold\" size=\"middle\" />\n        </p>\n      )}\n    </div>\n  );\n};\n\nexport default memo(UniqueGiftHeader);\n","import type { FC, TeactNode } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiEmojiStatusType,\n  ApiPeer,\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getHasAdminRight } from '../../../../global/helpers';\nimport { getPeerTitle, isApiPeerChat } from '../../../../global/helpers/peers';\nimport { selectPeer, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\nimport { CUSTOM_PEER_HIDDEN } from '../../../../util/objects/customPeer';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport BadgeButton from '../../../common/BadgeButton';\nimport GiftMenuItems from '../../../common/gift/GiftMenuItems';\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport DropdownMenu from '../../../ui/DropdownMenu';\nimport Link from '../../../ui/Link';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoModal'];\n};\n\ntype StateProps = {\n  fromPeer?: ApiPeer;\n  targetPeer?: ApiPeer;\n  currentUserId?: string;\n  starGiftMaxConvertPeriod?: number;\n  hasAdminRights?: boolean;\n  currentUserEmojiStatus?: ApiEmojiStatusType;\n  collectibleEmojiStatuses?: ApiEmojiStatusType[];\n  tonExplorerUrl?: string;\n  currentUser?: ApiUser;\n};\n\nconst STICKER_SIZE = 120;\n\nconst GiftInfoModal = ({\n  modal,\n  fromPeer,\n  targetPeer,\n  currentUserId,\n  starGiftMaxConvertPeriod,\n  hasAdminRights,\n  currentUserEmojiStatus,\n  collectibleEmojiStatuses,\n  tonExplorerUrl,\n  currentUser,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftInfoModal,\n    changeGiftVisibility,\n    convertGiftToStars,\n    openChatWithInfo,\n    focusMessage,\n    openGiftUpgradeModal,\n    showNotification,\n    buyStarGift,\n  } = getActions();\n\n  const [isConvertConfirmOpen, openConvertConfirm, closeConvertConfirm] = useFlag();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const [isConfirmModalOpen, setIsConfirmModalOpen] = useState<boolean>(false);\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingFromPeer = useCurrentOrPrev(fromPeer);\n  const renderingTargetPeer = useCurrentOrPrev(targetPeer);\n\n  const isTargetChat = renderingTargetPeer && isApiPeerChat(renderingTargetPeer);\n\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const isSender = savedGift?.fromId === currentUserId;\n  const canConvertDifference = (savedGift && starGiftMaxConvertPeriod && (\n    savedGift.date + starGiftMaxConvertPeriod - getServerTime()\n  )) || 0;\n  const conversionLeft = Math.ceil(canConvertDifference / 60 / 60 / 24);\n\n  const gift = isSavedGift ? typeGift.gift : typeGift;\n  const giftSticker = gift && getStickerFromGift(gift);\n  const hasConvertOption = canConvertDifference > 0 && Boolean(savedGift?.starsToConvert);\n\n  const isGiftUnique = gift && gift.type === 'starGiftUnique';\n  const uniqueGift = isGiftUnique ? gift : undefined;\n\n  const canFocusUpgrade = Boolean(savedGift?.upgradeMsgId);\n  const canManage = !canFocusUpgrade && savedGift?.inputGift && (\n    isTargetChat ? hasAdminRights : renderingTargetPeer?.id === currentUserId\n  );\n\n  const resellPriceInStars = isGiftUnique ? gift.resellPriceInStars : undefined;\n  const canBuyGift = !canManage && Boolean(resellPriceInStars);\n\n  const giftOwnerTitle = (() => {\n    if (!isGiftUnique) return undefined;\n    const { ownerName, ownerId } = gift;\n    const global = getGlobal(); // Peer titles do not need to be reactive\n    const owner = ownerId ? selectPeer(global, ownerId) : undefined;\n    return owner ? getPeerTitle(lang, owner) : ownerName;\n  })();\n\n  const handleClose = useLastCallback(() => {\n    closeGiftInfoModal();\n  });\n\n  const handleFocusUpgraded = useLastCallback(() => {\n    const giftChat = isSender ? renderingTargetPeer : renderingFromPeer;\n    if (!savedGift?.upgradeMsgId || !giftChat) return;\n    const { upgradeMsgId } = savedGift;\n    focusMessage({ chatId: giftChat.id, messageId: upgradeMsgId! });\n    handleClose();\n  });\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { inputGift, isUnsaved } = savedGift!;\n    changeGiftVisibility({ gift: inputGift!, shouldUnsave: !isUnsaved });\n    handleClose();\n  });\n\n  const handleConvertToStars = useLastCallback(() => {\n    const { inputGift } = savedGift!;\n    convertGiftToStars({ gift: inputGift! });\n    closeConvertConfirm();\n    handleClose();\n  });\n\n  const handleOpenUpgradeModal = useLastCallback(() => {\n    if (!savedGift) return;\n    openGiftUpgradeModal({ giftId: savedGift.gift.id, gift: savedGift });\n  });\n\n  const handleBuyGift = useLastCallback(() => {\n    if (!savedGift || gift?.type !== 'starGiftUnique' || !gift.resellPriceInStars) return;\n    setIsConfirmModalOpen(true);\n  });\n\n  const closeConfirmModal = useLastCallback(() => {\n    setIsConfirmModalOpen(false);\n  });\n\n  const handleConfirmBuyGift = useLastCallback(() => {\n    if (!savedGift || gift?.type !== 'starGiftUnique' || !gift.resellPriceInStars) return;\n    closeConfirmModal();\n    buyStarGift({ slug: gift.slug, stars: gift.resellPriceInStars });\n  });\n\n  const giftAttributes = useMemo(() => {\n    return gift && getGiftAttributes(gift);\n  }, [gift]);\n\n  const SettingsMenuButton: FC<{ onTrigger: () => void; isMenuOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger }) => (\n      <div\n        className={buildClassName(\n          styles.headerButton,\n          styles.left,\n        )}\n        tabIndex={0}\n        role=\"button\"\n        aria-haspopup=\"menu\"\n        aria-label={lang('AriaMoreButton')}\n        onClick={onTrigger}\n      >\n        <Icon\n          name=\"more\"\n          className={styles.icon}\n        />\n      </div>\n    );\n  }, [lang]);\n\n  const renderFooterButton = useLastCallback(() => {\n    if (canBuyGift) {\n      return (\n        <Button noForcedUpperCase size=\"smaller\" onClick={handleBuyGift}>\n          {lang('ButtonBuyGift', {\n            stars: formatStarsAsIcon(lang, resellPriceInStars!, { asFont: true }),\n          }, { withNodes: true })}\n        </Button>\n      );\n    }\n\n    if (canFocusUpgrade) {\n      return (\n        <Button size=\"smaller\" onClick={handleFocusUpgraded}>\n          {lang('GiftInfoViewUpgraded')}\n        </Button>\n      );\n    }\n\n    if (canManage && savedGift?.alreadyPaidUpgradeStars && !savedGift.upgradeMsgId) {\n      return (\n        <Button size=\"smaller\" isShiny onClick={handleOpenUpgradeModal}>\n          {lang('GiftInfoUpgradeForFree')}\n        </Button>\n      );\n    }\n\n    return (\n      <Button size=\"smaller\" onClick={handleClose}>\n        {lang('OK')}\n      </Button>\n    );\n  });\n\n  const saleDateInfo = useMemo(() => {\n    if (!gift) return undefined;\n    let text = '';\n    if (gift.type === 'starGift') {\n      if (gift.firstSaleDate) {\n        text += `${lang('GiftInfoFirstSale')} ${formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true)}`;\n      }\n      if (gift.lastSaleDate) {\n        text += '\\n';\n        text += `${lang('GiftInfoLastSale')} ${formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true)}`;\n      }\n    }\n\n    return text;\n  }, [gift, lang]);\n\n  const modalData = useMemo(() => {\n    if (!typeGift || !gift) {\n      return undefined;\n    }\n\n    const {\n      fromId, isNameHidden, starsToConvert, isUnsaved, isConverted, upgradeMsgId,\n    } = savedGift || {};\n    const canConvert = hasConvertOption && Boolean(starsToConvert);\n\n    const isVisibleForMe = isNameHidden && renderingTargetPeer;\n\n    const description = (() => {\n      if (!savedGift) return lang('GiftInfoSoldOutDescription');\n      if (isTargetChat) return undefined;\n\n      if (savedGift.upgradeMsgId) return lang('GiftInfoDescriptionUpgraded');\n      if (savedGift.canUpgrade && savedGift.alreadyPaidUpgradeStars) {\n        return canManage\n          ? lang('GiftInfoDescriptionFreeUpgrade')\n          : lang('GiftInfoPeerDescriptionFreeUpgradeOut', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n      }\n      if (!canManage && !isSender) return undefined;\n      if (isConverted && canConvert) {\n        return canManage\n          ? lang('GiftInfoDescriptionConverted', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftInfoPeerDescriptionOutConverted', {\n            amount: starsToConvert,\n            peer: getPeerTitle(lang, renderingTargetPeer!)!,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n      }\n\n      if (savedGift.canUpgrade && canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescriptionUpgrade', {\n            amount: starsToConvert,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n        }\n\n        return lang('GiftInfoDescriptionUpgradeRegular');\n      }\n\n      if (canManage) {\n        if (canConvert) {\n          return lang('GiftInfoDescription', {\n            amount: starsToConvert,\n          }, {\n            withNodes: true,\n            withMarkdown: true,\n            pluralValue: starsToConvert,\n          });\n        }\n\n        return lang('GiftInfoDescriptionRegular');\n      }\n\n      if (canConvert) {\n        return lang('GiftInfoPeerDescriptionOut', {\n          amount: starsToConvert,\n          peer: getPeerTitle(lang, renderingTargetPeer!)!,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert,\n        });\n      }\n\n      return lang('GiftInfoPeerDescriptionOutRegular', { peer: getPeerTitle(lang, renderingTargetPeer!)! });\n    })();\n\n    function getTitle() {\n      if (isGiftUnique) return gift.title;\n      if (!savedGift) return lang('GiftInfoSoldOutTitle');\n\n      return canManage ? lang('GiftInfoReceived') : lang('GiftInfoTitle');\n    }\n\n    const uniqueGiftContextMenu = (\n      <DropdownMenu\n        className=\"with-menu-transitions\"\n        trigger={SettingsMenuButton}\n        positionX=\"right\"\n      >\n        <GiftMenuItems\n          peerId={renderingModal!.peerId!}\n          gift={typeGift}\n          canManage={canManage}\n          collectibleEmojiStatuses={collectibleEmojiStatuses}\n          currentUserEmojiStatus={currentUserEmojiStatus}\n        />\n      </DropdownMenu>\n    );\n\n    const uniqueGiftModalHeader = (\n      <div\n        className={styles.modalHeader}\n      >\n        {Boolean(canManage && resellPriceInStars) && (\n          <div className={styles.giftResalePriceContainer}>\n            {formatStarsAsIcon(lang, resellPriceInStars!, {\n              asFont: true,\n              className: styles.giftResalePriceStar,\n            })}\n          </div>\n        )}\n        <div className={styles.headerSplitButton}>\n          {isOpen && uniqueGiftContextMenu}\n          <div\n            className={buildClassName(\n              styles.headerButton,\n              styles.right,\n            )}\n            tabIndex={0}\n            role=\"button\"\n            aria-haspopup=\"menu\"\n            aria-label={lang('Close')}\n            onClick={handleClose}\n          >\n            <Icon\n              name=\"close\"\n              className={buildClassName(\n                styles.icon,\n                styles.moreIcon,\n              )}\n            />\n          </div>\n        </div>\n      </div>\n    );\n\n    const uniqueGiftHeader = isGiftUnique && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={STICKER_SIZE}\n        />\n        <h1 className={styles.title}>\n          {getTitle()}\n        </h1>\n        {description && (\n          <p className={buildClassName(styles.description, !savedGift && gift?.type === 'starGift' && styles.soldOut)}>\n            {description}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n    if (gift.type === 'starGift') {\n      const hasFrom = fromId || isNameHidden;\n\n      if (hasFrom) {\n        tableData.push([\n          lang('GiftInfoFrom'),\n          !fromId ? (\n            <>\n              <Avatar size=\"small\" peer={CUSTOM_PEER_HIDDEN} />\n              <span className={styles.unknown}>{oldLang(CUSTOM_PEER_HIDDEN.titleKey!)}</span>\n            </>\n          ) : { chatId: fromId },\n        ]);\n      }\n\n      if (savedGift?.date) {\n        tableData.push([\n          lang('GiftInfoDate'),\n          <span title={saleDateInfo}>{formatDateTimeToString(savedGift.date * 1000, lang.code, true)}</span>,\n        ]);\n      }\n\n      if (gift.firstSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoFirstSale'),\n          formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      if (gift.lastSaleDate && !savedGift) {\n        tableData.push([\n          lang('GiftInfoLastSale'),\n          formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true),\n        ]);\n      }\n\n      const starsValue = gift.stars + (savedGift?.alreadyPaidUpgradeStars || 0);\n\n      tableData.push([\n        lang('GiftInfoValue'),\n        <div className={styles.giftValue}>\n          {formatStarsAsIcon(lang, starsValue, { className: styles.starAmountIcon })}\n          {canManage && hasConvertOption && Boolean(starsToConvert) && (\n            <BadgeButton onClick={openConvertConfirm}>\n              {lang('GiftInfoConvert', { amount: starsToConvert }, { pluralValue: starsToConvert })}\n            </BadgeButton>\n          )}\n        </div>,\n      ]);\n\n      if (gift.availabilityTotal) {\n        tableData.push([\n          lang('GiftInfoAvailability'),\n          lang('GiftInfoAvailabilityValue', {\n            count: gift.availabilityRemains || 0,\n            total: gift.availabilityTotal,\n          }, {\n            pluralValue: gift.availabilityRemains || 0,\n          }),\n        ]);\n      }\n\n      if (gift.upgradeStars && !upgradeMsgId) {\n        tableData.push([\n          lang('GiftInfoStatus'),\n          <div className={styles.giftValue}>\n            {lang('GiftInfoStatusNonUnique')}\n            {canManage && <BadgeButton onClick={handleOpenUpgradeModal}>{lang('GiftInfoUpgradeBadge')}</BadgeButton>}\n          </div>,\n        ]);\n      }\n\n      if (savedGift?.message) {\n        tableData.push([\n          undefined,\n          renderTextWithEntities(savedGift.message),\n        ]);\n      }\n    }\n\n    if (isGiftUnique) {\n      const { ownerName, ownerAddress, ownerId } = gift;\n      const {\n        model, backdrop, pattern, originalDetails,\n      } = giftAttributes || {};\n\n      if (ownerAddress) {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          <span\n            className={styles.ownerAddress}\n            onClick={() => {\n              copyTextToClipboard(ownerAddress);\n              showNotification({\n                message: { key: 'WalletAddressCopied' },\n                icon: 'copy',\n              });\n            }}\n          >\n            {ownerAddress}\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </span>,\n        ]);\n      } else {\n        tableData.push([\n          lang('GiftInfoOwner'),\n          ownerId ? { chatId: ownerId, withEmojiStatus: true } : ownerName || '',\n        ]);\n      }\n\n      if (model) {\n        tableData.push([\n          lang('GiftAttributeModel'),\n          <span className={styles.uniqueAttribute}>\n            {model.name}<BadgeButton>{formatPercent(model.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (backdrop) {\n        tableData.push([\n          lang('GiftAttributeBackdrop'),\n          <span className={styles.uniqueAttribute}>\n            {backdrop.name}<BadgeButton>{formatPercent(backdrop.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      if (pattern) {\n        tableData.push([\n          lang('GiftAttributeSymbol'),\n          <span className={styles.uniqueAttribute}>\n            {pattern.name}<BadgeButton>{formatPercent(pattern.rarityPercent)}</BadgeButton>\n          </span>,\n        ]);\n      }\n\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoIssued', {\n          issued: gift.issuedCount,\n          total: gift.totalCount,\n        }),\n      ]);\n\n      if (originalDetails) {\n        const {\n          date, recipientId, message, senderId,\n        } = originalDetails;\n        const global = getGlobal(); // Peer titles do not need to be reactive\n\n        const openChat = (id: string) => {\n          openChatWithInfo({ id });\n          closeGiftInfoModal();\n        };\n\n        const recipient = selectPeer(global, recipientId)!;\n        const sender = senderId ? selectPeer(global, senderId) : undefined;\n\n        const formattedDate = formatDateTimeToString(date * 1000, lang.code, true);\n        const recipientLink = (\n          // eslint-disable-next-line react/jsx-no-bind\n          <Link onClick={() => openChat(recipientId)} isPrimary>\n            {getPeerTitle(lang, recipient)}\n          </Link>\n        );\n\n        let text: TeactNode | undefined;\n        if (!sender || senderId === recipientId) {\n          text = message ? lang('GiftInfoPeerOriginalInfoText', {\n            peer: recipientLink,\n            text: renderTextWithEntities(message),\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          }) : lang('GiftInfoPeerOriginalInfo', {\n            peer: recipientLink,\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          });\n        } else {\n          const senderLink = (\n            // eslint-disable-next-line react/jsx-no-bind\n            <Link onClick={() => openChat(sender.id)} isPrimary>\n              {getPeerTitle(lang, sender)}\n            </Link>\n          );\n          text = message ? lang('GiftInfoPeerOriginalInfoTextSender', {\n            peer: recipientLink,\n            sender: senderLink,\n            text: renderTextWithEntities(message),\n            date: formattedDate,\n          }, {\n            withNodes: true,\n          }) : lang('GiftInfoPeerOriginalInfoSender', {\n            peer: recipientLink,\n            date: formattedDate,\n            sender: senderLink,\n          }, {\n            withNodes: true,\n          });\n        }\n\n        tableData.push([\n          undefined,\n          <span>{text}</span>,\n        ]);\n      }\n    }\n\n    const tonLink = tonExplorerUrl && isGiftUnique && gift.giftAddress && (\n      `${tonExplorerUrl}${gift.giftAddress}`\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {(canManage || tonLink || canBuyGift) && (\n          <div className={styles.footerDescription}>\n            {tonLink && (\n              <div>\n                {lang('GiftInfoTonText', {\n                  link: <SafeLink url={tonLink} shouldSkipModal text={lang('GiftInfoTonLinkText')} />,\n                }, { withNodes: true })}\n              </div>\n            )}\n            {canManage && (\n              <div>\n                {lang(`GiftInfo${isTargetChat ? 'Channel' : ''}${isUnsaved ? 'Hidden' : 'Saved'}`, {\n                  link: (\n                    <Link isPrimary onClick={handleTriggerVisibility}>\n                      {lang(`GiftInfoSaved${isUnsaved ? 'Show' : 'Hide'}`)}\n                    </Link>\n                  ),\n                }, {\n                  withNodes: true,\n                })}\n              </div>\n            )}\n            {!canBuyGift && isVisibleForMe && (\n              <div>\n                {lang('GiftInfoSenderHidden')}\n              </div>\n            )}\n            {canBuyGift && giftOwnerTitle && (\n              <div>\n                {lang('GiftInfoBuyGift', {\n                  user: giftOwnerTitle,\n                }, { withNodes: true })}\n              </div>\n            )}\n          </div>\n        )}\n        {renderFooterButton()}\n      </div>\n    );\n\n    return {\n      modalHeader: isGiftUnique ? uniqueGiftModalHeader : undefined,\n      header: isGiftUnique ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [\n    typeGift, savedGift, renderingTargetPeer, giftSticker, lang,\n    canManage, hasConvertOption, isSender, oldLang, tonExplorerUrl,\n    gift, giftAttributes, renderFooterButton, isTargetChat,\n    SettingsMenuButton, isGiftUnique, renderingModal,\n    collectibleEmojiStatuses, currentUserEmojiStatus, saleDateInfo,\n    canBuyGift, giftOwnerTitle, isOpen, resellPriceInStars,\n  ]);\n\n  return (\n    <>\n      <TableInfoModal\n        isOpen={isOpen}\n        modalHeader={modalData?.modalHeader}\n        header={modalData?.header}\n        hasBackdrop={isGiftUnique}\n        tableData={modalData?.tableData}\n        footer={modalData?.footer}\n        className={styles.modal}\n        onClose={handleClose}\n        withBalanceBar={Boolean(canBuyGift)}\n        isLowStackPriority\n      />\n      {uniqueGift && currentUser && resellPriceInStars && (\n        <ConfirmDialog\n          isOpen={isConfirmModalOpen}\n          noDefaultTitle\n          onClose={closeConfirmModal}\n          confirmLabel={lang('ButtonBuyGift', {\n            stars: formatStarsAsIcon(lang, resellPriceInStars!, { asFont: true }),\n          }, { withNodes: true })}\n          confirmHandler={handleConfirmBuyGift}\n        >\n\n          <GiftTransferPreview\n            peer={currentUser}\n            gift={uniqueGift}\n          />\n          <p>\n            {lang('GiftBuyConfirmDescription', {\n              gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n              stars: formatStarsAsText(lang, resellPriceInStars),\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </p>\n        </ConfirmDialog>\n      )}\n      {savedGift && (\n        <ConfirmDialog\n          isOpen={isConvertConfirmOpen}\n          onClose={closeConvertConfirm}\n          confirmHandler={handleConvertToStars}\n          title={lang('GiftInfoConvertTitle')}\n        >\n          <div>\n            {lang('GiftInfoPeerConvertDescription', {\n              amount: formatStarsAsText(lang, savedGift.starsToConvert!),\n              peer: getPeerTitle(lang, renderingFromPeer!)!,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n          {hasConvertOption && (\n            <div>\n              {lang('GiftInfoConvertDescriptionPeriod', {\n                count: conversionLeft,\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: conversionLeft,\n              })}\n            </div>\n          )}\n          <div>{lang('GiftInfoConvertDescription2')}</div>\n        </ConfirmDialog>\n      )}\n    </>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const typeGift = modal?.gift;\n    const isSavedGift = typeGift && 'gift' in typeGift;\n    const currentUserId = global.currentUserId;\n\n    const fromId = isSavedGift && typeGift.fromId;\n    const fromPeer = fromId ? selectPeer(global, fromId) : undefined;\n    const targetPeer = modal?.peerId ? selectPeer(global, modal.peerId) : undefined;\n    const chat = targetPeer && isApiPeerChat(targetPeer) ? targetPeer : undefined;\n    const hasAdminRights = chat && getHasAdminRight(chat, 'postMessages');\n    const currentUser = selectUser(global, currentUserId!);\n    const currentUserEmojiStatus = currentUser?.emojiStatus;\n    const collectibleEmojiStatuses = global.collectibleEmojiStatuses?.statuses;\n\n    return {\n      fromPeer,\n      targetPeer,\n      currentUserId,\n      starGiftMaxConvertPeriod: global.appConfig?.starGiftMaxConvertPeriod,\n      tonExplorerUrl: global.appConfig?.tonExplorerUrl,\n      hasAdminRights,\n      currentUserEmojiStatus,\n      collectibleEmojiStatuses,\n      currentUser,\n    };\n  },\n)(GiftInfoModal));\n","import React, {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport { filterPeersByQuery } from '../../../../global/helpers/peers';\nimport { selectCanGift } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nimport styles from './GiftRecipientPicker.module.scss';\n\nexport type OwnProps = {\n  modal?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n}\n\nconst GiftRecipientPicker = ({\n  modal,\n  currentUserId,\n  userIds,\n}: OwnProps & StateProps) => {\n  const { closeGiftRecipientPicker, openGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n  const isOpen = modal;\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const global = getGlobal();\n    const idsWithSelf = userIds ? userIds.concat(currentUserId!) : undefined;\n    const filteredPeerIds = idsWithSelf ? filterPeersByQuery({ ids: idsWithSelf, query: searchQuery }) : [];\n\n    return sortChatIds(unique(filteredPeerIds).filter((peerId) => {\n      return selectCanGift(global, peerId);\n    }), undefined, [currentUserId!]);\n  }, [currentUserId, searchQuery, userIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((selectedId: string) => {\n    openGiftModal({ forUserId: selectedId });\n    closeGiftRecipientPicker();\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeGiftRecipientPicker}\n      title={oldLang('GiftTelegramPremiumOrStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onSelectedIdChange={handleSelectedUserIdsChange}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        forceShowSelf\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { currentUserId } = global;\n\n  return {\n    currentUserId,\n    userIds: global.contactList?.userIds,\n  };\n})(GiftRecipientPicker));\n","import React, {\n  memo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { TabState } from '../../../../global/types';\n\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport InputText from '../../../ui/InputText';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftResalePriceComposerModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftResalePriceComposerModal'];\n};\n\nexport type StateProps = {\n  starsStargiftResaleCommissionPermille?: number;\n  starsStargiftResaleAmountMin: number;\n  starsStargiftResaleAmountMax?: number;\n  starsUsdWithdrawRate?: number;\n};\n\nconst GiftResalePriceComposerModal = ({\n  modal, starsStargiftResaleCommissionPermille,\n  starsStargiftResaleAmountMin, starsStargiftResaleAmountMax, starsUsdWithdrawRate,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftResalePriceComposerModal,\n    closeGiftInfoModal,\n    updateStarGiftPrice,\n    showNotification,\n  } = getActions();\n  const isOpen = Boolean(modal);\n  const [price, setPrice] = useState<number | undefined>(undefined);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const { gift: typeGift } = renderingModal || {};\n  const isSavedGift = typeGift && 'gift' in typeGift;\n  const savedGift = isSavedGift ? typeGift : undefined;\n  const hasPrice = Boolean(price);\n\n  const lang = useLang();\n\n  const handleChangePrice = useLastCallback((e) => {\n    const value = e.target.value;\n    const number = parseFloat(value);\n    const result = value === '' || Number.isNaN(number) ? undefined\n      : starsStargiftResaleAmountMax ? Math.min(number, starsStargiftResaleAmountMax) : number;\n    setPrice(result);\n  });\n\n  const handleClose = useLastCallback(() => {\n    closeGiftResalePriceComposerModal();\n  });\n\n  const handleSellGift = useLastCallback(() => {\n    if (!savedGift || savedGift.gift.type !== 'starGiftUnique' || !savedGift.inputGift || !price) return;\n    closeGiftResalePriceComposerModal();\n    closeGiftInfoModal();\n    updateStarGiftPrice({ gift: savedGift.inputGift, price });\n    showNotification({\n      icon: 'sell-outline',\n      message: {\n        key: 'NotificationGiftIsSale',\n        variables: {\n          gift: lang('GiftUnique', { title: savedGift.gift.title, number: savedGift.gift.number }),\n        },\n      },\n    });\n  });\n  const commission = starsStargiftResaleCommissionPermille;\n  const isPriceCorrect = hasPrice && price > starsStargiftResaleAmountMin;\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('GiftSellTitle')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      <div className={styles.inputPrice}>\n        <InputText\n          label={lang('InputPlaceholderGiftResalePrice')}\n          onChange={handleChangePrice}\n          value={price?.toString()}\n          inputMode=\"numeric\"\n          tabIndex={0}\n          teactExperimentControlled\n        />\n      </div>\n\n      <div className={styles.descriptionContainer}>\n        <span>\n          {!isPriceCorrect && commission && lang('DescriptionComposerGiftMinimumPrice', {\n            stars: formatStarsAsText(lang, starsStargiftResaleAmountMin),\n          }, {\n            withMarkdown: true,\n            withNodes: true,\n          })}\n          {isPriceCorrect && lang('DescriptionComposerGiftResalePrice',\n            {\n              stars: formatStarsAsText(lang, commission ? Number((price * (commission)).toFixed()) : price),\n            },\n            {\n              withMarkdown: true,\n              withNodes: true,\n            })}\n        </span>\n\n        {isPriceCorrect && starsUsdWithdrawRate && (\n          <span className={styles.descriptionPrice}>\n            {`≈ ${formatCurrencyAsString(\n              price * starsUsdWithdrawRate,\n              'USD',\n              lang.code,\n            )}`}\n          </span>\n        )}\n      </div>\n\n      <Button noForcedUpperCase disabled={!isPriceCorrect} size=\"smaller\" onClick={handleSellGift}>\n        {isPriceCorrect && lang('ButtonSellGift', {\n          stars: formatStarsAsIcon(lang, price, { asFont: true }),\n        }, { withNodes: true })}\n        {!isPriceCorrect && lang('Sell')}\n      </Button>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const configPermille = global.appConfig?.starsStargiftResaleCommissionPermille;\n    const starsStargiftResaleCommissionPermille = configPermille ? (configPermille / 1000) : undefined;\n    const starsStargiftResaleAmountMin = global.appConfig?.starsStargiftResaleAmountMin || 0;\n    const starsStargiftResaleAmountMax = global.appConfig?.starsStargiftResaleAmountMax;\n\n    const starsUsdWithdrawRateX1000 = global.appConfig?.starsUsdWithdrawRateX1000;\n    const starsUsdWithdrawRate = starsUsdWithdrawRateX1000 ? starsUsdWithdrawRateX1000 / 1000 : 1;\n\n    return {\n      starsStargiftResaleCommissionPermille,\n      starsStargiftResaleAmountMin,\n      starsStargiftResaleAmountMax,\n      starsUsdWithdrawRate,\n    };\n  },\n)(GiftResalePriceComposerModal));\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { selectIsCurrentUserPremium, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useCustomEmoji from '../../../common/hooks/useCustomEmoji';\n\nimport Avatar from '../../../common/Avatar';\nimport FullNameTitle from '../../../common/FullNameTitle';\nimport Icon from '../../../common/icons/Icon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\n\nimport styles from './GiftStatusInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftStatusInfoModal'];\n};\n\ntype StateProps = {\n  currentUser: ApiUser;\n  isCurrentUserPremium?: boolean;\n};\n\nconst GiftStatusInfoModal = ({\n  modal,\n  currentUser,\n  isCurrentUserPremium,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftStatusInfoModal,\n    setEmojiStatus,\n  } = getActions();\n  const lang = useLang();\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const { emojiStatus } = renderingModal || {};\n\n  const subtitleColor = emojiStatus?.textColor;\n\n  const patternIcon = useCustomEmoji(emojiStatus?.patternDocumentId);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftStatusInfoModal();\n  });\n\n  const onWearClick = useLastCallback(() => {\n    if (emojiStatus) {\n      setEmojiStatus({ emojiStatus });\n    }\n    closeGiftStatusInfoModal();\n  });\n\n  const radialPatternBackdrop = useMemo(() => {\n    if (!emojiStatus || !isOpen) return undefined;\n\n    const backdropColors = [emojiStatus.centerColor, emojiStatus.edgeColor];\n    const patternColor = emojiStatus.patternColor;\n\n    return (\n      <RadialPatternBackground\n        className={styles.radialPattern}\n        backgroundColors={backdropColors}\n        patternColor={patternColor}\n        patternIcon={patternIcon.customEmoji}\n      />\n    );\n  }, [emojiStatus, isOpen, patternIcon]);\n\n  const mockPeerWithStatus = useMemo(() => {\n    return {\n      ...currentUser,\n      emojiStatus,\n    } satisfies ApiUser;\n  }, [currentUser, emojiStatus]);\n\n  const header = useMemo(() => {\n    return (\n      <div className={styles.header}>\n        <div\n          className={buildClassName(styles.profileBlock)}\n          style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}\n        >\n\n          {radialPatternBackdrop}\n          <Avatar peer={mockPeerWithStatus} size=\"jumbo\" className={styles.avatar} />\n          <FullNameTitle\n            peer={mockPeerWithStatus}\n            className={styles.userTitle}\n            withEmojiStatus\n            noFake\n            noVerified\n            statusSparklesColor={subtitleColor}\n          />\n          <p className={styles.status} style={buildStyle(subtitleColor && `color: ${subtitleColor}`)}>\n            {lang('Online')}\n          </p>\n        </div>\n        <div className={styles.titleContainer}>\n          <div className={styles.giftTitle}>{\n            lang('UniqueStatusWearTitle', {\n              gift: mockPeerWithStatus?.emojiStatus?.title,\n            })\n          }\n          </div>\n          <div className={styles.infoDescription}>{\n            lang('UniqueStatusBenefitsDescription')\n          }\n          </div>\n        </div>\n      </div>\n    );\n  }, [subtitleColor, radialPatternBackdrop, mockPeerWithStatus, lang]);\n\n  const listItemData = [\n    ['radial-badge', lang('UniqueStatusBadgeBenefitTitle'), lang('UniqueStatusBadgeDescription')],\n    ['unique-profile', lang('UniqueStatusProfileDesignBenefitTitle'), lang('UniqueStatusProfileDesignDescription')],\n    ['proof-of-ownership', lang('UniqueStatusProofOfOwnershipBenefitTitle'),\n      lang('UniqueStatusProofOfOwnershipDescription')],\n  ] satisfies TableAboutData;\n\n  const footer = useMemo(() => {\n    if (!isOpen) return undefined;\n    return (\n      <div className={styles.footer}>\n        <Button\n          size=\"smaller\"\n          onClick={onWearClick}\n        >\n          {lang('UniqueStatusWearButton')}\n          {!isCurrentUserPremium && <Icon name=\"lock-badge\" className={styles.lockIcon} />}\n        </Button>\n      </div>\n    );\n  }, [lang, isCurrentUserPremium, isOpen]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={header}\n      listItemData={listItemData}\n      footer={footer}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const currentUser = selectUser(global, global.currentUserId!)!;\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    return {\n      currentUser,\n      isCurrentUserPremium,\n    };\n  },\n)(GiftStatusInfoModal));\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport type { UniqueCustomPeer } from '../../../../types';\n\nimport { ALL_FOLDER_ID } from '../../../../config';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectCanGift, selectPeer } from '../../../../global/selectors';\nimport { unique } from '../../../../util/iteratees';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\nimport { MEMO_EMPTY_ARRAY } from '../../../../util/memo';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport { useFolderManagerForOrderedIds } from '../../../../hooks/useFolderManager';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport usePeerSearch from '../../../../hooks/usePeerSearch';\n\nimport GiftTransferPreview from '../../../common/gift/GiftTransferPreview';\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['giftTransferModal'];\n};\n\ntype StateProps = {\n  contactIds?: string[];\n  currentUserId?: string;\n};\n\ntype Categories = 'withdraw';\n\nconst GiftTransferModal = ({\n  modal, contactIds, currentUserId,\n}: OwnProps & StateProps) => {\n  const { closeGiftTransferModal, openGiftWithdrawModal, transferGift } = getActions();\n  const isOpen = Boolean(modal);\n\n  const lang = useLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const uniqueGift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = uniqueGift && getGiftAttributes(uniqueGift);\n\n  const [selectedId, setSelectedId] = useState<string | undefined>();\n\n  const renderingSelectedPeerId = useCurrentOrPrev(selectedId);\n  const renderingSelectedPeer = useMemo(() => {\n    const global = getGlobal();\n    return renderingSelectedPeerId ? selectPeer(global, renderingSelectedPeerId) : undefined;\n  }, [renderingSelectedPeerId]);\n\n  const orderedChatIds = useFolderManagerForOrderedIds(ALL_FOLDER_ID);\n\n  const sortedLocalIds = useMemo(() => {\n    return unique([\n      ...(contactIds || []),\n      ...(orderedChatIds || []),\n    ]);\n  }, [contactIds, orderedChatIds]);\n\n  const { result: foundIds, currentResultsQuery } = usePeerSearch({\n    query: searchQuery,\n    defaultValue: sortedLocalIds,\n  });\n\n  const isLoading = currentResultsQuery !== searchQuery;\n\n  const categories = useMemo(() => {\n    if (currentResultsQuery) return MEMO_EMPTY_ARRAY;\n\n    return [{\n      type: 'withdraw',\n      isCustomPeer: true,\n      avatarIcon: 'toncoin',\n      peerColorId: 5,\n      title: lang('GiftTransferTON'),\n    }] satisfies UniqueCustomPeer<Categories>[];\n  }, [lang, currentResultsQuery]);\n\n  const handleCategoryChange = useLastCallback((category: Categories) => {\n    if (category !== 'withdraw') return;\n\n    openGiftWithdrawModal({\n      gift: renderingModal!.gift,\n    });\n    closeGiftTransferModal();\n  });\n\n  const displayIds = useMemo(() => {\n    if (isLoading) return MEMO_EMPTY_ARRAY;\n    const global = getGlobal();\n\n    return sortChatIds((foundIds || []).filter((peerId) => (\n      peerId !== currentUserId && selectCanGift(global, peerId)\n    )),\n    false);\n  }, [isLoading, foundIds, currentUserId]);\n\n  const closeConfirmModal = useLastCallback(() => {\n    setSelectedId(undefined);\n  });\n\n  useEffect(() => {\n    if (!isOpen) {\n      setSelectedId(undefined);\n    }\n  }, [isOpen]);\n\n  const handleTransfer = useLastCallback(() => {\n    if (!renderingModal?.gift.inputGift) return;\n    transferGift({\n      gift: renderingModal.gift.inputGift,\n      recipientId: renderingSelectedPeerId!,\n      transferStars: renderingModal.gift.transferStars,\n    });\n\n    closeConfirmModal();\n    closeGiftTransferModal();\n  });\n\n  return (\n    <PickerModal\n      isOpen={isOpen}\n      onClose={closeGiftTransferModal}\n      title={lang('GiftTransferTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      ignoreFreeze\n    >\n      <PeerPicker<Categories>\n        itemIds={displayIds}\n        categories={categories}\n        onSelectedCategoryChange={handleCategoryChange}\n        withDefaultPadding\n        withPeerUsernames\n        isSearchable\n        noScrollRestore\n        isLoading={isLoading}\n        filterValue={searchQuery}\n        filterPlaceholder={lang('Search')}\n        onFilterChange={setSearchQuery}\n        onSelectedIdChange={setSelectedId}\n      />\n      {giftAttributes && (\n        <ConfirmDialog\n          isOpen={Boolean(selectedId)}\n          noDefaultTitle\n          onClose={closeConfirmModal}\n          confirmLabel={renderingModal?.gift.transferStars\n            ? lang(\n              'GiftTransferConfirmButton',\n              { amount: formatStarsAsIcon(lang, renderingModal.gift.transferStars, { asFont: true }) },\n              { withNodes: true },\n            ) : lang('GiftTransferConfirmButtonFree')}\n          confirmHandler={handleTransfer}\n        >\n          {renderingSelectedPeer && (\n            <GiftTransferPreview\n              peer={renderingSelectedPeer}\n              gift={uniqueGift}\n            />\n          )}\n          <p>\n            {renderingModal?.gift.transferStars\n              ? lang('GiftTransferConfirmDescription', {\n                gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                amount: formatStarsAsText(lang, renderingModal.gift.transferStars),\n                peer: getPeerTitle(lang, renderingSelectedPeer!),\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n              })\n              : lang('GiftTransferConfirmDescriptionFree', {\n                gift: lang('GiftUnique', { title: uniqueGift.title, number: uniqueGift.number }),\n                peer: getPeerTitle(lang, renderingSelectedPeer!),\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n              })}\n          </p>\n        </ConfirmDialog>\n      )}\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const { contactList, currentUserId } = global;\n\n    return {\n      contactIds: contactList?.userIds,\n      currentUserId,\n    };\n  },\n)(GiftTransferModal));\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarGiftAttribute,\n  ApiStarGiftAttributeBackdrop,\n  ApiStarGiftAttributeModel,\n  ApiStarGiftAttributePattern,\n  ApiStarGiftRegular,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { ApiMediaFormat } from '../../../../api/types';\n\nimport { getStickerMediaHash } from '../../../../global/helpers';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { fetch } from '../../../../util/mediaLoader';\n\nimport useInterval from '../../../../hooks/schedulers/useInterval';\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Button from '../../../ui/Button';\nimport Checkbox from '../../../ui/Checkbox';\nimport TableAboutModal, { type TableAboutData } from '../../common/TableAboutModal';\nimport UniqueGiftHeader from '../UniqueGiftHeader';\n\nimport styles from './GiftUpgradeModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftUpgradeModal'];\n};\n\ntype StateProps = {\n  recipient?: ApiPeer;\n};\n\ntype Attributes = {\n  model: ApiStarGiftAttributeModel;\n  pattern: ApiStarGiftAttributePattern;\n  backdrop: ApiStarGiftAttributeBackdrop;\n};\n\nconst PREVIEW_UPDATE_INTERVAL = 3000;\n\nconst GiftUpgradeModal = ({ modal, recipient }: OwnProps & StateProps) => {\n  const { closeGiftUpgradeModal, upgradeGift } = getActions();\n  const isOpen = Boolean(modal);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingRecipient = useCurrentOrPrev(recipient);\n  const [shouldKeepOriginalDetails, setShouldKeepOriginalDetails] = useState(false);\n\n  const [previewAttributes, setPreviewAttributes] = useState<Attributes | undefined>();\n\n  const lang = useLang();\n\n  const handleClose = useLastCallback(() => closeGiftUpgradeModal());\n\n  const handleUpgrade = useLastCallback(() => {\n    const gift = renderingModal?.gift;\n    if (!gift?.inputGift) return;\n\n    upgradeGift({\n      gift: gift.inputGift,\n      shouldKeepOriginalDetails,\n      upgradeStars: !gift.alreadyPaidUpgradeStars ? (gift.gift as ApiStarGiftRegular).upgradeStars : undefined,\n    });\n    handleClose();\n  });\n\n  const updatePreviewAttributes = useLastCallback(() => {\n    if (!renderingModal?.sampleAttributes) return;\n    setPreviewAttributes(getRandomAttributes(renderingModal.sampleAttributes, previewAttributes));\n  });\n\n  useInterval(updatePreviewAttributes, isOpen ? PREVIEW_UPDATE_INTERVAL : undefined, true);\n\n  useEffect(() => {\n    if (isOpen && renderingModal?.sampleAttributes) {\n      updatePreviewAttributes();\n    }\n  }, [isOpen, renderingModal?.sampleAttributes]);\n\n  // Preload stickers and patterns\n  useEffect(() => {\n    const attributes = renderingModal?.sampleAttributes;\n    if (!attributes) return;\n    const patternStickers = attributes.filter((attr): attr is ApiStarGiftAttributeModel => attr.type === 'pattern')\n      .map((attr) => attr.sticker);\n    const modelStickers = attributes.filter((attr): attr is ApiStarGiftAttributeModel => attr.type === 'model')\n      .map((attr) => attr.sticker);\n\n    const mediaHashes = [...patternStickers, ...modelStickers].map((sticker) => getStickerMediaHash(sticker, 'full'));\n    mediaHashes.forEach((hash) => {\n      fetch(hash, ApiMediaFormat.BlobUrl);\n    });\n  }, [renderingModal?.sampleAttributes]);\n\n  const modalData = useMemo(() => {\n    if (!previewAttributes || !isOpen) {\n      return undefined;\n    }\n\n    const gift = renderingModal?.gift;\n\n    const listItemData = [\n      ['diamond', lang('GiftUpgradeUniqueTitle'), lang('GiftUpgradeUniqueDescription')],\n      ['trade', lang('GiftUpgradeTransferableTitle'), lang('GiftUpgradeTransferableDescription')],\n      ['auction', lang('GiftUpgradeTradeableTitle'), lang('GiftUpgradeTradeableDescription')],\n    ] satisfies TableAboutData;\n\n    const subtitle = renderingRecipient\n      ? lang('GiftPeerUpgradeText', { peer: getPeerTitle(lang, renderingRecipient) })\n      : lang('GiftUpgradeTextOwn');\n\n    const header = (\n      <UniqueGiftHeader\n        modelAttribute={previewAttributes.model}\n        backdropAttribute={previewAttributes.backdrop}\n        patternAttribute={previewAttributes.pattern}\n        title={lang('GiftUpgradeTitle')}\n        subtitle={subtitle}\n      />\n    );\n\n    const footer = (\n      <div className={styles.footer}>\n        {!gift && (\n          <Button className={styles.footerButton} size=\"smaller\" onClick={handleClose}>\n            {lang('OK')}\n          </Button>\n        )}\n        {gift && (\n          <>\n            <Checkbox\n              label={lang('GiftUpgradeKeepDetails')}\n              onCheck={setShouldKeepOriginalDetails}\n              checked={shouldKeepOriginalDetails}\n            />\n            <Button className={styles.footerButton} size=\"smaller\" isShiny onClick={handleUpgrade}>\n              {gift.alreadyPaidUpgradeStars\n                ? lang('GeneralConfirm')\n                : lang('GiftUpgradeButton', {\n                  amount: formatStarsAsIcon(lang, (gift.gift as ApiStarGiftRegular).upgradeStars!, { asFont: true }),\n                }, { withNodes: true })}\n            </Button>\n          </>\n        )}\n      </div>\n    );\n\n    return {\n      listItemData,\n      header,\n      footer,\n    };\n  }, [previewAttributes, isOpen, lang, renderingRecipient, renderingModal?.gift, shouldKeepOriginalDetails]);\n\n  return (\n    <TableAboutModal\n      isOpen={isOpen}\n      header={modalData?.header}\n      footer={modalData?.footer}\n      listItemData={modalData?.listItemData}\n      hasBackdrop\n      onClose={handleClose}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const recipientId = modal?.recipientId;\n    const recipient = recipientId ? selectPeer(global, recipientId) : undefined;\n\n    return {\n      recipient,\n    };\n  },\n)(GiftUpgradeModal));\n\nfunction getRandomAttributes(list: ApiStarGiftAttribute[], previousSelection?: Attributes): Attributes {\n  const models = list.filter((attr): attr is ApiStarGiftAttributeModel => (\n    attr.type === 'model' && attr.name !== previousSelection?.model.name\n  ));\n  const patterns = list.filter((attr): attr is ApiStarGiftAttributePattern => (\n    attr.type === 'pattern' && attr.name !== previousSelection?.pattern.name\n  ));\n  const backdrops = list.filter((attr): attr is ApiStarGiftAttributeBackdrop => (\n    attr.type === 'backdrop' && attr.name !== previousSelection?.backdrop.name\n  ));\n\n  const randomModel = models[Math.floor(Math.random() * models.length)];\n  const randomPattern = patterns[Math.floor(Math.random() * patterns.length)];\n  const randomBackdrop = backdrops[Math.floor(Math.random() * backdrops.length)];\n\n  return {\n    model: randomModel,\n    pattern: randomPattern,\n    backdrop: randomBackdrop,\n  };\n}\n","import React, {\n  memo,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiStarGiftUnique } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { type CustomPeer, SettingsScreens } from '../../../../types';\n\nimport { getDays } from '../../../../util/dates/units';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { getGiftAttributes } from '../../../common/helpers/gifts';\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport PasswordForm from '../../../common/PasswordForm';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\n\nimport styles from './GiftWithdrawModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftWithdrawModal'];\n};\n\ntype StateProps = {\n  hasPassword?: boolean;\n  passwordHint?: string;\n};\n\nconst FRAGMENT_PEER: CustomPeer = {\n  isCustomPeer: true,\n  avatarIcon: 'fragment',\n  title: '',\n  customPeerAvatarColor: '#000000',\n};\nconst GIFT_STICKER_SIZE = 4.5 * REM;\n\nconst GiftWithdrawModal = ({ modal, hasPassword, passwordHint }: OwnProps & StateProps) => {\n  const {\n    closeGiftWithdrawModal,\n    clearGiftWithdrawError,\n    closeGiftInfoModal,\n    processStarGiftWithdrawal,\n    openSettingsScreen,\n  } = getActions();\n  const isOpen = Boolean(modal);\n\n  const [shouldShowPassword, setShouldShowPassword] = useState(false);\n\n  const lang = useLang();\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const gift = renderingModal?.gift?.gift as ApiStarGiftUnique;\n  const giftAttributes = gift && getGiftAttributes(gift);\n  const exportDelay = renderingModal?.gift?.canExportAt\n    ? Math.max(renderingModal.gift.canExportAt - getServerTime(), 0) : undefined;\n\n  const handleClose = useLastCallback(() => {\n    closeGiftWithdrawModal();\n  });\n\n  const handleSubmit = useLastCallback((password: string) => {\n    processStarGiftWithdrawal({\n      gift: renderingModal!.gift.inputGift!,\n      password,\n    });\n  });\n\n  const handleSetUpPassword = useLastCallback(() => {\n    openSettingsScreen({\n      screen: SettingsScreens.TwoFaDisabled,\n    });\n    closeGiftWithdrawModal();\n    closeGiftInfoModal();\n  });\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={lang('GiftWithdrawTitle')}\n      hasCloseButton\n      isSlim\n      onClose={handleClose}\n    >\n      {giftAttributes && (\n        <>\n          <div className={styles.header}>\n            <div className={styles.giftPreview}>\n              <RadialPatternBackground\n                className={styles.backdrop}\n                backgroundColors={[giftAttributes.backdrop!.centerColor, giftAttributes.backdrop!.edgeColor]}\n                patternColor={giftAttributes.backdrop?.patternColor}\n                patternIcon={giftAttributes.pattern?.sticker}\n              />\n              <AnimatedIconFromSticker\n                className={styles.sticker}\n                size={GIFT_STICKER_SIZE}\n                sticker={giftAttributes.model?.sticker}\n              />\n            </div>\n            <Icon name=\"next\" className={styles.arrow} />\n            <Avatar\n              peer={FRAGMENT_PEER}\n              size=\"giant\"\n              className={styles.avatar}\n            />\n          </div>\n          <p className={styles.description}>\n            {lang('GiftWithdrawDescription', {\n              gift: `${gift.title} #${gift.number}`,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n              renderTextFilters: ['br'],\n            })}\n          </p>\n        </>\n      )}\n      {Boolean(exportDelay) && (\n        <p className={styles.exportHint}>\n          {lang('GiftWithdrawWait', { days: getDays(exportDelay) }, { pluralValue: getDays(exportDelay) })}\n        </p>\n      )}\n      {!hasPassword && (\n        <>\n          <span className={styles.noPassword}>{lang('ErrorPasswordMissing')}</span>\n          <Button className=\"mt-2\" size=\"smaller\" onClick={handleSetUpPassword}>{lang('SetUp2FA')}</Button>\n        </>\n      )}\n      {hasPassword && !exportDelay && (\n        <PasswordForm\n          shouldShowSubmit\n          placeholder={lang('CheckPasswordPlaceholder')}\n          error={renderingModal?.errorKey && lang.withRegular(renderingModal?.errorKey)}\n          description={lang('CheckPasswordDescription')}\n          clearError={clearGiftWithdrawError}\n          isLoading={renderingModal?.isLoading}\n          hint={passwordHint}\n          isPasswordVisible={shouldShowPassword}\n          shouldResetValue={isOpen}\n          onChangePasswordVisibility={setShouldShowPassword}\n          submitLabel={lang('GiftWithdrawSubmit')}\n          onSubmit={handleSubmit}\n        />\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const {\n      settings: {\n        byKey: {\n          hasPassword,\n        },\n      },\n      twoFaSettings: {\n        hint: passwordHint,\n      },\n    } = global;\n\n    return {\n      hasPassword,\n      passwordHint,\n    };\n  },\n)(GiftWithdrawModal));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiPaidReactionPrivacyType,\n  ApiPeer,\n  ApiSendAsPeerId,\n  ApiStarsAmount, ApiUser,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../config';\nimport { getPeerTitle, isApiPeerUser } from '../../../global/helpers/peers';\nimport {\n  selectChat, selectChatMessage, selectPeer, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport FullNameTitle from '../../common/FullNameTitle';\nimport Icon from '../../common/icons/Icon';\nimport PeerBadge from '../../common/PeerBadge';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport DropdownMenu from '../../ui/DropdownMenu';\nimport MenuItem from '../../ui/MenuItem';\nimport Modal from '../../ui/Modal';\nimport Separator from '../../ui/Separator';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport StarSlider from './StarSlider';\n\nimport styles from './PaidReactionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['paidReactionModal'];\n};\n\ntype StateProps = {\n  message?: ApiMessage;\n  chat?: ApiChat;\n  maxAmount: number;\n  starBalance?: ApiStarsAmount;\n  defaultPrivacy?: ApiPaidReactionPrivacyType;\n  sendPaidReactionsAsPeerIds?: ApiSendAsPeerId[];\n  currentUserId: string;\n  currentUser: ApiUser;\n};\n\ntype ReactorData = {\n  amount: number;\n  localAmount: number;\n  isMy?: boolean;\n  isAnonymous?: boolean;\n  user?: ApiPeer;\n};\n\nconst MAX_TOP_REACTORS = 3;\nconst DEFAULT_STARS_AMOUNT = 50;\nconst MAX_REACTION_AMOUNT = 2500;\nconst ANONYMOUS_PEER: CustomPeer = {\n  avatarIcon: 'author-hidden',\n  customPeerAvatarColor: '#9eaab5',\n  isCustomPeer: true,\n  titleKey: 'StarsReactionAnonymous',\n};\n\nconst PaidReactionModal = ({\n  modal,\n  chat,\n  message,\n  maxAmount,\n  starBalance,\n  defaultPrivacy,\n  sendPaidReactionsAsPeerIds,\n  currentUserId,\n  currentUser,\n}: OwnProps & StateProps) => {\n  const { closePaidReactionModal, addLocalPaidReaction, loadSendPaidReactionsAs } = getActions();\n\n  const [starsAmount, setStarsAmount] = useState(DEFAULT_STARS_AMOUNT);\n  const [isTouched, markTouched, unmarkTouched] = useFlag();\n  const [shouldSendAsAnonymous, setShouldSendAsAnonymous] = useState(true);\n  const [sendAsPeerId, setSendAsPeerId] = useState(currentUserId);\n\n  const chatId = chat?.id;\n\n  const senderPeer = sendAsPeerId ? (selectPeer(getGlobal(), sendAsPeerId)) : currentUser;\n\n  const oldLang = useOldLang();\n  const { isMobile } = useAppLayout();\n  const lang = useLang();\n\n  const handleShowInTopSendersChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setShouldSendAsAnonymous(!e.target.checked);\n  });\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setStarsAmount(value);\n    markTouched();\n  });\n\n  useEffect(() => {\n    if (chatId && !sendPaidReactionsAsPeerIds) {\n      loadSendPaidReactionsAs({ chatId });\n    }\n  }, [chatId, sendPaidReactionsAsPeerIds]);\n\n  const filteredMyReactorIds = useMemo(() => {\n    const result = sendPaidReactionsAsPeerIds?.map((peer) => peer.id)\n      .filter((id) => id !== chatId);\n    result?.unshift(currentUserId);\n    return result;\n  }, [sendPaidReactionsAsPeerIds, chatId, currentUserId]);\n\n  const canChangeSendAsPeer = filteredMyReactorIds && filteredMyReactorIds.length > 1;\n\n  useEffect(() => {\n    if (!modal) {\n      unmarkTouched();\n    }\n  }, [modal]);\n\n  useEffect(() => {\n    const currentReactor = message?.reactions?.topReactors?.find((reactor) => reactor.isMy);\n    if (currentReactor) {\n      setShouldSendAsAnonymous(Boolean(currentReactor.isAnonymous));\n      if (currentReactor.peerId) {\n        setSendAsPeerId(currentReactor.peerId);\n      }\n      return;\n    }\n\n    setShouldSendAsAnonymous(defaultPrivacy?.type === 'anonymous' || false);\n    if (defaultPrivacy?.type === 'peer' && filteredMyReactorIds?.includes(defaultPrivacy.peerId)) {\n      setSendAsPeerId(defaultPrivacy.peerId);\n      return;\n    }\n\n    setSendAsPeerId(currentUserId);\n  }, [defaultPrivacy, message?.reactions?.topReactors, filteredMyReactorIds, currentUserId]);\n\n  const handleSend = useLastCallback(() => {\n    if (!modal) return;\n\n    addLocalPaidReaction({\n      chatId: modal.chatId,\n      messageId: modal.messageId,\n      count: starsAmount,\n      isPrivate: shouldSendAsAnonymous,\n      peerId: shouldSendAsAnonymous || sendAsPeerId === currentUserId ? undefined : sendAsPeerId,\n      shouldIgnoreDefaultPrivacy: true,\n    });\n    closePaidReactionModal();\n  });\n\n  const handleSendAsPeerChange = useLastCallback((peerId: string) => {\n    setShouldSendAsAnonymous(false);\n    setSendAsPeerId(peerId);\n  });\n\n  const renderMenuItem = useLastCallback((peerId: string) => {\n    const peer = selectPeer(getGlobal(), peerId);\n    const isSelected = sendAsPeerId === peerId && !shouldSendAsAnonymous;\n    if (!peer) return undefined;\n\n    return (\n      <MenuItem\n        // eslint-disable-next-line react/jsx-no-bind\n        onClick={() => handleSendAsPeerChange(peerId)}\n      >\n        <Avatar\n          size=\"small\"\n          peer={peer}\n        />\n        <div className={buildClassName(styles.itemInfo)}>\n          <FullNameTitle className={styles.itemTitle} peer={peer} noFake noVerified />\n          <span className={styles.itemSubtitle}>\n            {isApiPeerUser(peer) ? lang('PeerPersonalAccount') : lang('PeerChannel')}\n          </span>\n        </div>\n        <Icon\n          className={styles.itemIcon}\n          name={isSelected ? 'check' : 'placeholder'}\n        />\n      </MenuItem>\n    );\n  });\n\n  const SendAsPeerMenuButton: FC<{ onTrigger: () => void; isOpen?: boolean }> = useMemo(() => {\n    return ({ onTrigger, isOpen }) => (\n      <Button\n        ripple={!isMobile}\n        size=\"smaller\"\n        color=\"translucent\"\n        className={buildClassName(styles.sendAsPeerMenuButton, isOpen ? 'active' : '')}\n        onClick={onTrigger}\n        ariaLabel={lang('AccDescrOpenMenu2')}\n      >\n        <Avatar\n          className={styles.sendAsPeerButtonAvatar}\n          size=\"mini\"\n          peer={shouldSendAsAnonymous ? ANONYMOUS_PEER : senderPeer}\n        />\n        <Icon\n          name=\"down\"\n          className={styles.buttonDownIcon}\n        />\n      </Button>\n    );\n  }, [isMobile, lang, senderPeer, shouldSendAsAnonymous]);\n\n  const sendAsPeersMenu = useMemo(() => {\n    if (!canChangeSendAsPeer) return undefined;\n    return (\n      <DropdownMenu\n        className={buildClassName(styles.sendAsPeerMenu, 'with-menu-transitions')}\n        bubbleClassName={styles.sendAsPeerMenuBubble}\n        trigger={SendAsPeerMenuButton}\n        positionX=\"right\"\n        autoClose\n      >\n        {filteredMyReactorIds.map((id) => (\n          renderMenuItem(id)\n        ))}\n      </DropdownMenu>\n    );\n  }, [SendAsPeerMenuButton, filteredMyReactorIds, canChangeSendAsPeer]);\n\n  const topReactors = useMemo(() => {\n    const global = getGlobal();\n    const all = message?.reactions?.topReactors;\n    if (!all) {\n      return undefined;\n    }\n\n    const result: ReactorData[] = [];\n    let hasCurrentSender = false;\n    let myReactorAmount = 0;\n\n    all.forEach((reactor) => {\n      const peer = reactor.peerId ? selectPeer(global, reactor.peerId) : undefined;\n      if (!peer && !reactor.isAnonymous && !reactor.isMy) return;\n      if (reactor.isMy) {\n        myReactorAmount = reactor.count;\n      }\n\n      if (reactor.isMy && (reactor.peerId !== sendAsPeerId || (reactor.isAnonymous && !shouldSendAsAnonymous))) return;\n\n      const isCurrentReactor = sendAsPeerId === reactor.peerId || (shouldSendAsAnonymous && reactor.isAnonymous);\n\n      if (isCurrentReactor) {\n        hasCurrentSender = true;\n      }\n\n      result.push({\n        amount: reactor.count,\n        localAmount: isCurrentReactor && isTouched ? starsAmount : 0,\n        isMy: reactor.isMy,\n        isAnonymous: reactor.isAnonymous,\n        user: peer,\n      });\n    });\n\n    if (!hasCurrentSender) {\n      const sender = selectPeer(global, sendAsPeerId);\n      result.push({\n        amount: myReactorAmount,\n        localAmount: isTouched ? starsAmount : 0,\n        isMy: true,\n        user: sender,\n      });\n    }\n\n    result.sort((a, b) => (b.amount + b.localAmount) - (a.amount + a.localAmount));\n\n    return result.slice(0, MAX_TOP_REACTORS);\n  }, [isTouched, message?.reactions?.topReactors, starsAmount, sendAsPeerId, shouldSendAsAnonymous]);\n\n  const chatTitle = chat && getPeerTitle(oldLang, chat);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      onClose={closePaidReactionModal}\n      isSlim\n      hasAbsoluteCloseButton\n      contentClassName={styles.content}\n      isLowStackPriority\n    >\n      <div className={styles.sendAsPeersMenuContainer}>\n        {sendAsPeersMenu}\n      </div>\n      <div className={styles.headerControlPanel}>\n        <BalanceBlock balance={starBalance} className={styles.modalBalance} withAddButton />\n      </div>\n\n      <StarSlider\n        className={styles.slider}\n        defaultValue={DEFAULT_STARS_AMOUNT}\n        maxValue={maxAmount}\n        onChange={handleAmountChange}\n      />\n      <h3 className={styles.title}>{oldLang('StarsReactionTitle')}</h3>\n      <div className={styles.description}>\n        {renderText(oldLang('StarsReactionText', chatTitle), ['simple_markdown', 'emoji'])}\n      </div>\n      <Separator>\n        {topReactors && <div className={styles.topLabel}>{oldLang('StarsReactionTopSenders')}</div>}\n      </Separator>\n      {topReactors && (\n        <div className={styles.top}>\n          {topReactors.map((reactor) => {\n            const countText = formatInteger(reactor.amount + reactor.localAmount);\n            const peer = (reactor.isAnonymous || !reactor.user || (reactor.isMy && shouldSendAsAnonymous))\n              ? ANONYMOUS_PEER : reactor.user;\n            const text = 'isCustomPeer' in peer ? oldLang(peer.titleKey)\n              : peer && getPeerTitle(oldLang, peer);\n            return (\n              <PeerBadge\n                className={styles.topPeer}\n                key={`${reactor.user?.id || 'anonymous'}-${countText}`}\n                peer={peer}\n                badgeText={countText}\n                badgeIcon=\"star\"\n                badgeClassName={styles.topBadge}\n                text={text}\n              />\n            );\n          })}\n        </div>\n      )}\n      {topReactors && (<Separator className={styles.separator} />) }\n      <Checkbox\n        className={buildClassName(styles.checkBox, 'dialog-checkbox')}\n        checked={!shouldSendAsAnonymous}\n        onChange={handleShowInTopSendersChange}\n        label={oldLang('StarsReactionShowMeInTopSenders')}\n      />\n      <Button\n        size=\"smaller\"\n        onClick={handleSend}\n      >\n        {lang('SendPaidReaction', { amount: starsAmount }, {\n          withNodes: true,\n          specialReplacement: {\n            [STARS_ICON_PLACEHOLDER]: <Icon className={styles.buttonStar} name=\"star\" />,\n          },\n        })}\n      </Button>\n      <p className={styles.disclaimer}>\n        {lang('StarsReactionTerms', {\n          link: <SafeLink text={lang('StarsReactionLinkText')} url={lang('StarsReactionLink')} />,\n        }, {\n          withNodes: true,\n        })}\n      </p>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const chat = modal && selectChat(global, modal.chatId);\n    const message = modal && selectChatMessage(global, modal.chatId, modal.messageId);\n    const starBalance = global.stars?.balance;\n    const maxAmount = global.appConfig?.paidReactionMaxAmount || MAX_REACTION_AMOUNT;\n    const defaultPrivacy = global.settings.paidReactionPrivacy;\n    const sendPaidReactionsAsPeerIds = chat?.sendPaidReactionsAsPeerIds;\n    const currentUserId = global.currentUserId!;\n    const currentUser = selectUser(global, currentUserId)!;\n\n    return {\n      chat,\n      message,\n      starBalance,\n      maxAmount,\n      defaultPrivacy,\n      sendPaidReactionsAsPeerIds,\n      currentUserId,\n      currentUser,\n    };\n  },\n)(PaidReactionModal));\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\n\nimport { requestMeasure, requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\n\nimport useEffectOnce from '../../../hooks/useEffectOnce';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useResizeObserver from '../../../hooks/useResizeObserver';\n\nimport AnimatedCounter from '../../common/AnimatedCounter';\nimport Icon from '../../common/icons/Icon';\nimport Sparkles from '../../common/Sparkles';\n\nimport styles from './StarSlider.module.scss';\n\ntype OwnProps = {\n  maxValue: number;\n  defaultValue: number;\n  className?: string;\n  onChange: (value: number) => void;\n};\n\nconst DEFAULT_POINTS = [50, 100, 500, 1000, 2000, 5000, 10000];\n\nconst StarSlider = ({\n  maxValue,\n  defaultValue,\n  className,\n  onChange,\n}: OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const floatingBadgeRef = useRef<HTMLDivElement>(null);\n\n  const points = useMemo(() => {\n    const result = [];\n    for (let i = 0; i < DEFAULT_POINTS.length; i++) {\n      if (DEFAULT_POINTS[i] < maxValue) {\n        result.push(DEFAULT_POINTS[i]);\n      }\n\n      if (DEFAULT_POINTS[i] >= maxValue) {\n        result.push(maxValue);\n        break;\n      }\n    }\n\n    return result;\n  }, [maxValue]);\n\n  const [value, setValue] = useState(0);\n\n  useEffectOnce(() => {\n    setValue(getProgress(points, defaultValue));\n  });\n\n  const updateSafeBadgePosition = useLastCallback(() => {\n    const badge = floatingBadgeRef.current;\n    if (!badge) return;\n    const parent = badge.parentElement!;\n\n    requestMeasure(() => {\n      const safeMinX = parent.offsetLeft + badge.offsetWidth / 2;\n      const safeMaxX = parent.offsetLeft + parent.offsetWidth - badge.offsetWidth / 2;\n\n      requestMutation(() => {\n        parent.style.setProperty('--_min-x', `${safeMinX}px`);\n        parent.style.setProperty('--_max-x', `${safeMaxX}px`);\n      });\n    });\n  });\n\n  useResizeObserver(floatingBadgeRef, updateSafeBadgePosition);\n\n  const handleChange = useLastCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = Number(event.currentTarget.value);\n    setValue(newValue);\n\n    onChange(getValue(points, newValue));\n  });\n\n  return (\n    <div className={buildClassName(styles.root, className)} style={`--progress: ${value / points.length}`}>\n      <div className={styles.floatingBadgeWrapper}>\n        <div className={styles.floatingBadge} ref={floatingBadgeRef}>\n          <div className={styles.floatingBadgeText}>\n            <Icon name=\"star\" className={styles.floatingBadgeIcon} />\n            <AnimatedCounter text={formatInteger(getValue(points, value))} />\n          </div>\n          <svg className={styles.floatingBadgeTriangle} width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" fill=\"none\">\n            <defs>\n              <linearGradient id=\"StarBadgeTriangle\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n                <stop offset=\"-50%\" stop-color=\"#FFAA00\" />\n                <stop offset=\"150%\" stop-color=\"#FFCD3A\" />\n              </linearGradient>\n            </defs>\n            <path d=\"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z\" fill=\"url(#StarBadgeTriangle)\" />\n          </svg>\n        </div>\n      </div>\n      <div className={styles.progress}>\n        <Sparkles preset=\"progress\" className={styles.sparkles} />\n      </div>\n      <input\n        className={styles.slider}\n        type=\"range\"\n        min={0}\n        max={points.length}\n        defaultValue={getProgress(points, defaultValue)}\n        step=\"any\"\n        onChange={handleChange}\n      />\n    </div>\n  );\n};\n\nfunction getProgress(points: number[], value: number) {\n  const pointIndex = points.findIndex((point) => value <= point);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const progress = (value - prevPoint) / (nextPoint - prevPoint);\n  return pointIndex + progress;\n}\n\nfunction getValue(points: number[], progress: number) {\n  const pointIndex = Math.floor(progress);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const value = prevPoint + (nextPoint - prevPoint) * (progress - pointIndex);\n  return Math.round(value);\n}\n\nexport default memo(StarSlider);\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions } from '../../../global';\n\nimport type { ApiStarsAmount } from '../../../api/types';\n\nimport { formatStarsAmount } from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport BadgeButton from '../../common/BadgeButton';\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarsBalanceModal.module.scss';\n\ntype OwnProps = {\n  balance?: ApiStarsAmount;\n  withAddButton?: boolean;\n  className?: string;\n};\n\nconst BalanceBlock = ({ balance, className, withAddButton }: OwnProps) => {\n  const lang = useLang();\n\n  const {\n    openStarsBalanceModal,\n  } = getActions();\n\n  return (\n    <div className={buildClassName(styles.balanceBlock, className)}>\n      <div className={styles.balanceInfo}>\n        <span className={styles.smallerText}>{lang('StarsBalance')}</span>\n        <div className={styles.balanceBottom}>\n          <StarIcon type=\"gold\" size=\"middle\" />\n          {balance !== undefined ? formatStarsAmount(lang, balance) : '…'}\n          {withAddButton && (\n            <BadgeButton\n              className={styles.addStarsButton}\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={() => openStarsBalanceModal({})}\n            >\n              <Icon\n                className={styles.addStarsIcon}\n                name=\"add\"\n              />\n            </BadgeButton>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default memo(BalanceBlock);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiStarTopupOption } from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\nimport type { RegularLangKey } from '../../../types/language';\n\nimport { PAID_MESSAGES_PURPOSE } from '../../../config';\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport { getPeerTitle } from '../../../global/helpers/peers';\nimport { selectChat, selectIsPremiumPurchaseBlocked, selectUser } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport TabList, { type TabWithProperties } from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from './BalanceBlock';\nimport StarTopupOptionList from './StarTopupOptionList';\nimport StarsSubscriptionItem from './subscription/StarsSubscriptionItem';\nimport StarsTransactionItem from './transaction/StarsTransactionItem';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarLogo from '../../../assets/icons/StarLogo.svg';\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nconst TRANSACTION_TYPES = ['all', 'inbound', 'outbound'] as const;\nconst TRANSACTION_TABS_KEYS: RegularLangKey[] = [\n  'StarsTransactionsAll',\n  'StarsTransactionsIncoming',\n  'StarsTransactionsOutgoing',\n];\nconst TRANSACTION_ITEM_CLASS = 'StarsTransactionItem';\nconst SUBSCRIPTION_PURPOSE = 'subs';\n\nexport type OwnProps = {\n  modal: TabState['starsBalanceModal'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  canBuyPremium?: boolean;\n  shouldForceHeight?: boolean;\n};\n\nconst StarsBalanceModal = ({\n  modal, starsBalanceState, canBuyPremium, shouldForceHeight,\n}: OwnProps & StateProps) => {\n  const {\n    closeStarsBalanceModal, loadStarsTransactions, loadStarsSubscriptions, openStarsGiftingPickerModal, openInvoice,\n  } = getActions();\n\n  const { balance, history, subscriptions } = starsBalanceState || {};\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n  const [areBuyOptionsShown, showBuyOptions, hideBuyOptions] = useFlag();\n\n  const isOpen = Boolean(modal && starsBalanceState);\n\n  const {\n    originStarsPayment, originReaction, originGift, topup,\n  } = modal || {};\n\n  const shouldOpenOnBuy = originStarsPayment || originReaction || originGift || topup;\n\n  const ongoingTransactionAmount = originStarsPayment?.form?.invoice?.totalAmount\n    || originStarsPayment?.subscriptionInfo?.subscriptionPricing?.amount\n    || originReaction?.amount\n    || originGift?.gift.stars\n    || topup?.balanceNeeded;\n  const starsNeeded = ongoingTransactionAmount ? ongoingTransactionAmount - (balance?.amount || 0) : undefined;\n  const starsNeededText = useMemo(() => {\n    const global = getGlobal();\n\n    if (originReaction) {\n      const channel = selectChat(global, originReaction.chatId);\n      if (!channel) return undefined;\n      return oldLang('StarsNeededTextReactions', getChatTitle(oldLang, channel));\n    }\n\n    if (originStarsPayment) {\n      const bot = originStarsPayment.form?.botId ? selectUser(global, originStarsPayment.form.botId) : undefined;\n      if (!bot) return undefined;\n      return oldLang('StarsNeededText', getUserFullName(bot));\n    }\n\n    if (originGift) {\n      const peer = selectUser(global, originGift.peerId);\n      if (!peer) return undefined;\n      return oldLang('StarsNeededTextGift', getPeerTitle(lang, peer));\n    }\n\n    if (topup?.purpose === SUBSCRIPTION_PURPOSE) {\n      return oldLang('StarsNeededTextLink');\n    }\n\n    if (topup?.purpose === PAID_MESSAGES_PURPOSE) {\n      return lang('StarsNeededTextSendPaidMessages', undefined, {\n        withMarkdown: true,\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [originReaction, originStarsPayment, originGift, topup?.purpose, lang, oldLang]);\n\n  const shouldShowItems = Boolean(history?.all?.transactions.length && !shouldOpenOnBuy);\n  const shouldSuggestGifting = !shouldOpenOnBuy;\n\n  const transactionTabs: TabWithProperties[] = useMemo(() => {\n    return TRANSACTION_TABS_KEYS.map((key) => ({\n      title: lang(key),\n    }));\n  }, [lang]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      setSelectedTabIndex(0);\n      hideBuyOptions();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (shouldOpenOnBuy) {\n      showBuyOptions();\n      return;\n    }\n\n    hideBuyOptions();\n  }, [shouldOpenOnBuy]);\n\n  const tosText = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [isOpen, oldLang]);\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleLoadMoreTransactions = useLastCallback(() => {\n    loadStarsTransactions({\n      type: TRANSACTION_TYPES[selectedTabIndex],\n    });\n  });\n\n  const handleLoadMoreSubscriptions = useLastCallback(() => {\n    loadStarsSubscriptions();\n  });\n\n  const openStarsGiftingPickerModalHandler = useLastCallback(() => {\n    openStarsGiftingPickerModal({});\n  });\n\n  const handleBuyStars = useLastCallback((option: ApiStarTopupOption) => {\n    openInvoice({\n      type: 'stars',\n      stars: option.stars,\n      currency: option.currency,\n      amount: option.amount,\n    });\n  });\n\n  return (\n    <Modal\n      className={buildClassName(styles.root, !shouldForceHeight && !areBuyOptionsShown && styles.minimal)}\n      isOpen={isOpen}\n      onClose={closeStarsBalanceModal}\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => closeStarsBalanceModal()}\n          ariaLabel={lang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <BalanceBlock balance={balance} className={styles.modalBalance} />\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {oldLang('TelegramStars')}\n          </h2>\n        </div>\n        <div className={styles.section}>\n          <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n          <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n          <h2 className={styles.headerText}>\n            {starsNeeded ? oldLang('StarsNeededTitle', ongoingTransactionAmount) : oldLang('TelegramStars')}\n          </h2>\n          <div className={styles.description}>\n            {renderText(\n              starsNeededText || oldLang('TelegramStarsInfo'),\n              ['simple_markdown', 'emoji'],\n            )}\n          </div>\n          {canBuyPremium && !areBuyOptionsShown && (\n            <Button\n              className={styles.starButton}\n              onClick={showBuyOptions}\n            >\n              {oldLang('Star.List.BuyMoreStars')}\n            </Button>\n          )}\n          {canBuyPremium && !areBuyOptionsShown && shouldSuggestGifting && (\n            <Button\n              isText\n              noForcedUpperCase\n              className={styles.starButton}\n              onClick={openStarsGiftingPickerModalHandler}\n            >\n              {oldLang('TelegramStarsGift')}\n            </Button>\n          )}\n          {areBuyOptionsShown && starsBalanceState?.topupOptions && (\n            <StarTopupOptionList\n              starsNeeded={starsNeeded}\n              options={starsBalanceState.topupOptions}\n              onClick={handleBuyStars}\n            />\n          )}\n        </div>\n        {areBuyOptionsShown && (\n          <div className={styles.tos}>\n            {tosText}\n          </div>\n        )}\n        {shouldShowItems && Boolean(subscriptions?.list.length) && (\n          <div className={styles.section}>\n            <h3 className={styles.sectionTitle}>{oldLang('StarMySubscriptions')}</h3>\n            <div className={styles.subscriptions}>\n              {subscriptions?.list.map((subscription) => (\n                <StarsSubscriptionItem\n                  key={subscription.id}\n                  subscription={subscription}\n                />\n              ))}\n              {subscriptions?.nextOffset && (\n                <Button\n                  isText\n                  disabled={subscriptions.isLoading}\n                  size=\"smaller\"\n                  noForcedUpperCase\n                  className={styles.loadMore}\n                  onClick={handleLoadMoreSubscriptions}\n                >\n                  <Icon name=\"down\" className={styles.loadMoreIcon} />\n                  {oldLang('StarMySubscriptionsExpand')}\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n        {shouldShowItems && (\n          <div className={styles.container}>\n            <div className={styles.section}>\n              <Transition\n                name={lang.isRtl ? 'slideOptimizedRtl' : 'slideOptimized'}\n                activeKey={selectedTabIndex}\n                renderCount={TRANSACTION_TABS_KEYS.length}\n                shouldRestoreHeight\n                className={styles.transition}\n              >\n                <InfiniteScroll\n                  onLoadMore={handleLoadMoreTransactions}\n                  items={history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions}\n                  scrollContainerClosest={`.${styles.main}`}\n                  itemSelector={`.${TRANSACTION_ITEM_CLASS}`}\n                  className={styles.transactions}\n                  noFastList\n                  noScrollRestoreOnTop\n                >\n                  {history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions.map((transaction) => (\n                    <StarsTransactionItem\n                      key={`${transaction.id}-${transaction.isRefund}`}\n                      transaction={transaction}\n                      className={TRANSACTION_ITEM_CLASS}\n                    />\n                  ))}\n                </InfiniteScroll>\n              </Transition>\n            </div>\n            <TabList\n              className={styles.tabs}\n              tabClassName={styles.tab}\n              activeTab={selectedTabIndex}\n              tabs={transactionTabs}\n              onSwitchTab={setSelectedTabIndex}\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    const shouldForceHeight = Boolean(global.stars?.history?.all?.transactions.length);\n\n    return {\n      shouldForceHeight,\n      starsBalanceState: global.stars,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n    };\n  },\n)(StarsBalanceModal));\n","import React, { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMediaExtendedPreview, ApiMessage, ApiUser,\n} from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getCustomPeerFromInvite, getUserFullName } from '../../../global/helpers';\nimport {\n  selectChat, selectChatMessage, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport PeerBadge from '../../common/PeerBadge';\nimport PeerChip from '../../common/PeerChip';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport BalanceBlock from './BalanceBlock';\nimport PaidMediaThumb from './transaction/PaidMediaThumb';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsPayment'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  bot?: ApiUser;\n  paidMediaMessage?: ApiMessage;\n  paidMediaChat?: ApiChat;\n};\n\nconst StarPaymentModal = ({\n  modal,\n  bot,\n  starsBalanceState,\n  paidMediaMessage,\n  paidMediaChat,\n}: OwnProps & StateProps) => {\n  const { closeStarsPaymentModal, openStarsBalanceModal, sendStarPaymentForm } = getActions();\n  const [isLoading, markLoading, unmarkLoading] = useFlag();\n  const isOpen = Boolean(modal?.inputInvoice && starsBalanceState);\n\n  const prevModal = usePrevious(modal);\n  const renderingModal = modal || prevModal;\n\n  const { form, subscriptionInfo } = renderingModal || {};\n  const amount = form?.invoice?.totalAmount || subscriptionInfo?.subscriptionPricing?.amount;\n  const isBotSubscription = Boolean(form?.invoice.subscriptionPeriod);\n  const canShowPeerItem = !subscriptionInfo?.subscriptionPricing;\n\n  const photo = form?.photo;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkLoading();\n    }\n  }, [isOpen]);\n\n  const descriptionText = useMemo(() => {\n    if (!renderingModal?.inputInvoice) {\n      return '';\n    }\n\n    const botName = getUserFullName(bot);\n    const starsText = oldLang('Stars.Intro.PurchasedText.Stars', amount);\n\n    if (paidMediaMessage) {\n      const extendedMedia = paidMediaMessage.content.paidMedia!.extendedMedia as ApiMediaExtendedPreview[];\n      const areAllPhotos = extendedMedia.every((media) => !media.duration);\n      const areAllVideos = extendedMedia.every((media) => !!media.duration);\n\n      const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', extendedMedia.length)\n        : areAllVideos ? oldLang('Stars.Transfer.Videos', extendedMedia.length)\n          : oldLang('Media', extendedMedia.length);\n\n      const channelTitle = getChatTitle(oldLang, paidMediaChat!);\n      return oldLang('Stars.Transfer.UnlockInfo', [mediaText, channelTitle, starsText]);\n    }\n\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeText', {\n        chat: subscriptionInfo.title,\n        amount,\n      }, {\n        withNodes: true,\n        withMarkdown: true,\n        pluralValue: amount!,\n      });\n    }\n\n    if (isBotSubscription) {\n      return lang('StarsSubscribeBotText', {\n        name: form.title,\n        amount,\n        bot: botName,\n      }, {\n        pluralValue: amount!,\n      });\n    }\n\n    return oldLang('Stars.Transfer.Info', [form!.title, botName, starsText]);\n  }, [\n    renderingModal?.inputInvoice, bot, oldLang, amount, paidMediaMessage, subscriptionInfo, isBotSubscription, form,\n    paidMediaChat, lang,\n  ]);\n\n  const disclaimerText = useMemo(() => {\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeInfo', {\n        link: <SafeLink url={lang('StarsSubscribeInfoLink')} text={lang('StarsSubscribeInfoLinkText')} />,\n      }, {\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [subscriptionInfo, lang]);\n\n  const inviteCustomPeer = useMemo(() => {\n    if (!subscriptionInfo) {\n      return undefined;\n    }\n\n    return getCustomPeerFromInvite(subscriptionInfo);\n  }, [subscriptionInfo]);\n\n  const handlePayment = useLastCallback(() => {\n    const balance = starsBalanceState?.balance;\n    if (amount === undefined || balance === undefined) {\n      return;\n    }\n\n    if (amount > balance.amount) {\n      openStarsBalanceModal({\n        originStarsPayment: modal,\n      });\n      return;\n    }\n\n    sendStarPaymentForm({});\n    markLoading();\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.paymentContent}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      onClose={closeStarsPaymentModal}\n    >\n      <BalanceBlock balance={starsBalanceState?.balance} className={styles.modalBalance} />\n      <div className={styles.paymentImages} dir={oldLang.isRtl ? 'ltr' : 'rtl'}>\n        {paidMediaMessage ? (\n          <PaidMediaThumb media={paidMediaMessage.content.paidMedia!.extendedMedia} />\n        ) : inviteCustomPeer ? (\n          <>\n            <Avatar className={styles.paymentPhoto} peer={inviteCustomPeer} size=\"giant\" />\n            <StarIcon type=\"gold\" size=\"adaptive\" className={styles.avatarStar} />\n          </>\n        ) : (\n          <PeerBadge\n            peer={!photo ? bot : undefined}\n            avatarWebPhoto={photo}\n            avatarSize=\"giant\"\n            badgeIcon=\"star\"\n            badgeText={formatInteger(amount!)}\n            badgeClassName={styles.amountBadge}\n            className={styles.paymentPhoto}\n          />\n        )}\n        <img className={styles.paymentImageBackground} src={StarsBackground} alt=\"\" draggable={false} />\n      </div>\n      <h2 className={styles.headerText}>\n        {inviteCustomPeer ? oldLang('StarsSubscribeTitle') : oldLang('StarsConfirmPurchaseTitle')}\n      </h2>\n      {canShowPeerItem && <PeerChip className={styles.botItem} peerId={form?.botId} />}\n      <div className={styles.description}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <Button className={styles.paymentButton} size=\"smaller\" onClick={handlePayment} isLoading={isLoading}>\n        {lang(isBotSubscription ? 'StarsSubscribeBotButtonMonth' : 'StarsPay', {\n          amount: formatStarsAsIcon(lang, amount!, { asFont: true }),\n        }, {\n          withNodes: true,\n        })}\n      </Button>\n      {disclaimerText && (\n        <div className={buildClassName(styles.disclaimer, styles.smallerText)}>\n          {disclaimerText}\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const bot = modal?.form?.botId ? selectUser(global, modal.form.botId) : undefined;\n\n    const messageInputInvoice = modal?.inputInvoice?.type === 'message' ? modal.inputInvoice : undefined;\n    const message = messageInputInvoice\n      ? selectChatMessage(global, messageInputInvoice.chatId, messageInputInvoice.messageId) : undefined;\n    const chat = messageInputInvoice ? selectChat(global, messageInputInvoice.chatId) : undefined;\n    const isPaidMedia = message?.content.paidMedia;\n\n    return {\n      bot,\n      starsBalanceState: global.stars,\n      paidMediaMessage: isPaidMedia ? message : undefined,\n      paidMediaChat: isPaidMedia ? chat : undefined,\n    };\n  },\n)(StarPaymentModal));\n","import React, { memo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiUser } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectUser } from '../../../../global/selectors';\nimport { formatStarsAsText } from '../../../../util/localization/format';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\n\nimport Checkbox from '../../../ui/Checkbox';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  modal: TabState['chatRefundModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst ChatRefundModal = ({ modal, user }: OwnProps & StateProps) => {\n  const { closeChatRefundModal, addNoPaidMessagesException } = getActions();\n\n  const [shouldRefundStars, setShouldRefundStars] = useState(false);\n\n  const renderingModal = useCurrentOrPrev(modal);\n  const renderingUser = useCurrentOrPrev(user);\n\n  const { starsToRefund, userId } = renderingModal || {};\n\n  const lang = useLang();\n\n  const isOpen = Boolean(modal);\n\n  const handleConfirmRemoveFee = useLastCallback(() => {\n    closeChatRefundModal();\n    if (!userId) return;\n    addNoPaidMessagesException({ userId, shouldRefundCharged: shouldRefundStars });\n  });\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      onClose={closeChatRefundModal}\n      title={lang('RemoveFeeTitle')}\n      confirmLabel={lang('ConfirmRemoveMessageFee')}\n      confirmHandler={handleConfirmRemoveFee}\n    >\n      {lang('ConfirmDialogMessageRemoveFee', {\n        peer: renderingUser && getPeerTitle(lang, renderingUser),\n      }, {\n        withMarkdown: true,\n        withNodes: true,\n      })}\n      {\n        Boolean(starsToRefund) && (\n          <Checkbox\n            className=\"dialog-checkbox\"\n            label={lang('ConfirmDialogRemoveFeeRefundStars', {\n              amount: formatStarsAsText(lang, starsToRefund),\n            }, {\n              withMarkdown: true,\n              withNodes: true,\n            })}\n            checked={shouldRefundStars}\n            onCheck={setShouldRefundStars}\n          />\n        )\n      }\n    </ConfirmDialog>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const user = modal?.userId ? selectUser(global, modal.userId) : undefined;\n\n  return {\n    user,\n  };\n})(ChatRefundModal));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiStarTopupOption, ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport {\n  selectUser,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\nimport StarTopupOptionList from '../StarTopupOptionList';\n\nimport styles from './StarsGiftModal.module.scss';\n\nimport StarLogo from '../../../../assets/icons/StarLogo.svg';\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsGiftModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst AVATAR_SIZE = 100;\n\nconst StarsGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  user,\n}) => {\n  const {\n    closeStarsGiftModal, openInvoice, requestConfetti,\n  } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const dialogRef = useRef<HTMLDivElement>(null);\n\n  const isOpen = Boolean(modal?.isOpen);\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const oldLang = useOldLang();\n\n  const [selectedOption, setSelectedOption] = useState<ApiStarTopupOption | undefined>();\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n    }\n  }, [isOpen]);\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal, showConfetti]);\n\n  const handleClick = useLastCallback((option: ApiStarTopupOption) => {\n    if (!renderingModal) return;\n\n    setSelectedOption(option);\n    if (user) {\n      openInvoice({\n        type: 'starsgift',\n        userId: user.id,\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    } else {\n      openInvoice({\n        type: 'stars',\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    }\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClose = useLastCallback(() => {\n    closeStarsGiftModal();\n  });\n\n  function renderGiftTitle() {\n    if (renderingModal?.isCompleted) {\n      return user ? renderText(oldLang('Notification.StarsGift.SentYou',\n        formatCurrencyAsString(selectedOption!.amount, selectedOption!.currency, oldLang.code)), ['simple_markdown'])\n        : renderText(oldLang('StarsAcquiredInfo', selectedOption?.stars), ['simple_markdown']);\n    }\n\n    return user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars');\n  }\n\n  const bottomText = useMemo(() => {\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink\n        url={oldLang('StarsTOSLink')}\n        text={oldLang('lng_credits_summary_options_about_link')}\n      />,\n      parts[1],\n    ];\n  }, [oldLang]);\n\n  return (\n    <Modal\n      className={buildClassName(styles.modalDialog)}\n      contentClassName={styles.content}\n      dialogRef={dialogRef}\n      isSlim\n      onClose={handleClose}\n      isOpen={isOpen}\n    >\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => closeStarsGiftModal()}\n          ariaLabel={oldLang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars')}\n          </h2>\n        </div>\n        <div className={styles.headerInfo}>\n          {user ? (\n            <>\n              <Avatar\n                size={AVATAR_SIZE}\n                peer={user}\n                className={styles.avatar}\n              />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          ) : (\n            <>\n              <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          )}\n        </div>\n        <h2 className={buildClassName(styles.headerText, styles.center)}>\n          {renderGiftTitle()}\n        </h2>\n        <p className={styles.description}>\n          {user ? renderText(\n            oldLang('ActionGiftStarsSubtitle', getPeerTitle(oldLang, user)), ['simple_markdown'],\n          ) : oldLang('Stars.Purchase.GetStarsInfo')}\n        </p>\n        <div className={styles.section}>\n          <StarTopupOptionList\n            options={renderingModal?.starsGiftOptions}\n            onClick={handleClick}\n          />\n          <div className={styles.secondaryInfo}>\n            {bottomText}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const user = modal?.forUserId ? selectUser(global, modal.forUserId) : undefined;\n\n  return {\n    user,\n  };\n})(StarsGiftModal));\n","import type { ApiStarsAmount, ApiStarsTransaction } from '../../../../api/types';\nimport type { OldLangFn } from '../../../../hooks/useOldLang';\n\nimport { buildStarsTransactionCustomPeer } from '../../../../global/helpers/payments';\nimport {\n  type LangFn,\n} from '../../../../util/localization';\nimport { formatPercent } from '../../../../util/textFormat';\n\nexport function getTransactionTitle(oldLang: OldLangFn, lang: LangFn, transaction: ApiStarsTransaction) {\n  if (transaction.paidMessages) {\n    return lang(\n      'PaidMessageTransaction',\n      { count: transaction.paidMessages },\n      {\n        withNodes: true,\n        pluralValue: transaction.paidMessages,\n      },\n    );\n  }\n\n  if (transaction.isGiftResale) {\n    return isNegativeStarsAmount(transaction.stars)\n      ? lang('StarGiftSaleTransaction')\n      : lang('StarGiftPurchaseTransaction');\n  }\n\n  if (transaction.starRefCommision) {\n    return oldLang('StarTransactionCommission', formatPercent(transaction.starRefCommision));\n  }\n  if (transaction.isGiftUpgrade) return oldLang('Gift2TransactionUpgraded');\n  if (transaction.extendedMedia) return oldLang('StarMediaPurchase');\n  if (transaction.subscriptionPeriod) return transaction.title || oldLang('StarSubscriptionPurchase');\n  if (transaction.isReaction) return oldLang('StarsReactionsSent');\n  if (transaction.giveawayPostId) return oldLang('StarsGiveawayPrizeReceived');\n  if (transaction.isMyGift) return oldLang('StarsGiftSent');\n  if (transaction.isGift) return oldLang('StarsGiftReceived');\n  if (transaction.starGift) {\n    return isNegativeStarsAmount(transaction.stars) ? oldLang('Gift2TransactionSent') : oldLang('Gift2ConvertedTitle');\n  }\n\n  const customPeer = (transaction.peer && transaction.peer.type !== 'peer'\n    && buildStarsTransactionCustomPeer(transaction.peer)) || undefined;\n\n  if (customPeer) return customPeer.title || oldLang(customPeer.titleKey!);\n\n  return transaction.title;\n}\n\nexport function isNegativeStarsAmount(starsAmount: ApiStarsAmount) {\n  if (starsAmount.amount) return starsAmount.amount < 0;\n  return starsAmount.nanos < 0;\n}\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiStarsSubscription,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\n\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatInteger } from '../../../../util/textFormat';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\n\nimport styles from './StarsSubscriptionItem.module.scss';\n\ntype OwnProps = {\n  subscription: ApiStarsSubscription;\n};\n\nfunction selectProvidedPeer(peerId: string) {\n  return (global: GlobalState) => (\n    selectPeer(global, peerId)\n  );\n}\n\nconst StarsSubscriptionItem = ({ subscription }: OwnProps) => {\n  const { openStarsSubscriptionModal } = getActions();\n  const {\n    peerId, pricing, until, isCancelled, title, photo,\n  } = subscription;\n  const lang = useOldLang();\n\n  const peer = useSelector(selectProvidedPeer(peerId))!;\n\n  const handleClick = useLastCallback(() => {\n    openStarsSubscriptionModal({ subscription });\n  });\n\n  if (!peer) {\n    return undefined;\n  }\n\n  const hasExpired = until < Date.now() / 1000;\n  const formattedDate = formatDateToString(until * 1000, lang.code, true, 'long');\n\n  return (\n    <div className={styles.root} onClick={handleClick}>\n      <div className={styles.preview}>\n        <Avatar size=\"medium\" peer={peer} />\n        <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{renderText(getPeerTitle(lang, peer) || '')}</h3>\n        {title && (\n          <p className={styles.subtitle}>\n            {photo && <Avatar webPhoto={photo} size=\"micro\" />}\n            {renderText(title)}\n          </p>\n        )}\n        <p className={styles.description}>\n          {lang(\n            hasExpired ? 'StarsSubscriptionExpired'\n              : isCancelled ? 'StarsSubscriptionExpires' : 'StarsSubscriptionRenews',\n            formattedDate,\n          )}\n        </p>\n      </div>\n      <div className={styles.status}>\n        {(isCancelled || hasExpired) ? (\n          <div className={styles.statusEnded}>\n            {lang(hasExpired ? 'StarsSubscriptionStatusExpired' : 'StarsSubscriptionStatusCancelled')}\n          </div>\n        ) : (\n          <>\n            <div className={styles.statusPricing}>\n              <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n              <span className={styles.amount}>\n                {formatInteger(pricing.amount)}\n              </span>\n            </div>\n            <div className={styles.statusPeriod}>{lang('StarsParticipantSubscriptionPerMonth')}</div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsSubscriptionItem);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../../config';\nimport { isApiPeerUser } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './StarsSubscriptionModal.module.scss';\n\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsSubscriptionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n};\n\nconst StarsSubscriptionModal: FC<OwnProps & StateProps> = ({\n  modal, peer,\n}) => {\n  const {\n    closeStarsSubscriptionModal,\n    fulfillStarsSubscription,\n    changeStarsSubscription,\n    checkChatInvite,\n    loadStarStatus,\n    openInvoice,\n  } = getActions();\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const { subscription } = modal || {};\n\n  const buttonState = useMemo(() => {\n    if (!subscription) {\n      return 'hidden';\n    }\n\n    if (subscription.canRefulfill) {\n      return 'refulfill';\n    }\n\n    const isActive = subscription.until > Date.now() / 1000;\n    if (isActive && !subscription.isCancelled) {\n      return 'cancel';\n    }\n\n    if (isActive && subscription.isCancelled) {\n      return 'renew';\n    }\n\n    const canRestart = subscription.chatInviteHash || subscription.invoiceSlug;\n    if (!isActive && canRestart) {\n      return 'restart';\n    }\n\n    return 'ok';\n  }, [subscription]);\n\n  const handleButtonClick = useLastCallback(() => {\n    if (!subscription) {\n      return;\n    }\n\n    switch (buttonState) {\n      case 'refulfill': {\n        fulfillStarsSubscription({ id: subscription.id });\n        break;\n      }\n      case 'restart': {\n        if (subscription.chatInviteHash) {\n          checkChatInvite({ hash: subscription.chatInviteHash });\n        } else if (subscription.invoiceSlug) {\n          openInvoice({\n            type: 'slug',\n            slug: subscription.invoiceSlug,\n          });\n        }\n        loadStarStatus();\n        break;\n      }\n      case 'renew': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: false });\n        break;\n      }\n      case 'cancel': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: true });\n        break;\n      }\n    }\n    closeStarsSubscriptionModal();\n  });\n\n  const starModalData = useMemo(() => {\n    if (!subscription || !peer) {\n      return undefined;\n    }\n\n    const {\n      pricing, until, isCancelled, canRefulfill, photo, title, hasBotCancelled,\n    } = subscription;\n\n    const isBotSubscription = isApiPeerUser(peer);\n\n    const header = (\n      <div className={styles.header}>\n        <div className={styles.avatarWrapper}>\n          <Avatar peer={!photo ? peer : undefined} webPhoto={photo} size=\"giant\" />\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"adaptive\" />\n        </div>\n        <img\n          className={buildClassName(styles.starsBackground)}\n          src={StarsBackground}\n          alt=\"\"\n          draggable={false}\n        />\n        <h1 className={styles.title}>{title || oldLang('StarsSubscriptionTitle')}</h1>\n        <p className={styles.amount}>\n          {lang('StarsPerMonth', {\n            amount: pricing.amount,\n          }, {\n            withNodes: true,\n            specialReplacement: {\n              [STARS_ICON_PLACEHOLDER]: <StarIcon className={styles.amountStar} size=\"adaptive\" type=\"gold\" />,\n            },\n          })}\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      oldLang(isBotSubscription ? 'StarsSubscriptionBot' : 'StarsSubscriptionChannel'),\n      { chatId: peer.id },\n    ]);\n\n    if (title) {\n      tableData.push([\n        oldLang('StarsSubscriptionBotProduct'),\n        title,\n      ]);\n    }\n\n    const hasExpired = until < Date.now() / 1000;\n    tableData.push([\n      oldLang(hasExpired ? 'StarsSubscriptionUntilExpired'\n        : isCancelled ? 'StarsSubscriptionUntilExpires' : 'StarsSubscriptionUntilRenews'),\n      formatDateTimeToString(until * 1000, oldLang.code, true),\n    ]);\n\n    const footerTos = lang('StarsTransactionTOS', {\n      link: <SafeLink url={lang('StarsTransactionTOSLink')} text={lang('StarsTransactionTOSLinkText')} />,\n    }, {\n      withNodes: true,\n    });\n\n    const footer = (\n      <span className={styles.footer}>\n        <p className={styles.secondary}>{footerTos}</p>\n        {isCancelled && (\n          <p className={styles.danger}>\n            {oldLang(hasBotCancelled ? 'StarsSubscriptionBotCancelledText' : 'StarsSubscriptionCancelledText')}\n          </p>\n        )}\n        {canRefulfill && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionRefulfillInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionExpiredInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && !hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionCancelInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {buttonState !== 'hidden' && (\n          <Button\n            size=\"smaller\"\n            color={buttonState === 'cancel' ? 'danger' : 'primary'}\n            isText={buttonState === 'cancel'}\n            onClick={handleButtonClick}\n          >\n            {oldLang(\n              buttonState === 'cancel' ? 'StarsSubscriptionCancel'\n                : buttonState === 'refulfill' ? 'StarsSubscriptionRefulfill'\n                  : buttonState === 'restart' ? 'StarsSubscriptionAgain'\n                    : buttonState === 'renew' ? 'StarsSubscriptionRenew' : 'OK',\n            )}\n          </Button>\n        )}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [buttonState, lang, oldLang, peer, subscription]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(subscription)}\n      className={styles.modal}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      onClose={closeStarsSubscriptionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.subscription.peerId;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      peer,\n    };\n  },\n)(StarsSubscriptionModal));\n","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiMediaExtendedPreview, BoughtPaidMedia } from '../../../../api/types';\n\nimport { getMediaHash, getMediaThumbUri } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useMedia from '../../../../hooks/useMedia';\n\nimport Icon from '../../../common/icons/Icon';\nimport MediaSpoiler from '../../../common/MediaSpoiler';\n\nimport styles from './PaidMediaThumb.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  media: ApiMediaExtendedPreview[] | BoughtPaidMedia[];\n  isTransactionPreview?: boolean;\n  onClick?: NoneToVoidFunction;\n};\n\nconst THUMB_LIMIT = 3;\nconst PREVIEW_THUMB_LIMIT = 2;\n\nconst PaidMediaThumb = ({\n  media, className, isTransactionPreview, onClick,\n}: OwnProps) => {\n  const count = Math.min(media.length, isTransactionPreview ? PREVIEW_THUMB_LIMIT : THUMB_LIMIT);\n  const isLocked = 'mediaType' in media[0];\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        styles[`itemCount${count}`],\n        isTransactionPreview && styles.preview,\n        className,\n      )}\n      dir=\"rtl\"\n      onClick={onClick}\n    >\n      {media.slice(0, count).reverse().map((item, i, arr) => {\n        const realIndex = arr.length - i - 1;\n        return 'mediaType' in item ? (\n          <MediaSpoiler\n            className={styles.thumb}\n            isVisible\n            width={item.width}\n            height={item.height}\n            thumbDataUri={item.thumbnail?.dataUri}\n          />\n        ) : (\n          <SingleMediaThumb\n            className={buildClassName(isTransactionPreview && realIndex > 0 && styles.noOutline)}\n            boughtMedia={item}\n            index={realIndex}\n          />\n        );\n      })}\n      {isLocked && (\n        <div className={styles.count}>\n          <Icon name=\"stars-lock\" />\n          {media.length > 1 ? media.length : ''}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SingleMediaThumb({\n  boughtMedia,\n  index,\n  className,\n}: {\n  boughtMedia: BoughtPaidMedia;\n  index?: number;\n  className?: string;\n}) {\n  const media = (boughtMedia.video || boughtMedia.photo)!;\n  const mediaHash = getMediaHash(media, 'pictogram');\n  const thumb = getMediaThumbUri(media);\n\n  const mediaBlob = useMedia(mediaHash);\n\n  return (\n    <div className={buildClassName(styles.thumb, index !== undefined && `stars-transaction-media-${index}`, className)}>\n      {thumb && <img className={styles.blurry} src={thumb} alt=\"\" />}\n      {mediaBlob && <img className={styles.full} src={mediaBlob} alt=\"\" />}\n    </div>\n  );\n}\n\nexport default memo(PaidMediaThumb);\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransaction,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { buildStarsTransactionCustomPeer, formatStarsTransactionAmount } from '../../../../global/helpers/payments';\nimport { getPeerTitle } from '../../../../global/helpers/peers';\nimport { selectPeer } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { CUSTOM_PEER_PREMIUM } from '../../../../util/objects/customPeer';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport renderText from '../../../common/helpers/renderText';\nimport { getTransactionTitle, isNegativeStarsAmount } from '../helpers/transaction';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionItem.module.scss';\n\ntype OwnProps = {\n  transaction: ApiStarsTransaction;\n  className?: string;\n};\n\nconst GIFT_STICKER_SIZE = 36;\n\nfunction selectOptionalPeer(peerId?: string) {\n  return (global: GlobalState) => (\n    peerId ? selectPeer(global, peerId) : undefined\n  );\n}\n\nconst StarsTransactionItem = ({ transaction, className }: OwnProps) => {\n  const { openStarsTransactionModal } = getActions();\n  const {\n    date,\n    stars,\n    photo,\n    peer: transactionPeer,\n    extendedMedia,\n    subscriptionPeriod,\n  } = transaction;\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const peerId = transactionPeer.type === 'peer' ? transactionPeer.id : undefined;\n  const peer = useSelector(selectOptionalPeer(peerId));\n  const starGift = transaction.starGift;\n  const isUniqueGift = starGift?.type === 'starGiftUnique';\n  const giftSticker = starGift && getStickerFromGift(starGift);\n\n  const data = useMemo(() => {\n    let title = getTransactionTitle(oldLang, lang, transaction);\n    let description;\n    let status: string | undefined;\n    let avatarPeer: ApiPeer | CustomPeer | undefined;\n\n    if (transaction.peer.type === 'peer') {\n      description = peer && getPeerTitle(oldLang, peer);\n      avatarPeer = peer || CUSTOM_PEER_PREMIUM;\n    } else {\n      const customPeer = buildStarsTransactionCustomPeer(transaction.peer);\n      title = customPeer.title || oldLang(customPeer.titleKey!);\n      description = oldLang(customPeer.subtitleKey!);\n      avatarPeer = customPeer;\n    }\n\n    if (transaction.isGiftUpgrade && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.isGiftResale && transaction.starGift?.type === 'starGiftUnique') {\n      description = lang('GiftUnique', { title: transaction.starGift.title, number: transaction.starGift.number });\n    }\n\n    if (transaction.photo) {\n      avatarPeer = undefined;\n    }\n\n    if (transaction.isRefund) {\n      status = oldLang('StarsRefunded');\n    }\n\n    if (transaction.hasFailed) {\n      status = oldLang('StarsFailed');\n    }\n\n    if (transaction.isPending) {\n      status = oldLang('StarsPending');\n    }\n\n    return {\n      title,\n      description,\n      avatarPeer,\n      status,\n    };\n  }, [oldLang, lang, peer, transaction]);\n\n  const previewContent = useMemo(() => {\n    if (isUniqueGift) {\n      const { backdrop } = getGiftAttributes(starGift)!;\n      const backgroundColors = [backdrop!.centerColor, backdrop!.edgeColor];\n\n      return (\n        <>\n          <RadialPatternBackground\n            className={styles.uniqueGiftBackground}\n            backgroundColors={backgroundColors}\n          />\n          <AnimatedIconFromSticker\n            className={styles.giftSticker}\n            sticker={giftSticker}\n            size={GIFT_STICKER_SIZE}\n            play={false}\n          />\n        </>\n      );\n    }\n\n    if (giftSticker) {\n      return (\n        <AnimatedIconFromSticker\n          className={styles.giftSticker}\n          sticker={giftSticker}\n          size={GIFT_STICKER_SIZE}\n          play={false}\n        />\n      );\n    }\n\n    if (extendedMedia) {\n      return <PaidMediaThumb media={extendedMedia} isTransactionPreview />;\n    }\n\n    return (\n      <>\n        <Avatar size=\"medium\" webPhoto={photo} peer={data.avatarPeer} />\n        {Boolean(subscriptionPeriod) && (\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n        )}\n      </>\n    );\n  }, [isUniqueGift, extendedMedia, photo, data.avatarPeer, subscriptionPeriod, starGift, giftSticker]);\n\n  const handleClick = useLastCallback(() => {\n    openStarsTransactionModal({ transaction });\n  });\n\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={handleClick}>\n      <div className={styles.preview}>\n        {previewContent}\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{data.title}</h3>\n        {data.description && (\n          <p className={styles.description}>{renderText(data.description)}</p>\n        )}\n        <p className={styles.date}>\n          {formatDateTimeToString(date * 1000, oldLang.code, true)}\n          {data.status && ` — (${data.status})`}\n        </p>\n      </div>\n      <div className={styles.stars}>\n        <span\n          className={buildClassName(styles.amount, isNegativeStarsAmount(stars) ? styles.negative : styles.positive)}\n        >\n          {formatStarsTransactionAmount(lang, stars)}\n        </span>\n        <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsTransactionItem);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransactionPeer, ApiSticker,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { MediaViewerOrigin } from '../../../../types';\n\nimport { getMessageLink } from '../../../../global/helpers';\nimport {\n  buildStarsTransactionCustomPeer,\n  formatStarsTransactionAmount,\n} from '../../../../global/helpers/payments';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForStars,\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon } from '../../../../util/localization/format';\nimport { formatPercent } from '../../../../util/textFormat';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { getTransactionTitle, isNegativeStarsAmount } from '../helpers/transaction';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport SafeLink from '../../../common/SafeLink';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport UniqueGiftHeader from '../../gift/UniqueGiftHeader';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionModal.module.scss';\n\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsTransactionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n  canPlayAnimatedEmojis?: boolean;\n  topSticker?: ApiSticker;\n  paidMessageCommission?: number;\n};\n\nconst StarsTransactionModal: FC<OwnProps & StateProps> = ({\n  modal,\n  peer,\n  canPlayAnimatedEmojis,\n  topSticker,\n  paidMessageCommission,\n}) => {\n  const { showNotification, openMediaViewer, closeStarsTransactionModal } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const { transaction } = modal || {};\n\n  const handleOpenMedia = useLastCallback(() => {\n    const media = transaction?.extendedMedia;\n    if (!media) return;\n\n    openMediaViewer({\n      origin: MediaViewerOrigin.StarsTransaction,\n      standaloneMedia: media.flatMap((item) => Object.values(item)),\n    });\n  });\n\n  const starModalData = useMemo(() => {\n    if (!transaction) {\n      return undefined;\n    }\n\n    const {\n      giveawayPostId, photo, stars, isGiftUpgrade, starGift, isGiftResale,\n    } = transaction;\n\n    const gift = transaction?.starGift;\n    const isUniqueGift = gift?.type === 'starGiftUnique';\n    const sticker = transaction?.starGift ? getStickerFromGift(transaction.starGift) : topSticker;\n\n    const giftAttributes = isUniqueGift ? getGiftAttributes(gift) : undefined;\n\n    const customPeer = (transaction.peer && transaction.peer.type !== 'peer'\n        && buildStarsTransactionCustomPeer(transaction.peer)) || undefined;\n\n    const peerId = transaction.peer?.type === 'peer' ? transaction.peer.id : undefined;\n    const toName = transaction.peer && oldLang(getStarsPeerTitleKey(transaction.peer));\n\n    const title = getTransactionTitle(oldLang, lang, transaction);\n\n    const messageLink = peer && transaction.messageId && !isGiftUpgrade\n      ? getMessageLink(peer, undefined, transaction.messageId) : undefined;\n    const giveawayMessageLink = peer && giveawayPostId && getMessageLink(peer, undefined, giveawayPostId);\n\n    const media = transaction.extendedMedia;\n\n    const mediaAmount = media?.length || 0;\n    const areAllPhotos = media?.every((m) => !m.video);\n    const areAllVideos = media?.every((m) => !m.photo);\n\n    const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', mediaAmount)\n      : areAllVideos ? oldLang('Stars.Transfer.Videos', mediaAmount)\n        : oldLang('Media', mediaAmount);\n\n    const description = transaction.description\n      || (isGiftUpgrade && starGift?.type === 'starGiftUnique' ? starGift.title : undefined)\n      || (media ? mediaText : undefined);\n\n    const shouldDisplayAvatar = !media && !sticker;\n    const avatarPeer = !photo ? (peer || customPeer) : undefined;\n\n    const uniqueGiftHeader = isUniqueGift && (\n      <div className={buildClassName(styles.header, styles.uniqueGift)}>\n        <UniqueGiftHeader\n          backdropAttribute={giftAttributes!.backdrop!}\n          patternAttribute={giftAttributes!.pattern!}\n          modelAttribute={giftAttributes!.model!}\n          title={gift.title}\n          subtitle={lang('GiftInfoCollectible', { number: gift.number })}\n          resellPrice={transaction.stars}\n        />\n      </div>\n    );\n\n    const regularHeader = (\n      <div className={styles.header}>\n        {media && (\n          <PaidMediaThumb\n            className={buildClassName(styles.mediaPreview, 'transaction-media-preview')}\n            media={media}\n            onClick={handleOpenMedia}\n          />\n        )}\n        {!media && sticker && (\n          <AnimatedIconFromSticker\n            key={transaction.id}\n            sticker={sticker}\n            play={canPlayAnimatedEmojis}\n            noLoop\n          />\n        )}\n        {shouldDisplayAvatar && (\n          <Avatar peer={avatarPeer} webPhoto={photo} size=\"giant\" />\n        )}\n        {!sticker && (\n          <img\n            className={buildClassName(styles.starsBackground)}\n            src={StarsBackground}\n            alt=\"\"\n            draggable={false}\n          />\n        )}\n        {title && <h1 className={styles.title}>{title}</h1>}\n        <p className={styles.description}>{description}</p>\n        <p className={styles.amount}>\n          <span\n            className={buildClassName(styles.amount, isNegativeStarsAmount(stars) ? styles.negative : styles.positive)}\n          >\n            {formatStarsTransactionAmount(lang, stars)}\n          </span>\n          <StarIcon type=\"gold\" size=\"middle\" />\n          {transaction.isRefund && (\n            <p className={styles.refunded}>{lang('Refunded')}</p>\n          )}\n        </p>\n        {transaction.paidMessages && transaction.starRefCommision && paidMessageCommission\n        && (\n          <p className={styles.description}>\n            {lang(\n              'PaidMessageTransactionDescription',\n              { percent: formatPercent(paidMessageCommission / 10) },\n              {\n                withNodes: true,\n                withMarkdown: true,\n              },\n            )}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    if (transaction && !transaction.paidMessages && !isGiftResale) {\n      tableData.push([\n        oldLang('StarsTransaction.StarRefReason.Title'),\n        oldLang('StarsTransaction.StarRefReason.Program'),\n      ]);\n    }\n\n    if (isGiftUpgrade) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        oldLang('StarGiftReasonUpgrade'),\n      ]);\n    }\n\n    if (isGiftResale) {\n      tableData.push([\n        oldLang('StarGiftReason'),\n        isNegativeStarsAmount(transaction.stars)\n          ? lang('StarGiftSaleTransaction')\n          : lang('StarGiftPurchaseTransaction'),\n      ]);\n    }\n\n    let peerLabel;\n    if (isGiftUpgrade) {\n      peerLabel = oldLang('Stars.Transaction.GiftFrom');\n    } else if (isNegativeStarsAmount(stars) || transaction.isMyGift) {\n      peerLabel = oldLang('Stars.Transaction.To');\n    } else if (transaction.starRefCommision && !transaction.paidMessages && !isGiftResale) {\n      peerLabel = oldLang('StarsTransaction.StarRefReason.Miniapp');\n    } else if (peerId) {\n      peerLabel = oldLang('Star.Transaction.From');\n    } else {\n      peerLabel = oldLang('Stars.Transaction.Via');\n    }\n\n    tableData.push([\n      peerLabel,\n      peerId ? { chatId: peerId } : toName || '',\n    ]);\n\n    if (transaction.starRefCommision && transaction.paidMessages) {\n      tableData.push([\n        lang('PaidMessageTransactionTotal'),\n        formatStarsAsIcon(lang,\n          transaction.stars.amount / ((100 - transaction.starRefCommision) / 100),\n          { asFont: false, className: styles.starIcon, containerClassName: styles.totalStars }),\n      ]);\n    }\n\n    if (messageLink) {\n      tableData.push([oldLang('Stars.Transaction.Reaction.Post'), <SafeLink url={messageLink} text={messageLink} />]);\n    }\n\n    if (giveawayMessageLink) {\n      tableData.push([oldLang('BoostReason'), <SafeLink url={giveawayMessageLink} text={oldLang('Giveaway')} />]);\n      tableData.push([oldLang('Gift'), oldLang('Stars', transaction.stars, 'i')]);\n    }\n\n    if (transaction.id) {\n      tableData.push([\n        oldLang('Stars.Transaction.Id'),\n        (\n          <>\n            <div\n              className={styles.tid}\n              onClick={() => {\n                copyTextToClipboard(transaction.id!);\n                showNotification({\n                  message: oldLang('StarsTransactionIDCopied'),\n                });\n              }}\n            >\n              {transaction.id}\n            </div>\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </>\n        ),\n      ]);\n    }\n\n    tableData.push([\n      oldLang('Stars.Transaction.Date'),\n      formatDateTimeToString(transaction.date * 1000, oldLang.code, true),\n    ]);\n\n    const footerText = oldLang('lng_credits_box_out_about');\n    const footerTextParts = footerText.split('{link}');\n\n    const footer = (\n      <span className={styles.footer}>\n        {footerTextParts[0]}\n        <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />\n        {footerTextParts[1]}\n      </span>\n    );\n\n    return {\n      header: isUniqueGift ? uniqueGiftHeader : regularHeader,\n      tableData,\n      footer,\n    };\n  }, [transaction, oldLang, lang, peer, canPlayAnimatedEmojis, topSticker, paidMessageCommission]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(transaction)}\n      className={styles.modal}\n      hasBackdrop={transaction?.starGift?.type === 'starGiftUnique'}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      buttonText={oldLang('OK')}\n      onClose={closeStarsTransactionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.transaction?.peer?.type === 'peer' && modal.transaction.peer.id;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n    const paidMessageCommission = global.appConfig?.starsPaidMessageCommissionPermille;\n\n    const starCount = modal?.transaction.stars;\n    const starsGiftSticker = modal?.transaction.isGift && selectGiftStickerForStars(global, starCount?.amount);\n\n    return {\n      peer,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n      topSticker: starsGiftSticker,\n      paidMessageCommission,\n    };\n  },\n)(StarsTransactionModal));\n\nfunction getStarsPeerTitleKey(peer: ApiStarsTransactionPeer) {\n  switch (peer.type) {\n    case 'appStore':\n      return 'AppStore';\n    case 'playMarket':\n      return 'PlayMarket';\n    case 'fragment':\n      return 'Fragment';\n    case 'premiumBot':\n      return 'StarsTransactionBot';\n    case 'ads':\n      return 'StarsTransactionAds';\n    case 'api':\n      return 'Stars.Intro.Transaction.TelegramBotApi.Subtitle';\n    default:\n      return 'Stars.Transaction.Unsupported.Title';\n  }\n}\n","import { useMemo, useRef } from '../../lib/teact/teact';\n\n/**\n * Use this hook to bind `<Transition />` animation to changes in the dependency array.\n * Use optional parameter `noAnimation` if you want to prevent the animation even if the dependency array changes.\n*/\nexport function useTransitionActiveKey(deps: unknown[], noAnimation?: boolean): number {\n  const activeKey = useRef(0);\n  let didUpdate = false;\n\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  useMemo(() => { activeKey.current += 1; didUpdate = true; }, deps);\n\n  if (noAnimation && didUpdate) activeKey.current -= 1;\n\n  return activeKey.current;\n}\n","import {\n  getIsHeavyAnimating, useCallback, useRef, useState,\n} from '../lib/teact/teact';\n\nimport useForceUpdate from './useForceUpdate';\nimport useHeavyAnimation from './useHeavyAnimation';\nimport useRunDebounced from './useRunDebounced';\nimport useSyncEffect from './useSyncEffect';\n\nexport default function useDebouncedMemo<R extends any, D extends any[]>(\n  resolverFn: () => R, ms: number, dependencies: D,\n): R | undefined {\n  const [value, setValue] = useState<R>();\n  const { isFrozen, updateWhenUnfrozen } = useHeavyAnimationFreeze();\n  const runDebounced = useRunDebounced(ms, true);\n\n  useSyncEffect(() => {\n    if (isFrozen) {\n      updateWhenUnfrozen();\n      return;\n    }\n\n    runDebounced(() => {\n      setValue(resolverFn());\n    });\n  // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, [...dependencies, isFrozen]);\n\n  return value;\n}\n\nfunction useHeavyAnimationFreeze() {\n  const isPending = useRef(false);\n\n  const updateWhenUnfrozen = useCallback(() => {\n    isPending.current = true;\n  }, []);\n\n  const forceUpdate = useForceUpdate();\n  const handleUnfreeze = useCallback(() => {\n    if (!isPending.current) {\n      return;\n    }\n\n    isPending.current = false;\n    forceUpdate();\n  }, [forceUpdate]);\n  useHeavyAnimation(noop, handleUnfreeze);\n\n  return {\n    isFrozen: getIsHeavyAnimating(),\n    updateWhenUnfrozen,\n  };\n}\n\nfunction noop() {\n}\n","import { useState } from '../lib/teact/teact';\n\nimport type { ApiChat } from '../api/types';\n\nimport { callApi } from '../api/gramjs';\nimport useAsync from './useAsync';\nimport useDebouncedMemo from './useDebouncedMemo';\nimport useLastCallback from './useLastCallback';\n\nconst DEBOUNCE_TIMEOUT = 300;\n\nexport async function peerGlobalSearch(query: string) {\n  const searchResult = await callApi('searchChats', { query });\n  if (!searchResult) return undefined;\n\n  const ids = [...searchResult.accountResultIds, ...searchResult.globalResultIds];\n\n  return ids;\n}\n\nexport function prepareChatMemberSearch(chat: ApiChat) {\n  return async (query: string) => {\n    const searchResult = await callApi('fetchMembers', {\n      chat,\n      memberFilter: 'search',\n      query,\n    });\n\n    return searchResult?.members?.map((member) => member.userId) || [];\n  };\n}\n\nexport default function usePeerSearch({\n  query,\n  queryFn = peerGlobalSearch,\n  defaultValue,\n  debounceTimeout = DEBOUNCE_TIMEOUT,\n  isDisabled,\n}: {\n  query: string;\n  queryFn?: (query: string) => Promise<string[] | undefined>;\n  defaultValue?: string[];\n  debounceTimeout?: number;\n  isDisabled?: boolean;\n}) {\n  const debouncedQuery = useDebouncedMemo(() => query, debounceTimeout, [query]);\n  const [currentResultsQuery, setCurrentResultsQuery] = useState<string>('');\n  const searchQuery = !query ? query : debouncedQuery; // Ignore debounce if query is empty\n  const queryCallback = useLastCallback(queryFn);\n\n  const result = useAsync(async () => {\n    if (!searchQuery || isDisabled) {\n      setCurrentResultsQuery('');\n      return Promise.resolve(defaultValue);\n    }\n\n    const answer = await queryCallback(searchQuery);\n    setCurrentResultsQuery(searchQuery);\n    return answer;\n  }, [searchQuery, defaultValue, queryCallback, isDisabled], defaultValue);\n\n  return {\n    ...result,\n    currentResultsQuery,\n  };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftTransferPreview-module__root\",\"giftPreview\":\"GiftTransferPreview-module__giftPreview\",\"backdrop\":\"GiftTransferPreview-module__backdrop\",\"arrow\":\"GiftTransferPreview-module__arrow\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsGiftingPickerModal-module__root\",\"transition\":\"StarsGiftingPickerModal-module__transition\",\"main\":\"StarsGiftingPickerModal-module__main\",\"filter\":\"StarsGiftingPickerModal-module__filter\",\"title\":\"StarsGiftingPickerModal-module__title\",\"buttons\":\"StarsGiftingPickerModal-module__buttons\",\"picker\":\"StarsGiftingPickerModal-module__picker\",\"avatars\":\"StarsGiftingPickerModal-module__avatars\",\"center\":\"StarsGiftingPickerModal-module__center\",\"description\":\"StarsGiftingPickerModal-module__description\",\"premiumFeatures\":\"StarsGiftingPickerModal-module__premiumFeatures\",\"options\":\"StarsGiftingPickerModal-module__options\",\"button\":\"StarsGiftingPickerModal-module__button\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftComposer-module__root\",\"header\":\"GiftComposer-module__header\",\"spacer\":\"GiftComposer-module__spacer\",\"title\":\"GiftComposer-module__title\",\"balance-container\":\"GiftComposer-module__balance-container\",\"balanceContainer\":\"GiftComposer-module__balance-container\",\"balance-caption\":\"GiftComposer-module__balance-caption\",\"balanceCaption\":\"GiftComposer-module__balance-caption\",\"star-balance\":\"GiftComposer-module__star-balance\",\"starBalance\":\"GiftComposer-module__star-balance\",\"balance\":\"GiftComposer-module__balance\",\"optionsSection\":\"GiftComposer-module__optionsSection\",\"checkboxTitle\":\"GiftComposer-module__checkboxTitle\",\"actionMessageView\":\"GiftComposer-module__actionMessageView\",\"messageInput\":\"GiftComposer-module__messageInput\",\"limited\":\"GiftComposer-module__limited\",\"footer\":\"GiftComposer-module__footer\",\"switcher\":\"GiftComposer-module__switcher\",\"switcherStarIcon\":\"GiftComposer-module__switcherStarIcon\",\"description\":\"GiftComposer-module__description\",\"main-button\":\"GiftComposer-module__main-button\",\"mainButton\":\"GiftComposer-module__main-button\",\"star\":\"GiftComposer-module__star\",\"background\":\"GiftComposer-module__background\",\"customBgImage\":\"GiftComposer-module__customBgImage\",\"customBgColor\":\"GiftComposer-module__customBgColor\",\"withTransition\":\"GiftComposer-module__withTransition\",\"blurred\":\"GiftComposer-module__blurred\",\"withRightColumn\":\"GiftComposer-module__withRightColumn\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"GiftItem-module__container\",\"starGift\":\"GiftItem-module__starGift\",\"monthsDescription\":\"GiftItem-module__monthsDescription\",\"description\":\"GiftItem-module__description\",\"buy\":\"GiftItem-module__buy\",\"star\":\"GiftItem-module__star\",\"amount\":\"GiftItem-module__amount\",\"starsPriceBlock\":\"GiftItem-module__starsPriceBlock\",\"starsPriceIcon\":\"GiftItem-module__starsPriceIcon\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftModal-module__root\",\"transition\":\"GiftModal-module__transition\",\"content\":\"GiftModal-module__content\",\"main\":\"GiftModal-module__main\",\"giftSection\":\"GiftModal-module__giftSection\",\"section\":\"GiftModal-module__section\",\"starGiftsContainer\":\"GiftModal-module__starGiftsContainer\",\"premiumGiftsGallery\":\"GiftModal-module__premiumGiftsGallery\",\"header\":\"GiftModal-module__header\",\"headerSlide\":\"GiftModal-module__headerSlide\",\"headerText\":\"GiftModal-module__headerText\",\"hiddenHeader\":\"GiftModal-module__hiddenHeader\",\"commonHeaderText\":\"GiftModal-module__commonHeaderText\",\"closeButton\":\"GiftModal-module__closeButton\",\"balance\":\"GiftModal-module__balance\",\"avatars\":\"GiftModal-module__avatars\",\"logoBackground\":\"GiftModal-module__logoBackground\",\"center\":\"GiftModal-module__center\",\"description\":\"GiftModal-module__description\",\"starGiftsDescription\":\"GiftModal-module__starGiftsDescription\",\"boostIcon\":\"GiftModal-module__boostIcon\",\"optionBottom\":\"GiftModal-module__optionBottom\",\"secondaryInfo\":\"GiftModal-module__secondaryInfo\",\"footer\":\"GiftModal-module__footer\",\"starGiftsTransition\":\"GiftModal-module__starGiftsTransition\"};","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"StarGiftCategoryList-module__list\",\"item-selected\":\"StarGiftCategoryList-module__item-selected\",\"itemSelected\":\"StarGiftCategoryList-module__item-selected\",\"item\":\"StarGiftCategoryList-module__item\",\"selected-item\":\"StarGiftCategoryList-module__selected-item\",\"selectedItem\":\"StarGiftCategoryList-module__selected-item\",\"star\":\"StarGiftCategoryList-module__star\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"UniqueGiftHeader-module__root\",\"radialPattern\":\"UniqueGiftHeader-module__radialPattern\",\"amount\":\"UniqueGiftHeader-module__amount\",\"sticker\":\"UniqueGiftHeader-module__sticker\",\"transition\":\"UniqueGiftHeader-module__transition\",\"transitionSlide\":\"UniqueGiftHeader-module__transitionSlide\",\"title\":\"UniqueGiftHeader-module__title\",\"subtitle\":\"UniqueGiftHeader-module__subtitle\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"GiftInfoModal-module__modal\",\"header\":\"GiftInfoModal-module__header\",\"title\":\"GiftInfoModal-module__title\",\"description\":\"GiftInfoModal-module__description\",\"soldOut\":\"GiftInfoModal-module__soldOut\",\"headerSplitButton\":\"GiftInfoModal-module__headerSplitButton\",\"headerButton\":\"GiftInfoModal-module__headerButton\",\"giftResalePriceContainer\":\"GiftInfoModal-module__giftResalePriceContainer\",\"giftResalePriceStar\":\"GiftInfoModal-module__giftResalePriceStar\",\"left\":\"GiftInfoModal-module__left\",\"right\":\"GiftInfoModal-module__right\",\"footer\":\"GiftInfoModal-module__footer\",\"footerDescription\":\"GiftInfoModal-module__footerDescription\",\"unknown\":\"GiftInfoModal-module__unknown\",\"giftValue\":\"GiftInfoModal-module__giftValue\",\"uniqueAttribute\":\"GiftInfoModal-module__uniqueAttribute\",\"uniqueGift\":\"GiftInfoModal-module__uniqueGift\",\"starAmountIcon\":\"GiftInfoModal-module__starAmountIcon\",\"modalHeader\":\"GiftInfoModal-module__modalHeader\",\"modalCloseButton\":\"GiftInfoModal-module__modalCloseButton\",\"ownerAddress\":\"GiftInfoModal-module__ownerAddress\",\"copyIcon\":\"GiftInfoModal-module__copyIcon\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftRecipientPicker-module__root\",\"picker\":\"GiftRecipientPicker-module__picker\"};","// extracted by mini-css-extract-plugin\nexport default {\"descriptionContainer\":\"GiftResalePriceComposerModal-module__descriptionContainer\",\"descriptionPrice\":\"GiftResalePriceComposerModal-module__descriptionPrice\",\"inputPrice\":\"GiftResalePriceComposerModal-module__inputPrice\"};","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"GiftStatusInfoModal-module__header\",\"profileBlock\":\"GiftStatusInfoModal-module__profileBlock\",\"titleContainer\":\"GiftStatusInfoModal-module__titleContainer\",\"radialPattern\":\"GiftStatusInfoModal-module__radialPattern\",\"lockIcon\":\"GiftStatusInfoModal-module__lockIcon\",\"avatar\":\"GiftStatusInfoModal-module__avatar\",\"userTitle\":\"GiftStatusInfoModal-module__userTitle\",\"status\":\"GiftStatusInfoModal-module__status\",\"giftTitle\":\"GiftStatusInfoModal-module__giftTitle\",\"infoDescription\":\"GiftStatusInfoModal-module__infoDescription\",\"footer\":\"GiftStatusInfoModal-module__footer\"};","// extracted by mini-css-extract-plugin\nexport default {\"footer\":\"GiftUpgradeModal-module__footer\",\"footerButton\":\"GiftUpgradeModal-module__footerButton\"};","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"GiftWithdrawModal-module__header\",\"giftPreview\":\"GiftWithdrawModal-module__giftPreview\",\"backdrop\":\"GiftWithdrawModal-module__backdrop\",\"description\":\"GiftWithdrawModal-module__description\",\"arrow\":\"GiftWithdrawModal-module__arrow\",\"noPassword\":\"GiftWithdrawModal-module__noPassword\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"PaidReactionModal-module__content\",\"title\":\"PaidReactionModal-module__title\",\"slider\":\"PaidReactionModal-module__slider\",\"description\":\"PaidReactionModal-module__description\",\"itemInfo\":\"PaidReactionModal-module__itemInfo\",\"itemTitle\":\"PaidReactionModal-module__itemTitle\",\"itemSubtitle\":\"PaidReactionModal-module__itemSubtitle\",\"itemIcon\":\"PaidReactionModal-module__itemIcon\",\"sendAsPeerButtonAvatar\":\"PaidReactionModal-module__sendAsPeerButtonAvatar\",\"sendAsPeerMenuButton\":\"PaidReactionModal-module__sendAsPeerMenuButton\",\"buttonDownIcon\":\"PaidReactionModal-module__buttonDownIcon\",\"sendAsPeerMenuBubble\":\"PaidReactionModal-module__sendAsPeerMenuBubble\",\"sendAsPeerMenu\":\"PaidReactionModal-module__sendAsPeerMenu\",\"sendAsPeersMenuContainer\":\"PaidReactionModal-module__sendAsPeersMenuContainer\",\"headerControlPanel\":\"PaidReactionModal-module__headerControlPanel\",\"separator\":\"PaidReactionModal-module__separator\",\"checkBox\":\"PaidReactionModal-module__checkBox\",\"topLabel\":\"PaidReactionModal-module__topLabel\",\"top\":\"PaidReactionModal-module__top\",\"topBadge\":\"PaidReactionModal-module__topBadge\",\"buttonStar\":\"PaidReactionModal-module__buttonStar\",\"topPeer\":\"PaidReactionModal-module__topPeer\",\"disclaimer\":\"PaidReactionModal-module__disclaimer\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarSlider-module__root\",\"slider\":\"StarSlider-module__slider\",\"sparkles\":\"StarSlider-module__sparkles\",\"progress\":\"StarSlider-module__progress\",\"floatingBadgeWrapper\":\"StarSlider-module__floatingBadgeWrapper\",\"floatingBadge\":\"StarSlider-module__floatingBadge\",\"floatingBadgeText\":\"StarSlider-module__floatingBadgeText\",\"floatingBadgeTriangle\":\"StarSlider-module__floatingBadgeTriangle\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsBalanceModal-module__root\",\"minimal\":\"StarsBalanceModal-module__minimal\",\"transition\":\"StarsBalanceModal-module__transition\",\"main\":\"StarsBalanceModal-module__main\",\"container\":\"StarsBalanceModal-module__container\",\"section\":\"StarsBalanceModal-module__section\",\"sectionTitle\":\"StarsBalanceModal-module__sectionTitle\",\"tos\":\"StarsBalanceModal-module__tos\",\"logo\":\"StarsBalanceModal-module__logo\",\"logoBackground\":\"StarsBalanceModal-module__logoBackground\",\"headerHext\":\"StarsBalanceModal-module__headerHext\",\"description\":\"StarsBalanceModal-module__description\",\"header\":\"StarsBalanceModal-module__header\",\"starHeaderText\":\"StarsBalanceModal-module__starHeaderText\",\"botItem\":\"StarsBalanceModal-module__botItem\",\"hiddenHeader\":\"StarsBalanceModal-module__hiddenHeader\",\"closeButton\":\"StarsBalanceModal-module__closeButton\",\"addStarsButton\":\"StarsBalanceModal-module__addStarsButton\",\"addStarsIcon\":\"StarsBalanceModal-module__addStarsIcon\",\"balanceBlock\":\"StarsBalanceModal-module__balanceBlock\",\"balanceInfo\":\"StarsBalanceModal-module__balanceInfo\",\"smallerText\":\"StarsBalanceModal-module__smallerText\",\"balanceBottom\":\"StarsBalanceModal-module__balanceBottom\",\"modalBalance\":\"StarsBalanceModal-module__modalBalance\",\"starButton\":\"StarsBalanceModal-module__starButton\",\"paymentContent\":\"StarsBalanceModal-module__paymentContent\",\"paymentImages\":\"StarsBalanceModal-module__paymentImages\",\"paymentPhoto\":\"StarsBalanceModal-module__paymentPhoto\",\"avatarStar\":\"StarsBalanceModal-module__avatarStar\",\"paymentImageBackground\":\"StarsBalanceModal-module__paymentImageBackground\",\"paymentButton\":\"StarsBalanceModal-module__paymentButton\",\"paymentButtonStar\":\"StarsBalanceModal-module__paymentButtonStar\",\"transactions\":\"StarsBalanceModal-module__transactions\",\"subscriptions\":\"StarsBalanceModal-module__subscriptions\",\"tabs\":\"StarsBalanceModal-module__tabs\",\"disclaimer\":\"StarsBalanceModal-module__disclaimer\",\"amountBadge\":\"StarsBalanceModal-module__amountBadge\",\"loadMore\":\"StarsBalanceModal-module__loadMore\",\"loadMoreIcon\":\"StarsBalanceModal-module__loadMoreIcon\"};","// extracted by mini-css-extract-plugin\nexport default {\"modalDialog\":\"StarsGiftModal-module__modalDialog\",\"content\":\"StarsGiftModal-module__content\",\"main\":\"StarsGiftModal-module__main\",\"headerInfo\":\"StarsGiftModal-module__headerInfo\",\"logo\":\"StarsGiftModal-module__logo\",\"logoBackground\":\"StarsGiftModal-module__logoBackground\",\"description\":\"StarsGiftModal-module__description\",\"section\":\"StarsGiftModal-module__section\",\"header\":\"StarsGiftModal-module__header\",\"starHeaderText\":\"StarsGiftModal-module__starHeaderText\",\"hiddenHeader\":\"StarsGiftModal-module__hiddenHeader\",\"closeButton\":\"StarsGiftModal-module__closeButton\",\"avatar\":\"StarsGiftModal-module__avatar\",\"center\":\"StarsGiftModal-module__center\",\"secondaryInfo\":\"StarsGiftModal-module__secondaryInfo\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsSubscriptionItem-module__root\",\"info\":\"StarsSubscriptionItem-module__info\",\"status\":\"StarsSubscriptionItem-module__status\",\"statusPricing\":\"StarsSubscriptionItem-module__statusPricing\",\"amount\":\"StarsSubscriptionItem-module__amount\",\"title\":\"StarsSubscriptionItem-module__title\",\"description\":\"StarsSubscriptionItem-module__description\",\"subtitle\":\"StarsSubscriptionItem-module__subtitle\",\"statusPeriod\":\"StarsSubscriptionItem-module__statusPeriod\",\"statusEnded\":\"StarsSubscriptionItem-module__statusEnded\",\"preview\":\"StarsSubscriptionItem-module__preview\",\"subscriptionStar\":\"StarsSubscriptionItem-module__subscriptionStar\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"StarsSubscriptionModal-module__modal\",\"header\":\"StarsSubscriptionModal-module__header\",\"title\":\"StarsSubscriptionModal-module__title\",\"amount\":\"StarsSubscriptionModal-module__amount\",\"footer\":\"StarsSubscriptionModal-module__footer\",\"starsBackground\":\"StarsSubscriptionModal-module__starsBackground\",\"avatarWrapper\":\"StarsSubscriptionModal-module__avatarWrapper\",\"subscriptionStar\":\"StarsSubscriptionModal-module__subscriptionStar\",\"amountStar\":\"StarsSubscriptionModal-module__amountStar\",\"secondary\":\"StarsSubscriptionModal-module__secondary\",\"danger\":\"StarsSubscriptionModal-module__danger\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"PaidMediaThumb-module__root\",\"preview\":\"PaidMediaThumb-module__preview\",\"count\":\"PaidMediaThumb-module__count\",\"thumb\":\"PaidMediaThumb-module__thumb\",\"noOutline\":\"PaidMediaThumb-module__noOutline\",\"itemCount1\":\"PaidMediaThumb-module__itemCount1\",\"itemCount2\":\"PaidMediaThumb-module__itemCount2\",\"itemCount3\":\"PaidMediaThumb-module__itemCount3\",\"blurry\":\"PaidMediaThumb-module__blurry\",\"full\":\"PaidMediaThumb-module__full\",\"fadeIn\":\"PaidMediaThumb-module__fadeIn\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsTransactionItem-module__root\",\"info\":\"StarsTransactionItem-module__info\",\"stars\":\"StarsTransactionItem-module__stars\",\"amount\":\"StarsTransactionItem-module__amount\",\"title\":\"StarsTransactionItem-module__title\",\"description\":\"StarsTransactionItem-module__description\",\"date\":\"StarsTransactionItem-module__date\",\"positive\":\"StarsTransactionItem-module__positive\",\"negative\":\"StarsTransactionItem-module__negative\",\"preview\":\"StarsTransactionItem-module__preview\",\"subscriptionStar\":\"StarsTransactionItem-module__subscriptionStar\",\"uniqueGiftBackground\":\"StarsTransactionItem-module__uniqueGiftBackground\",\"giftSticker\":\"StarsTransactionItem-module__giftSticker\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"StarsTransactionModal-module__modal\",\"positive\":\"StarsTransactionModal-module__positive\",\"negative\":\"StarsTransactionModal-module__negative\",\"header\":\"StarsTransactionModal-module__header\",\"uniqueGift\":\"StarsTransactionModal-module__uniqueGift\",\"amount\":\"StarsTransactionModal-module__amount\",\"title\":\"StarsTransactionModal-module__title\",\"description\":\"StarsTransactionModal-module__description\",\"tid\":\"StarsTransactionModal-module__tid\",\"refunded\":\"StarsTransactionModal-module__refunded\",\"totalStars\":\"StarsTransactionModal-module__totalStars\",\"starIcon\":\"StarsTransactionModal-module__starIcon\",\"footer\":\"StarsTransactionModal-module__footer\",\"starsBackground\":\"StarsTransactionModal-module__starsBackground\",\"copyIcon\":\"StarsTransactionModal-module__copyIcon\",\"mediaPreview\":\"StarsTransactionModal-module__mediaPreview\",\"subtitle\":\"StarsTransactionModal-module__subtitle\",\"starGiftSticker\":\"StarsTransactionModal-module__starGiftSticker\"};"],"names":["default","StarsGiftModal","StarsGiftingPickerModal","StarsBalanceModal","StarPaymentModal","StarsTransactionInfoModal","StarsSubscriptionModal","PaidReactionModal","GiftModal","GiftRecipientPicker","GiftInfoModal","GiftResalePriceComposerModal","GiftUpgradeModal","GiftStatusInfoModal","GiftWithdrawModal","GiftTransferModal","ChatRefundModal","React","memo","useMemo","getGiftAttributes","REM","AnimatedIconFromSticker","Avatar","Icon","RadialPatternBackground","styles","AVATAR_SIZE","GIFT_STICKER_SIZE","GiftTransferPreview","peer","gift","giftAttributes","undefined","createElement","className","root","giftPreview","backdrop","backgroundColors","centerColor","edgeColor","patternColor","patternIcon","pattern","sticker","size","model","name","arrow","avatar","useState","getActions","getGlobal","withGlobal","SERVICE_NOTIFICATIONS_USER_ID","isDeletedUser","isUserBot","filterPeersByQuery","unique","sortChatIds","useLastCallback","useOldLang","PeerPicker","PickerModal","isOpen","currentUserId","activeListIds","archivedListIds","userIds","closeStarsGiftingPickerModal","openStarsGiftModal","oldLang","searchQuery","setSearchQuery","displayedUserIds","usersById","users","byId","combinedIds","filteredUserIds","ids","query","type","filter","id","user","isSupport","handleSelectedUserIdsChange","newSelectedId","length","forUserId","onClose","title","hasCloseButton","shouldAdaptToSearch","withFixedHeight","confirmButtonText","onEnter","picker","itemIds","filterValue","filterPlaceholder","onFilterChange","isSearchable","withDefaultPadding","withStatus","onSelectedIdChange","global","chats","listIds","contactList","active","archived","useEffect","MAIN_THREAD_ID","getPeerTitle","isApiPeerUser","selectPeer","selectPeerPaidMessagesStars","selectTabState","selectTheme","selectThemeValues","selectUserFullInfo","buildClassName","buildStyle","formatCurrency","formatStarsAsIcon","useCustomBackground","useLang","PremiumProgress","ActionMessage","Button","Link","ListItem","Switcher","TextArea","LIMIT_DISPLAY_THRESHOLD","GiftComposer","giftByStars","peerId","captionLimit","theme","isBackgroundBlurred","backgroundColor","customBackground","isPaymentFormLoading","starBalance","paidMessagesStars","areUniqueStarGiftsDisallowed","shouldDisallowLimitedStarGifts","sendStarGift","sendPremiumGiftByStars","openInvoice","openGiftUpgradeModal","openStarsBalanceModal","lang","giftMessage","setGiftMessage","shouldHideName","setShouldHideName","shouldPayForUpgrade","setShouldPayForUpgrade","shouldPayByStars","setShouldPayByStars","customBackgroundValue","isStarGift","hasPremiumByStars","isPeerUser","isSelf","localMessage","currentGift","chatId","isOutgoing","senderId","date","Math","floor","Date","now","content","action","mediaType","amount","currency","months","message","text","isNameHidden","starsToConvert","canUpgrade","alreadyPaidUpgradeStars","upgradeStars","fromId","handleGiftMessageChange","e","target","value","handleShouldHideNameChange","handleShouldPayForUpgradeChange","toggleShouldPayByStars","handleOpenUpgradePreview","giftId","handleGetMoreStars","handleMainButtonClick","shouldUpgrade","userId","option","canUseStarsPayment","renderOptionsSection","symbolsLeft","optionsSection","messageInput","onChange","label","maxLength","maxLengthIndicator","toString","switcher","narrow","ripple","onClick","stars","switcherStarIcon","withNodes","checked","description","link","isPrimary","withMarkdown","disabled","receiver","renderFooter","asFont","footer","availabilityRemains","progress","availabilityTotal","rightText","count","leftText","limited","mainButton","isLoading","bgClassName","background","withTransition","customBgImage","customBgColor","blurred","actionMessageView","inert","style","key","threadId","appearanceOrder","spacer","isBlurred","userFullInfo","isGiftForSelf","disallowedGifts","shouldDisallowUniqueStarGifts","tabState","balance","appConfig","starGiftMaxMessageLength","selectCanPlayAnimatedEmojis","selectGiftStickerForDuration","formatCurrencyAsString","GiftRibbon","GiftItemPremium","canPlayAnimatedEmojis","baseMonthAmount","optionByStars","handleGiftClick","perMonth","discount","ceil","renderMonths","caption","pluralValue","monthsDescription","container","tabIndex","role","play","noLoop","nonInteractive","buy","pill","fluid","starsPriceBlock","starsPriceIcon","Boolean","color","percent","useRef","useFlag","useOnIntersect","GiftItemStar","observeIntersection","openGiftInfoModal","ref","shouldPlay","isLimited","isSoldOut","entry","isIntersecting","starGift","withSparkleEffect","star","STARS_CURRENCY_CODE","getUserFullName","isApiPeerChat","throttle","useCurrentOrPrev","useIntersectionObserver","SafeLink","Modal","Transition","BalanceBlock","GiftSendingOptions","StarGiftCategoryList","StarsBackground","INTERSECTION_THROTTLE","SCROLL_THROTTLE","runThrottledForScroll","cb","modal","starGiftsById","starGiftIdsByCategory","closeGiftModal","dialogRef","transitionRef","giftHeaderRef","scrollerRef","renderingModal","chat","selectedGift","setSelectedGift","shouldShowMainScreenHeader","setShouldShowMainScreenHeader","isMainScreenHeaderForStarGifts","setIsMainScreenHeaderForStarGifts","isGiftScreenHeaderForStarGifts","setIsGiftScreenHeaderForStarGifts","selectedCategory","setSelectedCategory","areAllGiftsDisallowed","shouldDisallowPremiumGifts","disallowedGiftTypes","Object","values","every","areUnlimitedStarGiftsDisallowed","shouldDisallowUnlimitedStarGifts","areLimitedStarGiftsDisallowed","allGifts","gifts","filteredGifts","sort","prevGift","giftsByStars","mapGifts","Map","forEach","find","starsGift","set","baseGift","reduce","prev","observe","rootRef","throttleMs","isDisabled","isGiftScreen","shouldShowHeader","isHeaderForStarGifts","handleScroll","currentTarget","scrollTop","current","top","headerTop","getBoundingClientRect","transitionTop","giftPremiumDescription","url","starGiftDescription","renderTextFilters","renderGiftPremiumHeader","headerText","center","renderGiftPremiumDescription","renderStarGiftsHeader","renderStarGiftsDescription","starGiftsDescription","renderStarGifts","filteredGiftIds","starGiftsContainer","map","renderPremiumGifts","premiumGiftsGallery","get","onCategoryChanged","category","handleCloseButtonClick","renderMainScreen","main","onScroll","avatars","logoBackground","src","alt","draggable","Fragment","activeKey","getCategoryKey","starGiftsTransition","isBackButton","buttonClassName","isSlim","contentClassName","modalDialog","isLowStackPriority","closeButton","round","ariaLabel","withAddButton","header","hiddenHeader","Number","slideClassName","headerSlide","commonHeaderText","transition","forPeerId","starGifts","boostPerSentGift","boostsPerSentGift","idsByCategory","useHorizontalScroll","StarIcon","starCategories","keys","a","b","handleItemClick","renderCategoryName","renderCategoryItem","item","selectedItem","isInteger","list","formatStarsTransactionAmount","useTransitionActiveKey","STICKER_SIZE","UniqueGiftHeader","modelAttribute","backdropAttribute","patternAttribute","subtitle","resellPrice","subtitleColor","textColor","radialPatternBackdrop","backdropColors","radialPattern","transitionSlide","direction","getHasAdminRight","selectUser","copyTextToClipboard","formatDateTimeToString","formatStarsAsText","CUSTOM_PEER_HIDDEN","getServerTime","formatPercent","getStickerFromGift","renderTextWithEntities","BadgeButton","GiftMenuItems","ConfirmDialog","DropdownMenu","TableInfoModal","fromPeer","targetPeer","starGiftMaxConvertPeriod","hasAdminRights","currentUserEmojiStatus","collectibleEmojiStatuses","tonExplorerUrl","currentUser","closeGiftInfoModal","changeGiftVisibility","convertGiftToStars","openChatWithInfo","focusMessage","showNotification","buyStarGift","isConvertConfirmOpen","openConvertConfirm","closeConvertConfirm","isConfirmModalOpen","setIsConfirmModalOpen","renderingFromPeer","renderingTargetPeer","isTargetChat","typeGift","isSavedGift","savedGift","isSender","canConvertDifference","conversionLeft","giftSticker","hasConvertOption","isGiftUnique","uniqueGift","canFocusUpgrade","upgradeMsgId","canManage","inputGift","resellPriceInStars","canBuyGift","giftOwnerTitle","ownerName","ownerId","owner","handleClose","handleFocusUpgraded","giftChat","messageId","handleTriggerVisibility","isUnsaved","shouldUnsave","handleConvertToStars","handleOpenUpgradeModal","handleBuyGift","closeConfirmModal","handleConfirmBuyGift","slug","SettingsMenuButton","onTrigger","headerButton","left","icon","renderFooterButton","noForcedUpperCase","isShiny","saleDateInfo","firstSaleDate","code","lastSaleDate","modalData","isConverted","canConvert","isVisibleForMe","getTitle","uniqueGiftContextMenu","trigger","positionX","uniqueGiftModalHeader","modalHeader","giftResalePriceContainer","giftResalePriceStar","headerSplitButton","right","moreIcon","uniqueGiftHeader","number","regularHeader","soldOut","tableData","hasFrom","push","unknown","titleKey","starsValue","giftValue","starAmountIcon","total","ownerAddress","originalDetails","copyIcon","withEmojiStatus","uniqueAttribute","rarityPercent","issued","issuedCount","totalCount","recipientId","openChat","recipient","sender","formattedDate","recipientLink","senderLink","tonLink","giftAddress","footerDescription","shouldSkipModal","hasBackdrop","withBalanceBar","noDefaultTitle","confirmLabel","confirmHandler","emojiStatus","statuses","selectCanGift","closeGiftRecipientPicker","openGiftModal","idsWithSelf","concat","filteredPeerIds","selectedId","forceShowSelf","InputText","starsStargiftResaleCommissionPermille","starsStargiftResaleAmountMin","starsStargiftResaleAmountMax","starsUsdWithdrawRate","closeGiftResalePriceComposerModal","updateStarGiftPrice","price","setPrice","hasPrice","handleChangePrice","parseFloat","result","isNaN","min","handleSellGift","variables","commission","isPriceCorrect","inputPrice","inputMode","teactExperimentControlled","descriptionContainer","toFixed","descriptionPrice","configPermille","starsUsdWithdrawRateX1000","selectIsCurrentUserPremium","useCustomEmoji","FullNameTitle","TableAboutModal","isCurrentUserPremium","closeGiftStatusInfoModal","setEmojiStatus","patternDocumentId","onWearClick","customEmoji","mockPeerWithStatus","profileBlock","userTitle","noFake","noVerified","statusSparklesColor","status","titleContainer","giftTitle","infoDescription","listItemData","lockIcon","ALL_FOLDER_ID","MEMO_EMPTY_ARRAY","useFolderManagerForOrderedIds","usePeerSearch","contactIds","closeGiftTransferModal","openGiftWithdrawModal","transferGift","setSelectedId","renderingSelectedPeerId","renderingSelectedPeer","orderedChatIds","sortedLocalIds","foundIds","currentResultsQuery","defaultValue","categories","isCustomPeer","avatarIcon","peerColorId","handleCategoryChange","displayIds","handleTransfer","transferStars","ignoreFreeze","onSelectedCategoryChange","withPeerUsernames","noScrollRestore","ApiMediaFormat","getStickerMediaHash","fetch","useInterval","Checkbox","PREVIEW_UPDATE_INTERVAL","closeGiftUpgradeModal","upgradeGift","renderingRecipient","shouldKeepOriginalDetails","setShouldKeepOriginalDetails","previewAttributes","setPreviewAttributes","handleUpgrade","updatePreviewAttributes","sampleAttributes","getRandomAttributes","attributes","patternStickers","attr","modelStickers","mediaHashes","hash","BlobUrl","footerButton","onCheck","previousSelection","models","patterns","backdrops","randomModel","random","randomPattern","randomBackdrop","SettingsScreens","getDays","PasswordForm","FRAGMENT_PEER","customPeerAvatarColor","hasPassword","passwordHint","closeGiftWithdrawModal","clearGiftWithdrawError","processStarGiftWithdrawal","openSettingsScreen","shouldShowPassword","setShouldShowPassword","exportDelay","canExportAt","max","handleSubmit","password","handleSetUpPassword","screen","TwoFaDisabled","exportHint","days","noPassword","shouldShowSubmit","placeholder","error","errorKey","withRegular","clearError","hint","isPasswordVisible","shouldResetValue","onChangePasswordVisibility","submitLabel","onSubmit","settings","byKey","twoFaSettings","STARS_ICON_PLACEHOLDER","selectChat","selectChatMessage","formatInteger","renderText","useAppLayout","PeerBadge","MenuItem","Separator","StarSlider","MAX_TOP_REACTORS","DEFAULT_STARS_AMOUNT","MAX_REACTION_AMOUNT","ANONYMOUS_PEER","maxAmount","defaultPrivacy","sendPaidReactionsAsPeerIds","closePaidReactionModal","addLocalPaidReaction","loadSendPaidReactionsAs","starsAmount","setStarsAmount","isTouched","markTouched","unmarkTouched","shouldSendAsAnonymous","setShouldSendAsAnonymous","sendAsPeerId","setSendAsPeerId","senderPeer","isMobile","handleShowInTopSendersChange","handleAmountChange","filteredMyReactorIds","unshift","canChangeSendAsPeer","currentReactor","reactions","topReactors","reactor","isMy","isAnonymous","includes","handleSend","isPrivate","shouldIgnoreDefaultPrivacy","handleSendAsPeerChange","renderMenuItem","isSelected","itemInfo","itemTitle","itemSubtitle","itemIcon","SendAsPeerMenuButton","sendAsPeerMenuButton","sendAsPeerButtonAvatar","buttonDownIcon","sendAsPeersMenu","sendAsPeerMenu","bubbleClassName","sendAsPeerMenuBubble","autoClose","all","hasCurrentSender","myReactorAmount","isCurrentReactor","localAmount","slice","chatTitle","hasAbsoluteCloseButton","sendAsPeersMenuContainer","headerControlPanel","modalBalance","slider","maxValue","topLabel","countText","topPeer","badgeText","badgeIcon","badgeClassName","topBadge","separator","checkBox","specialReplacement","buttonStar","disclaimer","paidReactionMaxAmount","paidReactionPrivacy","requestMeasure","requestMutation","useEffectOnce","useResizeObserver","AnimatedCounter","Sparkles","DEFAULT_POINTS","floatingBadgeRef","points","i","setValue","getProgress","updateSafeBadgePosition","badge","parent","parentElement","safeMinX","offsetLeft","offsetWidth","safeMaxX","setProperty","handleChange","event","newValue","getValue","floatingBadgeWrapper","floatingBadge","floatingBadgeText","floatingBadgeIcon","floatingBadgeTriangle","width","height","viewBox","fill","x1","x2","y1","y2","offset","d","preset","sparkles","step","pointIndex","findIndex","point","prevPoint","nextPoint","formatStarsAmount","balanceBlock","balanceInfo","smallerText","balanceBottom","addStarsButton","addStarsIcon","PAID_MESSAGES_PURPOSE","getChatTitle","selectIsPremiumPurchaseBlocked","InfiniteScroll","TabList","StarTopupOptionList","StarsSubscriptionItem","StarsTransactionItem","StarLogo","TRANSACTION_TYPES","TRANSACTION_TABS_KEYS","TRANSACTION_ITEM_CLASS","SUBSCRIPTION_PURPOSE","starsBalanceState","canBuyPremium","shouldForceHeight","closeStarsBalanceModal","loadStarsTransactions","loadStarsSubscriptions","openStarsGiftingPickerModal","history","subscriptions","isHeaderHidden","setHeaderHidden","selectedTabIndex","setSelectedTabIndex","areBuyOptionsShown","showBuyOptions","hideBuyOptions","originStarsPayment","originReaction","originGift","topup","shouldOpenOnBuy","ongoingTransactionAmount","form","invoice","totalAmount","subscriptionInfo","subscriptionPricing","balanceNeeded","starsNeeded","starsNeededText","channel","bot","botId","purpose","shouldShowItems","transactions","shouldSuggestGifting","transactionTabs","tosText","parts","split","handleLoadMoreTransactions","handleLoadMoreSubscriptions","openStarsGiftingPickerModalHandler","handleBuyStars","minimal","starHeaderText","section","logo","starButton","isText","topupOptions","options","tos","sectionTitle","subscription","nextOffset","loadMore","loadMoreIcon","isRtl","renderCount","shouldRestoreHeight","onLoadMore","items","scrollContainerClosest","itemSelector","noFastList","noScrollRestoreOnTop","transaction","isRefund","tabs","tabClassName","tab","activeTab","onSwitchTab","getCustomPeerFromInvite","usePrevious","PeerChip","PaidMediaThumb","paidMediaMessage","paidMediaChat","closeStarsPaymentModal","sendStarPaymentForm","markLoading","unmarkLoading","inputInvoice","prevModal","isBotSubscription","subscriptionPeriod","canShowPeerItem","photo","descriptionText","botName","starsText","extendedMedia","paidMedia","areAllPhotos","media","duration","areAllVideos","mediaText","channelTitle","disclaimerText","inviteCustomPeer","handlePayment","paymentContent","paymentImages","dir","paymentPhoto","avatarStar","avatarWebPhoto","avatarSize","amountBadge","paymentImageBackground","botItem","paymentButton","messageInputInvoice","isPaidMedia","closeChatRefundModal","addNoPaidMessagesException","shouldRefundStars","setShouldRefundStars","renderingUser","starsToRefund","handleConfirmRemoveFee","shouldRefundCharged","closeStarsGiftModal","requestConfetti","selectedOption","setSelectedOption","showConfetti","dialog","querySelector","withStars","isCompleted","handleClick","renderGiftTitle","bottomText","headerInfo","starsGiftOptions","secondaryInfo","buildStarsTransactionCustomPeer","getTransactionTitle","paidMessages","isGiftResale","isNegativeStarsAmount","starRefCommision","isGiftUpgrade","isReaction","giveawayPostId","isMyGift","isGift","customPeer","nanos","formatDateToString","useSelector","selectProvidedPeer","openStarsSubscriptionModal","pricing","until","isCancelled","hasExpired","preview","subscriptionStar","info","webPhoto","statusEnded","statusPricing","statusPeriod","closeStarsSubscriptionModal","fulfillStarsSubscription","changeStarsSubscription","checkChatInvite","loadStarStatus","buttonState","canRefulfill","isActive","canRestart","chatInviteHash","invoiceSlug","handleButtonClick","starModalData","hasBotCancelled","avatarWrapper","starsBackground","amountStar","footerTos","secondary","danger","prevModalData","renderingModalData","getMediaHash","getMediaThumbUri","useMedia","MediaSpoiler","THUMB_LIMIT","PREVIEW_THUMB_LIMIT","isTransactionPreview","isLocked","reverse","arr","realIndex","thumb","isVisible","thumbDataUri","thumbnail","dataUri","SingleMediaThumb","noOutline","boughtMedia","index","video","mediaHash","mediaBlob","blurry","full","CUSTOM_PEER_PREMIUM","selectOptionalPeer","openStarsTransactionModal","transactionPeer","isUniqueGift","data","avatarPeer","subtitleKey","hasFailed","isPending","previewContent","uniqueGiftBackground","negative","positive","MediaViewerOrigin","getMessageLink","selectGiftStickerForStars","StarsTransactionModal","topSticker","paidMessageCommission","openMediaViewer","closeStarsTransactionModal","handleOpenMedia","origin","StarsTransaction","standaloneMedia","flatMap","toName","getStarsPeerTitleKey","messageLink","giveawayMessageLink","mediaAmount","m","shouldDisplayAvatar","mediaPreview","refunded","peerLabel","starIcon","containerClassName","totalStars","tid","footerText","footerTextParts","buttonText","starsPaidMessageCommissionPermille","starCount","starsGiftSticker","deps","noAnimation","didUpdate","getIsHeavyAnimating","useCallback","useForceUpdate","useHeavyAnimation","useRunDebounced","useSyncEffect","useDebouncedMemo","resolverFn","ms","dependencies","isFrozen","updateWhenUnfrozen","useHeavyAnimationFreeze","runDebounced","forceUpdate","handleUnfreeze","noop","callApi","useAsync","DEBOUNCE_TIMEOUT","peerGlobalSearch","searchResult","accountResultIds","globalResultIds","prepareChatMemberSearch","memberFilter","members","member","queryFn","debounceTimeout","debouncedQuery","setCurrentResultsQuery","queryCallback","Promise","resolve","answer"],"sourceRoot":""}